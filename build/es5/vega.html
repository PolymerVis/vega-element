<html><head><script>(function(R,P){'object'===('undefined'===typeof exports?'undefined':babelHelpers.typeof(exports))&&'undefined'!==typeof module?P(exports):'function'===typeof define&&define.amd?define(['exports'],P):P(R.vega=R.vega||{})})(this,function(R){'use strict';function P(bB){var _B=bB.maxbins||20,xB=bB.base||10,vB=Math.log(xB),kB=bB.divide||[5,2],wB=bB.extent[0],SB=bB.extent[1],CB=SB-wB,zB,TB,RB,PB,AB,OB,MB,DB;if(bB.step)zB=bB.step;else if(bB.steps){for(AB=CB/_B,OB=0,MB=bB.steps.length;OB<MB&&bB.steps[OB]<AB;++OB);zB=bB.steps[Math.max(0,OB-1)]}else{for(TB=Math.ceil(Math.log(_B)/vB),RB=bB.minstep||0,zB=Math.max(RB,Math.pow(xB,Math.round(Math.log(CB)/vB)-TB));Math.ceil(CB/zB)>_B;)zB*=xB;for(OB=0,MB=kB.length;OB<MB;++OB)AB=zB/kB[OB],AB>=RB&&CB/AB<=_B&&(zB=AB)}return AB=Math.log(zB),PB=0<=AB?0:~~(-AB/vB)+1,DB=Math.pow(xB,-PB-1),(bB.nice||void 0===bB.nice)&&(wB=Math.min(wB,Math.floor(wB/zB+DB)*zB),SB=Math.ceil(SB/zB)*zB),{start:wB,stop:SB,step:zB}}function O(bB,_B){var xB=[],vB=bB.length,kB=-1,wB;if(null==_B)for(;++kB<vB;)isNaN(wB=M(bB[kB]))||xB.push(wB);else for(;++kB<vB;)isNaN(wB=M(_B(bB[kB],kB,bB)))||xB.push(wB);return xB}function M(bB){return null===bB?NaN:+bB}function U(bB,_B){return bB<_B?-1:bB>_B?1:bB>=_B?0:NaN}function F(bB){return 1===bB.length&&(bB=G(bB)),{left:function(xB,vB,kB,wB){for(null==kB&&(kB=0),null==wB&&(wB=xB.length);kB<wB;){var SB=kB+wB>>>1;0>bB(xB[SB],vB)?kB=SB+1:wB=SB}return kB},right:function(xB,vB,kB,wB){for(null==kB&&(kB=0),null==wB&&(wB=xB.length);kB<wB;){var SB=kB+wB>>>1;0<bB(xB[SB],vB)?wB=SB:kB=SB+1}return kB}}}function G(bB){return function(_B,xB){return U(bB(_B),xB)}}function W(bB){return null===bB?NaN:+bB}function H(bB,_B){var xB=bB.length,vB=0,kB=-1,wB=0,zB=0,SB,CB;if(null==_B)for(;++kB<xB;)isNaN(SB=W(bB[kB]))||(CB=SB-wB,wB+=CB/++vB,zB+=CB*(SB-wB));else for(;++kB<xB;)isNaN(SB=W(_B(bB[kB],kB,bB)))||(CB=SB-wB,wB+=CB/++vB,zB+=CB*(SB-wB));return 1<vB?zB/(vB-1):void 0}function V(bB,_B){var xB=bB.length,vB=-1,kB,wB,SB;if(null==_B){for(;++vB<xB;)if(null!=(kB=bB[vB])&&kB>=kB)for(wB=SB=kB;++vB<xB;)null!=(kB=bB[vB])&&(wB>kB&&(wB=kB),SB<kB&&(SB=kB));}else for(;++vB<xB;)if(null!=(kB=_B(bB[vB],vB,bB))&&kB>=kB)for(wB=SB=kB;++vB<xB;)null!=(kB=_B(bB[vB],vB,bB))&&(wB>kB&&(wB=kB),SB<kB&&(SB=kB));return[wB,SB]}function J(bB,_B,xB){bB=+bB,_B=+_B,xB=2>(kB=arguments.length)?(_B=bB,bB=0,1):3>kB?1:+xB;for(var vB=-1,kB=0|Math.max(0,Math.ceil((_B-bB)/xB)),wB=Array(kB);++vB<kB;)wB[vB]=bB+vB*xB;return wB}function K(bB,_B,xB){var vB=_B<bB,kB=-1,wB,SB,CB;if(vB&&(wB=bB,bB=_B,_B=wB),0===(CB=Q(bB,_B,xB))||!isFinite(CB))return[];if(0<CB)for(bB=Math.ceil(bB/CB),_B=Math.floor(_B/CB),SB=Array(wB=Math.ceil(_B-bB+1));++kB<wB;)SB[kB]=(bB+kB)*CB;else for(bB=Math.floor(bB*CB),_B=Math.ceil(_B*CB),SB=Array(wB=Math.ceil(bB-_B+1));++kB<wB;)SB[kB]=(bB-kB)/CB;return vB&&SB.reverse(),SB}function Q(bB,_B,xB){var vB=(_B-bB)/Math.max(0,xB),kB=Math.floor(Math.log(vB)/Math.LN10),wB=vB/Math.pow(10,kB);return 0<=kB?(wB>=Jz?10:wB>=Zz?5:wB>=Kz?2:1)*Math.pow(10,kB):-Math.pow(10,-kB)/(wB>=Jz?10:wB>=Zz?5:wB>=Kz?2:1)}function ee(bB,_B,xB){var vB=Math.abs(_B-bB)/Math.max(0,xB),kB=Math.pow(10,Math.floor(Math.log(vB)/Math.LN10)),wB=vB/kB;return wB>=Jz?kB*=10:wB>=Zz?kB*=5:wB>=Kz&&(kB*=2),_B<bB?-kB:kB}function te(bB){return Math.ceil(Math.log(bB.length)/Math.LN2)+1}function ne(bB,_B,xB){if(null==xB&&(xB=W),!!(vB=bB.length)){if(0>=(_B=+_B)||2>vB)return+xB(bB[0],0,bB);if(1<=_B)return+xB(bB[vB-1],vB-1,bB);var kB=(vB-1)*_B,wB=Math.floor(kB),SB=+xB(bB[wB],wB,bB),CB=+xB(bB[wB+1],wB+1,bB),vB;return SB+(CB-SB)*(kB-wB)}}function ae(bB,_B){var xB=bB.length,vB=-1,kB,wB;if(null==_B){for(;++vB<xB;)if(null!=(kB=bB[vB])&&kB>=kB)for(wB=kB;++vB<xB;)null!=(kB=bB[vB])&&kB>wB&&(wB=kB);}else for(;++vB<xB;)if(null!=(kB=_B(bB[vB],vB,bB))&&kB>=kB)for(wB=kB;++vB<xB;)null!=(kB=_B(bB[vB],vB,bB))&&kB>wB&&(wB=kB);return wB}function oe(bB){for(var _B=bB.length,vB=-1,kB=0,xB,wB,SB;++vB<_B;)kB+=bB[vB].length;for(wB=Array(kB);0<=--_B;)for(SB=bB[_B],xB=SB.length;0<=--xB;)wB[--kB]=SB[xB];return wB}function se(bB,_B){for(var xB=_B.length,vB=Array(xB);xB--;)vB[xB]=bB[_B[xB]];return vB}function fe(bB,_B){var xB=bB.length,vB=-1,wB=0,kB;if(null==_B)for(;++vB<xB;)(kB=+bB[vB])&&(wB+=kB);else for(;++vB<xB;)(kB=+_B(bB[vB],vB,bB))&&(wB+=kB);return wB}function ce(bB,_B,xB,vB){var kB=O(bB,vB),wB=kB.length,SB=_B,CB,zB,TB,RB;for(TB=0,RB=Array(SB);TB<SB;++TB){for(CB=0,zB=0;zB<wB;++zB)CB+=kB[~~(Math.random()*wB)];RB[TB]=CB/wB}return[ne(RB.sort(U),xB/2),ne(RB,1-xB/2)]}function pe(bB,_B){var kB=NaN,wB={},xB,vB;return wB.mean=function(SB){return arguments.length?(xB=SB||0,kB=NaN,wB):xB},wB.stdev=function(SB){return arguments.length?(vB=null==SB?1:SB,kB=NaN,wB):vB},wB.sample=function(){var SB=0,CB=0,zB,TB;if(kB===kB)return SB=kB,kB=NaN,SB;do SB=2*Math.random()-1,CB=2*Math.random()-1,zB=SB*SB+CB*CB;while(0===zB||1<zB);return TB=Math.sqrt(-2*Math.log(zB)/zB),kB=xB+CB*TB*vB,xB+SB*TB*vB},wB.pdf=function(SB){var CB=Math.exp(Math.pow(SB-xB,2)/(-2*Math.pow(vB,2)));return 1/(vB*Math.sqrt(2*Math.PI))*CB},wB.cdf=function(SB){var zB=(SB-xB)/vB,TB=Math.abs(zB),CB;if(37<TB)CB=0;else{var PB=Math.exp(-TB*TB/2),RB;7.07106781186547>TB?(RB=0.0352624965998911*TB+0.700383064443688,RB=RB*TB+6.37396220353165,RB=RB*TB+33.912866078383,RB=RB*TB+112.079291497871,RB=RB*TB+221.213596169931,RB=RB*TB+220.206867912376,CB=PB*RB,RB=0.0883883476483184*TB+1.75566716318264,RB=RB*TB+16.064177579207,RB=RB*TB+86.7807322029461,RB=RB*TB+296.564248779674,RB=RB*TB+637.333633378831,RB=RB*TB+793.826512519948,RB=RB*TB+440.413735824752,CB/=RB):(RB=TB+0.65,RB=TB+4/RB,RB=TB+3/RB,RB=TB+2/RB,RB=TB+1/RB,CB=PB/RB/2.506628274631)}return 0<zB?1-CB:CB},wB.icdf=function(SB){if(0>=SB||1<=SB)return NaN;var CB=2*SB-1,zB=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),TB=2/(Math.PI*zB)+Math.log(1-Math.pow(CB,2))/2,RB=Math.log(1-CB*CB)/zB,PB=(0<CB?1:-1)*Math.sqrt(Math.sqrt(TB*TB-RB)-TB);return xB+vB*Math.SQRT2*PB},wB.mean(bB).stdev(_B)}function ge(bB,_B){var xB=O(bB,_B);return[ne(xB.sort(U),0.25),ne(xB,0.5),ne(xB,0.75)]}function me(bB,_B){var xB=pe(),vB={},kB=0;return vB.data=function(wB){return arguments.length?(bB=wB,kB=wB?wB.length:0,vB.bandwidth(_B)):bB},vB.bandwidth=function(wB){return arguments.length?(_B=wB,!_B&&bB&&(_B=he(bB)),vB):_B},vB.sample=function(){return bB[~~(Math.random()*kB)]+_B*xB.sample()},vB.pdf=function(wB){for(var SB=0,CB=0;CB<kB;++CB)SB+=xB.pdf((wB-bB[CB])/_B);return SB/_B/kB},vB.cdf=function(wB){for(var SB=0,CB=0;CB<kB;++CB)SB+=xB.cdf((wB-bB[CB])/_B);return SB/kB},vB.icdf=function(){throw Error('KDE icdf not supported.')},vB.data(bB)}function he(bB){var _B=bB.length,xB=ge(bB),vB=(xB[2]-xB[0])/1.34;return 1.06*Math.min(Math.sqrt(H(bB)),vB)*Math.pow(_B,-0.2)}function ye(bB,_B){function xB(SB){var CB=[],zB=0,TB;for(TB=0;TB<kB;++TB)zB+=CB[TB]=null==SB[TB]?1:+SB[TB];for(TB=0;TB<kB;++TB)CB[TB]/=zB;return CB}var vB={},kB=0,wB;return vB.weights=function(SB){return arguments.length?(wB=xB(_B=SB||[]),vB):_B},vB.distributions=function(SB){return arguments.length?(SB?(kB=SB.length,bB=SB):(kB=0,bB=[]),vB.weights(_B)):bB},vB.sample=function(){for(var SB=Math.random(),CB=bB[kB-1],zB=wB[0],TB=0;TB<kB-1;zB+=wB[++TB])if(SB<zB){CB=bB[TB];break}return CB.sample()},vB.pdf=function(SB){for(var CB=0,zB=0;zB<kB;++zB)CB+=wB[zB]*bB[zB].pdf(SB);return CB},vB.cdf=function(SB){for(var CB=0,zB=0;zB<kB;++zB)CB+=wB[zB]*bB[zB].cdf(SB);return CB},vB.icdf=function(){throw Error('Mixture icdf not supported.')},vB.distributions(bB).weights(_B)}function be(bB,_B){null==_B&&(_B=null==bB?1:bB,bB=0);var xB={},vB,kB,wB;return xB.min=function(SB){return arguments.length?(vB=SB||0,wB=kB-vB,xB):vB},xB.max=function(SB){return arguments.length?(kB=SB||0,wB=kB-vB,xB):kB},xB.sample=function(){return vB+wB*Math.random()},xB.pdf=function(SB){return SB>=vB&&SB<=kB?1/wB:0},xB.cdf=function(SB){return SB<vB?0:SB>kB?1:(SB-vB)/wB},xB.icdf=function(SB){return 0<=SB&&1>=SB?vB+SB*wB:NaN},xB.min(bB).max(_B)}function _e(bB,_B,xB){return bB.fields=_B||[],bB.fname=xB,bB}function xe(bB){return null==bB?null:bB.fname}function ve(bB){return null==bB?null:bB.fields}function ke(bB){throw Error(bB)}function we(bB){function _B(){xB.push(SB+bB.substring(CB,zB)),SB='',CB=zB+1}var xB=[],vB=null,kB=0,wB=bB.length,SB='',CB,zB,TB;for(bB+='',CB=zB=0;zB<wB;++zB)if(TB=bB[zB],'\\'===TB)SB+=bB.substring(CB,zB),CB=++zB;else if(TB===vB)_B(),vB=null,kB=-1;else if(vB)continue;else CB===kB&&'"'===TB?(CB=zB+1,vB=TB):CB===kB&&'\''===TB?(CB=zB+1,vB=TB):'.'!==TB||kB?'['===TB?(zB>CB&&_B(),kB=CB=zB+1):']'===TB&&(kB||ke('Access path missing open bracket: '+bB),0<kB&&_B(),kB=0,CB=zB+1):zB>CB?_B():CB=zB+1;return kB&&ke('Access path missing closing bracket: '+bB),vB&&ke('Access path missing closing quote: '+bB),zB>CB&&(++zB,_B()),xB}function Ee(bB){return bB===Object(bB)}function Se(bB){return'string'===typeof bB}function Ce(bB){return Qz(bB)?'['+bB.map(Ce)+']':Ee(bB)||Se(bB)?JSON.stringify(bB).replace('\u2028','\\u2028').replace('\u2029','\\u2029'):bB}function ze(bB,_B){var xB=we(bB),vB='return _['+xB.map(Ce).join('][')+'];';return _e(Function('_',vB),[bB=1===xB.length?xB[0]:bB],_B||bB)}function Te(bB,_B,xB){var vB=[_B].concat([].slice.call(xB));console[bB].apply(console,vB)}function Re(bB){var _B=bB||oT;return{level:function(vB){return arguments.length?(_B=+vB,this):_B},warn:function(){return _B>=lT&&Te('warn','WARN',arguments),this},info:function(){return _B>=sT&&Te('log','INFO',arguments),this},debug:function(){return _B>=fT&&Te('log','DEBUG',arguments),this}}}function Pe(bB){return null==bB?[]:Qz(bB)?bB:[bB]}function Ae(bB,_B){var xB=[],vB=(bB=Pe(bB)).map(function(DB,qB){return null==DB?null:(xB.push(qB),we(DB).map(Ce).join(']['))}),kB=xB.length-1,wB=Pe(_B),SB='var u,v;return ',CB,zB,TB,RB,PB,AB,OB,MB;if(0>kB)return null;for(zB=0;zB<=kB;++zB)CB=xB[zB],TB=vB[CB],RB='(u=a['+TB+'])',PB='(v=b['+TB+'])',AB='((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))',OB='descending'===wB[CB]?(MB=-1,1):(MB=1,-1),SB+='('+RB+'<'+PB+'||u==null)&&v!=null?'+OB+':(u>v||v==null)&&u!=null?'+MB+':'+AB+'!==u&&v===v?'+OB+':v!==v&&u===u?'+MB+(CB<kB?':':':0');return _e(Function('a','b',SB+';'),bB.filter(function(DB){return null!=DB}))}function Oe(bB){return'function'===typeof bB}function Me(bB){return Oe(bB)?bB:function(){return bB}}function De(bB){for(var vB=1,kB=arguments.length,_B,xB;vB<kB;++vB)for(xB in _B=arguments[vB],_B)bB[xB]=_B[xB];return bB}function qe(bB,_B){var xB=-1,vB=bB.length,kB,wB,SB,CB,zB;if(null==_B){for(;++xB<vB;)if(null!=(wB=bB[xB])&&wB>=wB){kB=SB=wB;break}for(CB=zB=xB;++xB<vB;)null!=(wB=bB[xB])&&(kB>wB&&(kB=wB,CB=xB),SB<wB&&(SB=wB,zB=xB))}else{for(;++xB<vB;)if(null!=(wB=_B(bB[xB],xB,bB))&&wB>=wB){kB=SB=wB;break}for(CB=zB=xB;++xB<vB;)null!=(wB=_B(bB[xB],xB,bB))&&(kB>wB&&(kB=wB,CB=xB),SB<wB&&(SB=wB,zB=xB))}return[CB,zB]}function Le(bB){function _B(wB){return xB.hasOwnProperty(wB)&&xB[wB]!==cT}var xB={},vB,kB;return vB={size:0,empty:0,object:xB,has:_B,get:function(SB){return _B(SB)?xB[SB]:void 0},set:function(SB,CB){return _B(SB)||(++vB.size,xB[SB]===cT&&--vB.empty),xB[SB]=CB,this},delete:function(SB){return _B(SB)&&(--vB.size,++vB.empty,xB[SB]=cT),this},clear:function(){vB.size=vB.empty=0,vB.object=xB={}},test:function(SB){return arguments.length?(kB=SB,vB):kB},clean:function(){var SB={},CB=0,zB,TB;for(zB in xB)TB=xB[zB],TB===cT||kB&&kB(TB)||(SB[zB]=TB,++CB);vB.size=CB,vB.empty=0,vB.object=xB=SB}},bB&&Object.keys(bB).forEach(function(wB){vB.set(wB,bB[wB])}),vB}function Ue(bB,_B){var xB=bB.prototype=Object.create(_B.prototype);return xB.constructor=bB,xB}function Fe(bB){return'boolean'===typeof bB}function je(bB){return'[object Date]'===Object.prototype.toString.call(bB)}function Ie(bB){return'number'===typeof bB}function $e(bB){return'[object RegExp]'===Object.prototype.toString.call(bB)}function Ne(bB){bB=bB?Pe(bB):bB;var _B=bB&&bB.length?Function('_','return \'\'+'+bB.map(function(xB){return'_['+we(xB).map(Ce).join('][')+']'}).join('+\'|\'+')+';'):function(){return''};return _e(_B,bB,'key')}function Be(bB,_B,xB,vB){var kB=_B.length,wB=xB.length;if(!wB)return _B;if(!kB)return xB;for(var SB=vB||new _B.constructor(kB+wB),CB=0,zB=0,TB=0;CB<kB&&zB<wB;++TB)SB[TB]=0<bB(_B[CB],xB[zB])?xB[zB++]:_B[CB++];for(;CB<kB;++CB,++TB)SB[TB]=_B[CB];for(;zB<wB;++zB,++TB)SB[TB]=xB[zB];return SB}function Ye(bB,_B){for(var xB='';0<=--_B;)xB+=bB;return xB}function Ge(bB,_B,xB,vB){var kB=xB||' ',wB=bB+'',SB=_B-wB.length;return 0>=SB?wB:'left'===vB?Ye(kB,SB)+wB:'center'===vB?Ye(kB,~~(SB/2))+wB+Ye(kB,Math.ceil(SB/2)):wB+Ye(kB,SB)}function We(bB){return bB[bB.length-1]}function He(bB){return null==bB||''===bB?null:bB&&'false'!==bB&&!!bB}function Xe(bB,_B){return null==bB||''===bB?null:_B?_B(bB):Date.parse(bB)}function Ve(bB){return null==bB||''===bB?null:+bB}function Je(bB){return null==bB||''===bB?null:bB+''}function Ze(bB){for(var _B={},xB=0,vB=bB.length;xB<vB;++xB)_B[bB[xB]]=1;return _B}function Ke(bB,_B,xB,vB){var kB=null==vB?'\u2026':vB,wB=bB+'',SB=wB.length,CB=Math.max(0,_B-kB.length);return SB<=_B?wB:'left'===xB?kB+wB.slice(SB-CB):'center'===xB?wB.slice(0,Math.ceil(CB/2))+kB+wB.slice(SB-~~(CB/2)):wB.slice(0,CB)+kB}function Qe(bB,_B,xB){if(bB){var vB=0,kB=bB.length,wB;if(_B)for(;vB<kB;++vB)(wB=_B(bB[vB]))&&xB(wB,vB,bB);else bB.forEach(xB)}}function et(){}function tt(bB,_B){var xB=new et;if(bB instanceof et)bB.each(function(CB,zB){xB.set(zB,CB)});else if(Array.isArray(bB)){var vB=-1,kB=bB.length,wB;if(null==_B)for(;++vB<kB;)xB.set(vB,bB[vB]);else for(;++vB<kB;)xB.set(_B(wB=bB[vB],vB,bB),wB)}else if(bB)for(var SB in bB)xB.set(SB,bB[SB]);return xB}function nt(){function bB(CB,zB,TB,RB){if(zB>=xB.length)return null==wB?null==kB?CB:CB.sort(kB):wB(CB);for(var PB=-1,AB=CB.length,OB=xB[zB++],qB=tt(),UB=TB(),MB,DB,LB;++PB<AB;)(LB=qB.get(MB=OB(DB=CB[PB])+''))?LB.push(DB):qB.set(MB,[DB]);return qB.each(function(FB,jB){RB(UB,jB,bB(FB,zB,TB,RB))}),UB}function _B(CB,zB){if(++zB>xB.length)return CB;var RB=vB[zB-1],TB;return null!=wB&&zB>=xB.length?TB=CB.entries():(TB=[],CB.each(function(PB,AB){TB.push({key:AB,values:_B(PB,zB)})})),null==RB?TB:TB.sort(function(PB,AB){return RB(PB.key,AB.key)})}var xB=[],vB=[],kB,wB,SB;return SB={object:function(zB){return bB(zB,0,at,it)},map:function(zB){return bB(zB,0,rt,ot)},entries:function(zB){return _B(bB(zB,0,rt,ot),0)},key:function(zB){return xB.push(zB),SB},sortKeys:function(zB){return vB[xB.length-1]=zB,SB},sortValues:function(zB){return kB=zB,SB},rollup:function(zB){return wB=zB,SB}}}function at(){return{}}function it(bB,_B,xB){bB[_B]=xB}function rt(){return tt()}function ot(bB,_B,xB){bB.set(_B,xB)}function st(){for(var bB=0,_B=arguments.length,xB={},vB;bB<_B;++bB){if(!(vB=arguments[bB]+'')||vB in xB)throw new Error('illegal type: '+vB);xB[vB]=[]}return new ct(xB)}function ct(bB){this._=bB}function ut(bB,_B){return bB.trim().split(/^|\s+/).map(function(xB){var vB='',kB=xB.indexOf('.');if(0<=kB&&(vB=xB.slice(kB+1),xB=xB.slice(0,kB)),xB&&!_B.hasOwnProperty(xB))throw new Error('unknown type: '+xB);return{type:xB,name:vB}})}function pt(bB,_B){for(var xB=0,vB=bB.length,kB;xB<vB;++xB)if((kB=bB[xB]).name===_B)return kB.value}function mt(bB,_B,xB){for(var vB=0,kB=bB.length;vB<kB;++vB)if(bB[vB].name===_B){bB[vB]=gT,bB=bB.slice(0,vB).concat(bB.slice(vB+1));break}return null!=xB&&bB.push({name:_B,value:xB}),bB}function ht(bB,_B){function xB(OB){var MB=CB.status,DB;if(!MB&&_t(CB)||200<=MB&&300>MB||304===MB){if(RB)try{DB=RB.call(vB,CB)}catch(qB){return void kB.call('error',vB,qB)}else DB=CB;kB.call('load',vB,DB)}else kB.call('error',vB,OB)}var kB=st('beforesend','progress','load','error'),SB=tt(),CB=new XMLHttpRequest,zB=null,TB=null,AB=0,vB,wB,RB,PB;if('undefined'!==typeof XDomainRequest&&!('withCredentials'in CB)&&/^(http(s)?:)?\/\//.test(bB)&&(CB=new XDomainRequest),'onload'in CB?CB.onload=CB.onerror=CB.ontimeout=xB:CB.onreadystatechange=function(OB){3<CB.readyState&&xB(OB)},CB.onprogress=function(OB){kB.call('progress',vB,OB)},vB={header:function(MB,DB){return(MB=(MB+'').toLowerCase(),2>arguments.length)?SB.get(MB):(null==DB?SB.remove(MB):SB.set(MB,DB+''),vB)},mimeType:function(MB){return arguments.length?(wB=null==MB?null:MB+'',vB):wB},responseType:function(MB){return arguments.length?(PB=MB,vB):PB},timeout:function(MB){return arguments.length?(AB=+MB,vB):AB},user:function(MB){return 1>arguments.length?zB:(zB=null==MB?null:MB+'',vB)},password:function(MB){return 1>arguments.length?TB:(TB=null==MB?null:MB+'',vB)},response:function(MB){return RB=MB,vB},get:function(MB,DB){return vB.send('GET',MB,DB)},post:function(MB,DB){return vB.send('POST',MB,DB)},send:function(MB,DB,qB){return CB.open(MB,bB,!0,zB,TB),null==wB||SB.has('accept')||SB.set('accept',wB+',*/*'),CB.setRequestHeader&&SB.each(function(LB,UB){CB.setRequestHeader(UB,LB)}),null!=wB&&CB.overrideMimeType&&CB.overrideMimeType(wB),null!=PB&&(CB.responseType=PB),0<AB&&(CB.timeout=AB),null==qB&&'function'===typeof DB&&(qB=DB,DB=null),null!=qB&&1===qB.length&&(qB=bt(qB)),null!=qB&&vB.on('error',qB).on('load',function(LB){qB(null,LB)}),kB.call('beforesend',vB,CB),CB.send(null==DB?null:DB),vB},abort:function(){return CB.abort(),vB},on:function(){var MB=kB.on.apply(kB,arguments);return MB===kB?vB:MB}},null!=_B){if('function'!==typeof _B)throw new Error('invalid callback: '+_B);return vB.get(_B)}return vB}function bt(bB){return function(_B,xB){bB(null==_B?xB:null)}}function _t(bB){var _B=bB.responseType;return _B&&'text'!==_B?bB.response:bB.responseText}function vt(bB){return new Function('d','return {'+bB.map(function(_B,xB){return JSON.stringify(_B)+': d['+xB+']'}).join(',')+'}')}function kt(bB,_B){var xB=vt(bB);return function(vB,kB){return _B(xB(vB),kB,bB)}}function wt(bB){var _B=Object.create(null),xB=[];return bB.forEach(function(vB){for(var kB in vB)kB in _B||xB.push(_B[kB]=kB)}),xB}function Et(bB){function xB(TB,RB){function PB(){if(qB>=DB)return OB;if(FB)return FB=!1,AB;var IB=qB,$B;if(34===TB.charCodeAt(IB)){for(var NB=IB;NB++<DB;)if(34===TB.charCodeAt(NB)){if(34!==TB.charCodeAt(NB+1))break;++NB}return qB=NB+2,$B=TB.charCodeAt(NB+1),13===$B?(FB=!0,10===TB.charCodeAt(NB+2)&&++qB):10===$B&&(FB=!0),TB.slice(IB+1,NB).replace(/""/g,'"')}for(;qB<DB;){var BB=1;if($B=TB.charCodeAt(qB++),10===$B)FB=!0;else if(13===$B)FB=!0,10===TB.charCodeAt(qB)&&(++qB,++BB);else if($B!==zB)continue;return TB.slice(IB,qB-BB)}return TB.slice(IB)}for(var AB={},OB={},MB=[],DB=TB.length,qB=0,LB=0,UB,FB,jB;(UB=PB())!==OB;){for(jB=[];UB!==AB&&UB!==OB;)jB.push(UB),UB=PB();RB&&null==(jB=RB(jB,LB++))||MB.push(jB)}return MB}function wB(TB){return TB.map(SB).join(bB)}function SB(TB){return null==TB?'':CB.test(TB+='')?'"'+TB.replace(/\"/g,'""')+'"':TB}var CB=new RegExp('["'+bB+'\n\r]'),zB=bB.charCodeAt(0);return{parse:function(TB,RB){var OB=xB(TB,function(MB,DB){return PB?PB(MB,DB-1):void(AB=MB,PB=RB?kt(MB,RB):vt(MB))}),PB,AB;return OB.columns=AB,OB},parseRows:xB,format:function(TB,RB){return null==RB&&(RB=wt(TB)),[RB.map(SB).join(bB)].concat(TB.map(function(PB){return RB.map(function(AB){return SB(PB[AB])}).join(bB)})).join('\n')},formatRows:function(TB){return TB.map(wB).join('\n')}}}function St(bB){return{options:bB||{},sanitize:Tt,load:zt,file:Pt,http:Rt}}function Ct(bB,_B){return De({},bB.options,_B)}function zt(bB,_B){var xB=this;return xB.sanitize(bB,_B).then(function(vB){var kB=vB.href;return Ot(kB,bT)?xB.file(kB.slice(bT.length)):xB.http(kB,_B)})}function Tt(bB,_B){return _B=Ct(this,_B),new Promise(function(xB,vB){var kB,wB,SB,CB;return null==bB||'string'!==typeof bB?void vB('Sanitize failure, invalid URI: '+Ce(bB)):void(wB=yT.test(bB),(CB=_B.baseURL)&&!wB&&(!Ot(bB,'/')&&'/'!==CB[CB.length-1]&&(bB='/'+bB),bB=CB+bB),SB=(kB=Ot(bB,bT))||'file'===_B.mode||'http'!==_B.mode&&!wB&&At(),SB?bB=(kB?'':bT)+bB:Ot(bB,'//')&&(bB=(_B.defaultProtocol||'http')+':'+bB),xB({href:bB}))})}function Rt(bB,_B){return _B=Ct(this,_B),new Promise(function(xB,vB){var kB=ht(bB),wB;for(wB in _B.headers)kB.header(wB,_B.headers[wB]);_T.forEach(function(SB){_B[SB]&&kB[SB](_B[SB])}),kB.on('error',function(SB){vB(SB||'Error loading URL: '+bB)}).on('load',function(SB){var CB=SB&&SB.responseText;SB&&0!==SB.status?xB(CB):vB(CB||'Error')}).get()})}function Pt(bB){return new Promise(function(_B,xB){var vB=At();vB?vB.readFile(bB,function(kB,wB){kB?xB(kB):_B(wB)}):xB('No file system access for '+bB)})}function At(){var bB='function'===typeof require&&require('fs');return bB&&Oe(bB.readFile)?bB:null}function Ot(bB,_B){return null!=bB&&0===bB.lastIndexOf(_B,0)}function Mt(bB,_B){var xB=vT.slice(),vB,kB,wB,SB;for(kB=0,wB=bB.length;kB<wB;++kB){for(vB=_B?bB[kB][_B]:bB[kB],SB=0;SB<xB.length;++SB)qt(vB)&&!xB[SB](vB)&&(xB.splice(SB,1),--SB);if(0===xB.length)return'string'}return kT[vT.indexOf(xB[0])]}function Dt(bB,_B){return _B.reduce(function(xB,vB){return xB[vB]=Mt(bB,vB),xB},{})}function qt(bB){return null!=bB&&bB===bB}function Ft(bB){return!isNaN(+bB)&&!(bB instanceof Date)}function It(bB){return function(_B,xB){var vB={delimiter:bB};return $t(_B,xB?De(xB,vB):vB)}}function $t(bB,_B){return _B.header&&(bB=_B.header.map(Ce).join(_B.delimiter)+'\n'+bB),Et(_B.delimiter).parse(bB+'')}function Nt(bB){return'function'===typeof Buffer&&Oe(Buffer.isBuffer)&&Buffer.isBuffer(bB)}function Bt(bB,_B){var xB=_B&&_B.property?ze(_B.property):nT;return Ee(bB)&&!Nt(bB)?Yt(xB(bB)):xB(JSON.parse(bB))}function Yt(bB,_B){return _B&&_B.copy?JSON.parse(JSON.stringify(bB)):bB}function Gt(){}function Wt(bB){if(!bB)return Gt;var vB=bB.scale[0],kB=bB.scale[1],wB=bB.translate[0],SB=bB.translate[1],_B,xB;return function(CB,zB){zB||(_B=xB=0),CB[0]=(_B+=CB[0])*vB+wB,CB[1]=(xB+=CB[1])*kB+SB}}function Ht(bB,_B){for(var vB=bB.length,kB=vB-_B,xB;kB<--vB;)xB=bB[kB],bB[kB++]=bB[vB],bB[vB]=xB}function Xt(bB,_B){return'GeometryCollection'===_B.type?{type:'FeatureCollection',features:_B.geometries.map(function(xB){return Vt(bB,xB)})}:Vt(bB,_B)}function Vt(bB,_B){var xB={type:'Feature',id:_B.id,properties:_B.properties||{},geometry:Jt(bB,_B)};return null==_B.id&&delete xB.id,xB}function Jt(bB,_B){function xB(PB,AB){AB.length&&AB.pop();for(var OB=TB[0>PB?~PB:PB],MB=0,DB=OB.length,qB;MB<DB;++MB)AB.push(qB=OB[MB].slice()),zB(qB,MB);0>PB&&Ht(AB,DB)}function vB(PB){return PB=PB.slice(),zB(PB,0),PB}function kB(PB){for(var AB=[],OB=0,MB=PB.length;OB<MB;++OB)xB(PB[OB],AB);return 2>AB.length&&AB.push(AB[0].slice()),AB}function wB(PB){for(var AB=kB(PB);4>AB.length;)AB.push(AB[0].slice());return AB}function SB(PB){return PB.map(wB)}function CB(PB){var AB=PB.type;return'GeometryCollection'===AB?{type:AB,geometries:PB.geometries.map(CB)}:AB in RB?{type:AB,coordinates:RB[AB](PB)}:null}var zB=Wt(bB.transform),TB=bB.arcs,RB={Point:function(AB){return vB(AB.coordinates)},MultiPoint:function(AB){return AB.coordinates.map(vB)},LineString:function(AB){return kB(AB.arcs)},MultiLineString:function(AB){return AB.arcs.map(kB)},Polygon:function(AB){return SB(AB.arcs)},MultiPolygon:function(AB){return AB.arcs.map(SB)}};return CB(_B)}function Zt(bB,_B){function xB(TB){var RB=bB.arcs[0>TB?~TB:TB],PB=RB[0],AB;return bB.transform?(AB=[0,0],RB.forEach(function(OB){AB[0]+=OB[0],AB[1]+=OB[1]})):AB=RB[RB.length-1],0>TB?[AB,PB]:[PB,AB]}function vB(TB,RB){for(var PB in TB){var AB=TB[PB];delete RB[AB.start],delete AB.start,delete AB.end,AB.forEach(function(OB){kB[0>OB?~OB:OB]=1}),CB.push(AB)}}var kB={},wB={},SB={},CB=[],zB=-1;return _B.forEach(function(TB,RB){var PB=bB.arcs[0>TB?~TB:TB],AB;!(3>PB.length)||PB[1][0]||PB[1][1]||(AB=_B[++zB],_B[zB]=TB,_B[RB]=AB)}),_B.forEach(function(TB){var RB=xB(TB),PB=RB[0],AB=RB[1],OB,MB;if(OB=SB[PB]){if(delete SB[OB.end],OB.push(TB),OB.end=AB,MB=wB[AB]){delete wB[MB.start];var DB=MB===OB?OB:OB.concat(MB);wB[DB.start=OB.start]=SB[DB.end=MB.end]=DB}else wB[OB.start]=SB[OB.end]=OB;}else if(!(OB=wB[AB]))OB=[TB],wB[OB.start=PB]=SB[OB.end=AB]=OB;else if(delete wB[OB.start],OB.unshift(TB),OB.start=PB,MB=SB[PB]){delete SB[MB.end];var qB=MB===OB?OB:MB.concat(OB);wB[qB.start=MB.start]=SB[qB.end=OB.end]=qB}else wB[OB.start]=SB[OB.end]=OB}),vB(SB,wB),vB(wB,SB),_B.forEach(function(TB){kB[0>TB?~TB:TB]||CB.push([TB])}),CB}function Kt(bB){return Jt(bB,Qt.apply(this,arguments))}function Qt(bB,_B,xB){function vB(OB){var MB=0>OB?~OB:OB;(zB[MB]||(zB[MB]=[])).push({i:OB,g:TB})}function kB(OB){OB.forEach(vB)}function wB(OB){OB.forEach(kB)}function SB(OB){'GeometryCollection'===OB.type?OB.geometries.forEach(SB):OB.type in RB&&(TB=OB,RB[OB.type](OB.arcs))}var CB=[];if(1<arguments.length){var zB=[],TB,RB={LineString:kB,MultiLineString:wB,Polygon:wB,MultiPolygon:function(MB){MB.forEach(wB)}};SB(_B),zB.forEach(3>arguments.length?function(OB){CB.push(OB[0].i)}:function(OB){xB(OB[0].g,OB[OB.length-1].g)&&CB.push(OB[0].i)})}else for(var PB=0,AB=bB.arcs.length;PB<AB;++PB)CB.push(PB);return{type:'MultiLineString',arcs:Zt(bB,CB)}}function tn(bB,_B){return 1<arguments.length?(wT[bB]=_B,this):wT.hasOwnProperty(bB)?wT[bB]:null}function nn(bB,_B,xB,vB){function kB(wB){return bB(wB=new Date(+wB)),wB}return kB.floor=kB,kB.ceil=function(wB){return bB(wB=new Date(wB-1)),_B(wB,1),bB(wB),wB},kB.round=function(wB){var SB=kB(wB),CB=kB.ceil(wB);return wB-SB<CB-wB?SB:CB},kB.offset=function(wB,SB){return _B(wB=new Date(+wB),null==SB?1:Math.floor(SB)),wB},kB.range=function(wB,SB,CB){var zB=[];if(wB=kB.ceil(wB),CB=null==CB?1:Math.floor(CB),!(wB<SB)||!(0<CB))return zB;do zB.push(new Date(+wB));while((_B(wB,CB),bB(wB),wB<SB));return zB},kB.filter=function(wB){return nn(function(SB){if(SB>=SB)for(;bB(SB),!wB(SB);)SB.setTime(SB-1)},function(SB,CB){if(SB>=SB)for(;0<=--CB;)for(;_B(SB,1),!wB(SB););})},xB&&(kB.count=function(wB,SB){return ET.setTime(+wB),ST.setTime(+SB),bB(ET),bB(ST),Math.floor(xB(ET,ST))},kB.every=function(wB){return wB=Math.floor(wB),isFinite(wB)&&0<wB?1<wB?kB.filter(vB?function(SB){return 0===vB(SB)%wB}:function(SB){return 0===kB.count(0,SB)%wB}):kB:null}),kB}function an(bB){return nn(function(_B){_B.setDate(_B.getDate()-(_B.getDay()+7-bB)%7),_B.setHours(0,0,0,0)},function(_B,xB){_B.setDate(_B.getDate()+7*xB)},function(_B,xB){return(xB-_B-(xB.getTimezoneOffset()-_B.getTimezoneOffset())*TT)/AT})}function dn(bB){return nn(function(_B){_B.setUTCDate(_B.getUTCDate()-(_B.getUTCDay()+7-bB)%7),_B.setUTCHours(0,0,0,0)},function(_B,xB){_B.setUTCDate(_B.getUTCDate()+7*xB)},function(_B,xB){return(xB-_B)/AT})}function rn(bB){if(0<=bB.y&&100>bB.y){var _B=new Date(-1,bB.m,bB.d,bB.H,bB.M,bB.S,bB.L);return _B.setFullYear(bB.y),_B}return new Date(bB.y,bB.m,bB.d,bB.H,bB.M,bB.S,bB.L)}function ln(bB){if(0<=bB.y&&100>bB.y){var _B=new Date(Date.UTC(-1,bB.m,bB.d,bB.H,bB.M,bB.S,bB.L));return _B.setUTCFullYear(bB.y),_B}return new Date(Date.UTC(bB.y,bB.m,bB.d,bB.H,bB.M,bB.S,bB.L))}function sn(bB){return{y:bB,m:0,d:1,H:0,M:0,S:0,L:0}}function cn(bB){function _B(lY,sY){return function(fY){var cY=[],uY=-1,pY=0,gY=lY.length,mY,hY,yY;for(fY instanceof Date||(fY=new Date(+fY));++uY<gY;)37===lY.charCodeAt(uY)&&(cY.push(lY.slice(pY,uY)),null==(hY=XT[mY=lY.charAt(++uY)])?hY='e'===mY?' ':'0':mY=lY.charAt(++uY),(yY=sY[mY])&&(mY=yY(fY,hY)),cY.push(mY),pY=uY+1);return cY.push(lY.slice(pY,uY)),cY.join('')}}function xB(lY,sY){return function(fY){var cY=sn(1900),uY=vB(cY,lY,fY+='',0);if(uY!=fY.length)return null;if('p'in cY&&(cY.H=cY.H%12+12*cY.p),'W'in cY||'U'in cY){'w'in cY||(cY.w='W'in cY?1:0);var pY='Z'in cY?ln(sn(cY.y)).getUTCDay():sY(sn(cY.y)).getDay();cY.m=0,cY.d='W'in cY?(cY.w+6)%7+7*cY.W-(pY+5)%7:cY.w+7*cY.U-(pY+6)%7}return'Z'in cY?(cY.H+=0|cY.Z/100,cY.M+=cY.Z%100,ln(cY)):sY(cY)}}function vB(lY,sY,fY,cY){for(var uY=0,pY=sY.length,gY=fY.length,mY,hY;uY<pY;){if(cY>=gY)return-1;if(mY=sY.charCodeAt(uY++),37===mY){if(mY=sY.charAt(uY++),hY=oY[mY in XT?sY.charAt(uY++):mY],!hY||0>(cY=hY(lY,fY,cY)))return-1;}else if(mY!=fY.charCodeAt(cY++))return-1}return cY}var $B=bB.dateTime,NB=bB.date,BB=bB.time,YB=bB.periods,GB=bB.days,WB=bB.shortDays,HB=bB.months,XB=bB.shortMonths,VB=gn(YB),JB=mn(YB),ZB=gn(GB),KB=mn(GB),QB=gn(WB),eY=mn(WB),tY=gn(HB),nY=mn(HB),aY=gn(XB),iY=mn(XB),dY={a:function(lY){return WB[lY.getDay()]},A:function(lY){return GB[lY.getDay()]},b:function(lY){return XB[lY.getMonth()]},B:function(lY){return HB[lY.getMonth()]},c:null,d:Pn,e:Pn,H:An,I:On,j:Mn,L:Dn,m:qn,M:Ln,p:function(lY){return YB[+(12<=lY.getHours())]},S:Un,U:Fn,w:jn,W:In,x:null,X:null,y:$n,Y:Nn,Z:Bn,"%":Ea},rY={a:function(lY){return WB[lY.getUTCDay()]},A:function(lY){return GB[lY.getUTCDay()]},b:function(lY){return XB[lY.getUTCMonth()]},B:function(lY){return HB[lY.getUTCMonth()]},c:null,d:Gn,e:Gn,H:Wn,I:Hn,j:Vn,L:Jn,m:Qn,M:ia,p:function(lY){return YB[+(12<=lY.getUTCHours())]},S:la,U:fa,w:ua,W:ga,x:null,X:null,y:ma,Y:_a,Z:wa,"%":Ea},oY={a:function(lY,sY,fY){var cY=QB.exec(sY.slice(fY));return cY?(lY.w=eY[cY[0].toLowerCase()],fY+cY[0].length):-1},A:function(lY,sY,fY){var cY=ZB.exec(sY.slice(fY));return cY?(lY.w=KB[cY[0].toLowerCase()],fY+cY[0].length):-1},b:function(lY,sY,fY){var cY=aY.exec(sY.slice(fY));return cY?(lY.m=iY[cY[0].toLowerCase()],fY+cY[0].length):-1},B:function(lY,sY,fY){var cY=tY.exec(sY.slice(fY));return cY?(lY.m=nY[cY[0].toLowerCase()],fY+cY[0].length):-1},c:function(lY,sY,fY){return vB(lY,$B,sY,fY)},d:wn,e:wn,H:Sn,I:Sn,j:En,L:Tn,m:kn,M:Cn,p:function(lY,sY,fY){var cY=VB.exec(sY.slice(fY));return cY?(lY.p=JB[cY[0].toLowerCase()],fY+cY[0].length):-1},S:zn,U:yn,w:hn,W:bn,x:function(lY,sY,fY){return vB(lY,NB,sY,fY)},X:function(lY,sY,fY){return vB(lY,BB,sY,fY)},y:xn,Y:_n,Z:vn,"%":Rn};return dY.x=_B(NB,dY),dY.X=_B(BB,dY),dY.c=_B($B,dY),rY.x=_B(NB,rY),rY.X=_B(BB,rY),rY.c=_B($B,rY),{format:function(sY){var fY=_B(sY+='',dY);return fY.toString=function(){return sY},fY},parse:function(sY){var fY=xB(sY+='',rn);return fY.toString=function(){return sY},fY},utcFormat:function(sY){var fY=_B(sY+='',rY);return fY.toString=function(){return sY},fY},utcParse:function(sY){var fY=xB(sY,ln);return fY.toString=function(){return sY},fY}}}function un(bB,_B,xB){var vB=0>bB?'-':'',kB=(vB?-bB:bB)+'',wB=kB.length;return vB+(wB<xB?Array(xB-wB+1).join(_B)+kB:kB)}function pn(bB){return bB.replace(ZT,'\\$&')}function gn(bB){return new RegExp('^(?:'+bB.map(pn).join('|')+')','i')}function mn(bB){for(var _B={},xB=-1,vB=bB.length;++xB<vB;)_B[bB[xB].toLowerCase()]=xB;return _B}function hn(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+1));return vB?(bB.w=+vB[0],xB+vB[0].length):-1}function yn(bB,_B,xB){var vB=VT.exec(_B.slice(xB));return vB?(bB.U=+vB[0],xB+vB[0].length):-1}function bn(bB,_B,xB){var vB=VT.exec(_B.slice(xB));return vB?(bB.W=+vB[0],xB+vB[0].length):-1}function _n(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+4));return vB?(bB.y=+vB[0],xB+vB[0].length):-1}function xn(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+2));return vB?(bB.y=+vB[0]+(68<+vB[0]?1900:2e3),xB+vB[0].length):-1}function vn(bB,_B,xB){var vB=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(_B.slice(xB,xB+6));return vB?(bB.Z=vB[1]?0:-(vB[2]+(vB[3]||'00')),xB+vB[0].length):-1}function kn(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+2));return vB?(bB.m=vB[0]-1,xB+vB[0].length):-1}function wn(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+2));return vB?(bB.d=+vB[0],xB+vB[0].length):-1}function En(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+3));return vB?(bB.m=0,bB.d=+vB[0],xB+vB[0].length):-1}function Sn(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+2));return vB?(bB.H=+vB[0],xB+vB[0].length):-1}function Cn(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+2));return vB?(bB.M=+vB[0],xB+vB[0].length):-1}function zn(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+2));return vB?(bB.S=+vB[0],xB+vB[0].length):-1}function Tn(bB,_B,xB){var vB=VT.exec(_B.slice(xB,xB+3));return vB?(bB.L=+vB[0],xB+vB[0].length):-1}function Rn(bB,_B,xB){var vB=JT.exec(_B.slice(xB,xB+1));return vB?xB+vB[0].length:-1}function Pn(bB,_B){return un(bB.getDate(),_B,2)}function An(bB,_B){return un(bB.getHours(),_B,2)}function On(bB,_B){return un(bB.getHours()%12||12,_B,2)}function Mn(bB,_B){return un(1+qT.count(jT(bB),bB),_B,3)}function Dn(bB,_B){return un(bB.getMilliseconds(),_B,3)}function qn(bB,_B){return un(bB.getMonth()+1,_B,2)}function Ln(bB,_B){return un(bB.getMinutes(),_B,2)}function Un(bB,_B){return un(bB.getSeconds(),_B,2)}function Fn(bB,_B){return un(LT.count(jT(bB),bB),_B,2)}function jn(bB){return bB.getDay()}function In(bB,_B){return un(UT.count(jT(bB),bB),_B,2)}function $n(bB,_B){return un(bB.getFullYear()%100,_B,2)}function Nn(bB,_B){return un(bB.getFullYear()%1e4,_B,4)}function Bn(bB){var _B=bB.getTimezoneOffset();return(0<_B?'-':(_B*=-1,'+'))+un(0|_B/60,'0',2)+un(_B%60,'0',2)}function Gn(bB,_B){return un(bB.getUTCDate(),_B,2)}function Wn(bB,_B){return un(bB.getUTCHours(),_B,2)}function Hn(bB,_B){return un(bB.getUTCHours()%12||12,_B,2)}function Vn(bB,_B){return un(1+NT.count(HT(bB),bB),_B,3)}function Jn(bB,_B){return un(bB.getUTCMilliseconds(),_B,3)}function Qn(bB,_B){return un(bB.getUTCMonth()+1,_B,2)}function ia(bB,_B){return un(bB.getUTCMinutes(),_B,2)}function la(bB,_B){return un(bB.getUTCSeconds(),_B,2)}function fa(bB,_B){return un(BT.count(HT(bB),bB),_B,2)}function ua(bB){return bB.getUTCDay()}function ga(bB,_B){return un(YT.count(HT(bB),bB),_B,2)}function ma(bB,_B){return un(bB.getUTCFullYear()%100,_B,2)}function _a(bB,_B){return un(bB.getUTCFullYear()%1e4,_B,4)}function wa(){return'+0000'}function Ea(){return'%'}function Sa(bB){return KT=cn(bB),QT=KT.format,eR=KT.parse,tR=KT.utcFormat,nR=KT.utcParse,KT}function Ta(bB,_B,xB){_B=_B||{};var vB=tn(_B.type||'json');return vB||ke('Unknown data format type: '+_B.type),bB=vB(bB,_B),_B.parse&&Ra(bB,_B.parse,xB),bB.hasOwnProperty('columns')&&delete bB.columns,bB}function Ra(bB,_B,xB){xB=xB||eR;var vB=bB.columns||Object.keys(bB[0]),kB,wB,SB,CB,zB,TB,RB;for('auto'===_B&&(_B=Dt(bB,vB)),vB=Object.keys(_B),kB=vB.map(function(PB){var AB=_B[PB],OB,MB;if(AB&&(0===AB.indexOf('date:')||0===AB.indexOf('utc:')))return OB=AB.split(/:(.+)?/,2),MB=OB[1],('\''===MB[0]&&'\''===MB[MB.length-1]||'"'===MB[0]&&'"'===MB[MB.length-1])&&(MB=MB.slice(1,-1)),'utc'===OB[0]?nR(MB):xB(MB);if(!xT[AB])throw Error('Illegal format pattern: '+PB+':'+AB);return xT[AB]}),(CB=0,TB=bB.length,RB=vB.length);CB<TB;++CB)for(wB=bB[CB],zB=0;zB<RB;++zB)SB=vB[zB],wB[SB]=kB[zB](wB[SB])}function Pa(bB){this.clear(),bB&&this.union(bB)}function Aa(bB,_B){var xB=[],vB;return vB={id:'gradient_'+oR++,x1:bB?bB[0]:0,y1:bB?bB[1]:0,x2:_B?_B[0]:1,y2:_B?_B[1]:0,stops:xB,stop:function(wB,SB){return xB.push({offset:wB,color:SB}),vB}}}function Oa(bB){this.mark=bB,this.bounds=this.bounds||new Pa,this.bounds_prev=this.bounds_prev||new Pa}function Ma(bB){Oa.call(this,bB),this.items=this.items||[]}function Da(bB,_B,xB){return!bB&&'undefined'!==typeof document&&document.createElement&&(bB=document),bB?xB?bB.createElementNS(xB,_B):bB.createElement(_B):null}function qa(bB,_B){_B=_B.toLowerCase();for(var xB=bB.childNodes,vB=0,kB=xB.length;vB<kB;++vB)if(xB[vB].tagName.toLowerCase()===_B)return xB[vB]}function La(bB,_B,xB,vB){var kB=bB.childNodes[_B],wB;return kB&&kB.tagName.toLowerCase()===xB.toLowerCase()||(wB=kB||null,kB=Da(bB.ownerDocument,xB,vB),bB.insertBefore(kB,wB)),kB}function Ua(bB,_B){for(var xB=bB.childNodes,vB=xB.length;vB>_B;)bB.removeChild(xB[--vB]);return bB}function Fa(bB){return'mark-'+bB.marktype+(bB.role?' role-'+bB.role:'')+(bB.name?' '+bB.name:'')}function ja(bB,_B){var xB=Da(null,'canvas');return xB?(xB.width=bB,xB.height=_B):lR&&(xB=new lR(bB,_B)),xB}function Ia(bB){this._pending=0,this._loader=bB||St()}function $a(bB){bB._pending+=1}function Na(bB){bB._pending-=1}function Ba(){this._x0=this._y0=this._x1=this._y1=null,this._=''}function Ya(){return new Ba}function Ga(bB){return function(){return bB}}function Wa(bB){return 1<bB?0:-1>bB?wR:Math.acos(bB)}function Ha(bB){return 1<=bB?ER:-1>=bB?-ER:Math.asin(bB)}function Xa(bB){return bB.innerRadius}function Va(bB){return bB.outerRadius}function Ja(bB){return bB.startAngle}function Za(bB){return bB.endAngle}function Ka(bB){return bB&&bB.padAngle}function Qa(bB,_B,xB,vB,kB,wB,SB,CB){var zB=xB-bB,TB=vB-_B,RB=SB-kB,PB=CB-wB,AB=(RB*(_B-wB)-PB*(bB-kB))/(PB*zB-RB*TB);return[bB+AB*zB,_B+AB*TB]}function ei(bB,_B,xB,vB,kB,wB,SB){var CB=bB-xB,zB=_B-vB,TB=(SB?wB:-wB)/vR(CB*CB+zB*zB),RB=TB*zB,PB=-TB*CB,AB=bB+RB,OB=_B+PB,MB=xB+RB,DB=vB+PB,qB=(AB+MB)/2,LB=(OB+DB)/2,UB=MB-AB,FB=DB-OB,jB=UB*UB+FB*FB,IB=kB-wB,$B=AB*DB-MB*OB,NB=(0>FB?-1:1)*vR(bR(0,IB*IB*jB-$B*$B)),BB=($B*FB-UB*NB)/jB,YB=(-$B*UB-FB*NB)/jB,GB=($B*FB+UB*NB)/jB,WB=(-$B*UB+FB*NB)/jB,HB=BB-qB,XB=YB-LB,VB=GB-qB,JB=WB-LB;return HB*HB+XB*XB>VB*VB+JB*JB&&(BB=GB,YB=WB),{cx:BB,cy:YB,x01:-RB,y01:-PB,x11:BB*(kB/IB-1),y11:YB*(kB/IB-1)}}function ni(bB){this._context=bB}function ai(bB){return new ni(bB)}function ii(bB){return bB[0]}function oi(bB){return bB[1]}function li(){function bB(CB){var TB=CB.length,PB=!1,zB,RB,AB;for(null==kB&&(SB=wB(AB=Ya())),zB=0;zB<=TB;++zB)!(zB<TB&&vB(RB=CB[zB],zB,CB))===PB&&((PB=!PB)?SB.lineStart():SB.lineEnd()),PB&&SB.point(+_B(RB,zB,CB),+xB(RB,zB,CB));if(AB)return SB=null,AB+''||null}var _B=ii,xB=oi,vB=Ga(!0),kB=null,wB=ai,SB=null;return bB.x=function(CB){return arguments.length?(_B='function'===typeof CB?CB:Ga(+CB),bB):_B},bB.y=function(CB){return arguments.length?(xB='function'===typeof CB?CB:Ga(+CB),bB):xB},bB.defined=function(CB){return arguments.length?(vB='function'===typeof CB?CB:Ga(!!CB),bB):vB},bB.curve=function(CB){return arguments.length?(wB=CB,null!=kB&&(SB=wB(kB)),bB):wB},bB.context=function(CB){return arguments.length?(null==CB?kB=SB=null:SB=wB(kB=CB),bB):kB},bB}function si(){function bB(RB){var MB=RB.length,qB=!1,UB=Array(MB),FB=Array(MB),PB,AB,OB,DB,LB;for(null==CB&&(TB=zB(LB=Ya())),PB=0;PB<=MB;++PB){if(!(PB<MB&&SB(DB=RB[PB],PB,RB))===qB)if(qB=!qB)AB=PB,TB.areaStart(),TB.lineStart();else{for(TB.lineEnd(),TB.lineStart(),OB=PB-1;OB>=AB;--OB)TB.point(UB[OB],FB[OB]);TB.lineEnd(),TB.areaEnd()}qB&&(UB[PB]=+xB(DB,PB,RB),FB[PB]=+kB(DB,PB,RB),TB.point(vB?+vB(DB,PB,RB):UB[PB],wB?+wB(DB,PB,RB):FB[PB]))}if(LB)return TB=null,LB+''||null}function _B(){return li().defined(SB).curve(zB).context(CB)}var xB=ii,vB=null,kB=Ga(0),wB=oi,SB=Ga(!0),CB=null,zB=ai,TB=null;return bB.x=function(RB){return arguments.length?(xB='function'===typeof RB?RB:Ga(+RB),vB=null,bB):xB},bB.x0=function(RB){return arguments.length?(xB='function'===typeof RB?RB:Ga(+RB),bB):xB},bB.x1=function(RB){return arguments.length?(vB=null==RB?null:'function'===typeof RB?RB:Ga(+RB),bB):vB},bB.y=function(RB){return arguments.length?(kB='function'===typeof RB?RB:Ga(+RB),wB=null,bB):kB},bB.y0=function(RB){return arguments.length?(kB='function'===typeof RB?RB:Ga(+RB),bB):kB},bB.y1=function(RB){return arguments.length?(wB=null==RB?null:'function'===typeof RB?RB:Ga(+RB),bB):wB},bB.lineX0=bB.lineY0=function(){return _B().x(xB).y(kB)},bB.lineY1=function(){return _B().x(xB).y(wB)},bB.lineX1=function(){return _B().x(vB).y(kB)},bB.defined=function(RB){return arguments.length?(SB='function'===typeof RB?RB:Ga(!!RB),bB):SB},bB.curve=function(RB){return arguments.length?(zB=RB,null!=CB&&(TB=zB(CB)),bB):zB},bB.context=function(RB){return arguments.length?(null==RB?CB=TB=null:TB=zB(CB=RB),bB):CB},bB}function ci(){}function ui(bB,_B,xB){bB._context.bezierCurveTo((2*bB._x0+bB._x1)/3,(2*bB._y0+bB._y1)/3,(bB._x0+2*bB._x1)/3,(bB._y0+2*bB._y1)/3,(bB._x0+4*bB._x1+_B)/6,(bB._y0+4*bB._y1+xB)/6)}function gi(bB){this._context=bB}function _i(bB){this._context=bB}function ki(bB){this._context=bB}function Ei(bB,_B){this._basis=new gi(bB),this._beta=_B}function Si(bB,_B,xB){bB._context.bezierCurveTo(bB._x1+bB._k*(bB._x2-bB._x0),bB._y1+bB._k*(bB._y2-bB._y0),bB._x2+bB._k*(bB._x1-_B),bB._y2+bB._k*(bB._y1-xB),bB._x2,bB._y2)}function Ci(bB,_B){this._context=bB,this._k=(1-_B)/6}function zi(bB,_B){this._context=bB,this._k=(1-_B)/6}function Ti(bB,_B){this._context=bB,this._k=(1-_B)/6}function Ri(bB,_B,xB){var vB=bB._x1,kB=bB._y1,wB=bB._x2,SB=bB._y2;if(bB._l01_a>kR){var CB=2*bB._l01_2a+3*bB._l01_a*bB._l12_a+bB._l12_2a,zB=3*bB._l01_a*(bB._l01_a+bB._l12_a);vB=(vB*CB-bB._x0*bB._l12_2a+bB._x2*bB._l01_2a)/zB,kB=(kB*CB-bB._y0*bB._l12_2a+bB._y2*bB._l01_2a)/zB}if(bB._l23_a>kR){var TB=2*bB._l23_2a+3*bB._l23_a*bB._l12_a+bB._l12_2a,RB=3*bB._l23_a*(bB._l23_a+bB._l12_a);wB=(wB*TB+bB._x1*bB._l23_2a-_B*bB._l12_2a)/RB,SB=(SB*TB+bB._y1*bB._l23_2a-xB*bB._l12_2a)/RB}bB._context.bezierCurveTo(vB,kB,wB,SB,bB._x2,bB._y2)}function Pi(bB,_B){this._context=bB,this._alpha=_B}function Ai(bB,_B){this._context=bB,this._alpha=_B}function Oi(bB,_B){this._context=bB,this._alpha=_B}function Mi(bB){this._context=bB}function qi(bB){return 0>bB?-1:1}function Li(bB,_B,xB){var vB=bB._x1-bB._x0,kB=_B-bB._x1,wB=(bB._y1-bB._y0)/(vB||0>kB&&-0),SB=(xB-bB._y1)/(kB||0>vB&&-0);return(qi(wB)+qi(SB))*Math.min(Math.abs(wB),Math.abs(SB),0.5*Math.abs((wB*kB+SB*vB)/(vB+kB)))||0}function Ui(bB,_B){var xB=bB._x1-bB._x0;return xB?(3*(bB._y1-bB._y0)/xB-_B)/2:_B}function Fi(bB,_B,xB){var vB=bB._x0,kB=bB._y0,wB=bB._x1,SB=bB._y1,CB=(wB-vB)/3;bB._context.bezierCurveTo(vB+CB,kB+CB*_B,wB-CB,SB-CB*xB,wB,SB)}function ji(bB){this._context=bB}function Ii(bB){this._context=new $i(bB)}function $i(bB){this._context=bB}function Yi(bB){this._context=bB}function Gi(bB){var xB=bB.length-1,kB=Array(xB),wB=Array(xB),SB=Array(xB),_B,vB;for(kB[0]=0,wB[0]=2,SB[0]=bB[0]+2*bB[1],_B=1;_B<xB-1;++_B)kB[_B]=1,wB[_B]=4,SB[_B]=4*bB[_B]+2*bB[_B+1];for(kB[xB-1]=2,wB[xB-1]=7,SB[xB-1]=8*bB[xB-1]+bB[xB],_B=1;_B<xB;++_B)vB=kB[_B]/wB[_B-1],wB[_B]-=vB,SB[_B]-=vB*SB[_B-1];for(kB[xB-1]=SB[xB-1]/wB[xB-1],_B=xB-2;0<=_B;--_B)kB[_B]=(SB[_B]-kB[_B+1])/wB[_B];for(wB[xB-1]=(bB[xB]+kB[xB-1])/2,_B=0;_B<xB-1;++_B)wB[_B]=2*bB[_B+1]-kB[_B+1];return[kB,wB]}function Hi(bB,_B){this._context=bB,this._t=_B}function Zi(bB,_B,xB){var vB=UR.hasOwnProperty(bB)&&UR[bB],kB=null;return vB&&(kB=vB.curve||vB[_B||'vertical'],vB.tension&&null!=xB&&(kB=kB[vB.tension](xB))),kB}function Ki(bB){var _B=[],xB,vB,kB,wB,SB,CB,zB,TB,RB,PB,AB;for(xB=bB.slice().replace(jR[0],'###$1').split(jR[1]).slice(1),TB=0,PB=xB.length;TB<PB;++TB){for(vB=xB[TB],kB=vB.slice(1).trim().replace(jR[2],'$1###$2').split(jR[3]),CB=vB.charAt(0),wB=[CB],(RB=0,AB=kB.length);RB<AB;++RB)(SB=+kB[RB])===SB&&wB.push(SB);if(zB=FR[CB.toLowerCase()],wB.length-1>zB)for(RB=1,AB=wB.length;RB<AB;RB+=zB)_B.push([CB].concat(wB.slice(RB,RB+zB)));else _B.push(wB)}return _B}function Qi(bB,_B,xB,vB,kB,wB,SB,CB,zB){var TB=NR.call(arguments);if(IR[TB])return IR[TB];var RB=SB*(Math.PI/180),PB=Math.sin(RB),AB=Math.cos(RB);xB=Math.abs(xB),vB=Math.abs(vB);var OB=0.5*(AB*(CB-bB))+0.5*(PB*(zB-_B)),MB=0.5*(AB*(zB-_B))-0.5*(PB*(CB-bB)),DB=OB*OB/(xB*xB)+MB*MB/(vB*vB);1<DB&&(DB=Math.sqrt(DB),xB*=DB,vB*=DB);var qB=AB/xB,LB=PB/xB,UB=-PB/vB,FB=AB/vB,jB=qB*CB+LB*zB,IB=UB*CB+FB*zB,$B=qB*bB+LB*_B,NB=UB*bB+FB*_B,YB=1/(($B-jB)*($B-jB)+(NB-IB)*(NB-IB))-0.25;0>YB&&(YB=0);var GB=Math.sqrt(YB);wB==kB&&(GB=-GB);var WB=0.5*(jB+$B)-GB*(NB-IB),HB=0.5*(IB+NB)+GB*($B-jB),XB=Math.atan2(IB-HB,jB-WB),VB=Math.atan2(NB-HB,$B-WB),JB=VB-XB;0>JB&&1===wB?JB+=2*Math.PI:0<JB&&0===wB&&(JB-=2*Math.PI);for(var ZB=Math.ceil(Math.abs(JB/(0.5*Math.PI+1e-3))),KB=[],QB=0;QB<ZB;++QB){var eY=XB+QB*JB/ZB,tY=XB+(QB+1)*JB/ZB;KB[QB]=[WB,HB,eY,tY,xB,vB,PB,AB]}return IR[TB]=KB}function ed(bB){var _B=NR.call(bB);if($R[_B])return $R[_B];var xB=bB[0],vB=bB[1],kB=bB[2],wB=bB[3],SB=bB[4],CB=bB[5],zB=bB[6],TB=bB[7],RB=TB*SB,PB=-zB*CB,AB=zB*SB,OB=TB*CB,MB=Math.cos(kB),DB=Math.sin(kB),qB=Math.cos(wB),LB=Math.sin(wB),UB=0.5*(wB-kB),FB=Math.sin(0.5*UB),jB=8/3*FB*FB/Math.sin(UB),IB=xB+MB-jB*DB,$B=vB+DB+jB*MB,NB=xB+qB,BB=vB+LB,YB=NB+jB*LB,GB=BB-jB*qB;return $R[_B]=[RB*IB+PB*$B,AB*IB+OB*$B,RB*YB+PB*GB,AB*YB+OB*GB,RB*NB+PB*BB,AB*NB+OB*BB]}function td(bB,_B){var xB=BR[0]=bB[0];if('a'===xB||'A'===xB)BR[1]=_B*bB[1],BR[2]=_B*bB[2],BR[6]=_B*bB[6],BR[7]=_B*bB[7];else for(var vB=1,kB=bB.length;vB<kB;++vB)BR[vB]=_B*bB[vB];return BR}function nd(bB,_B,xB,vB,kB){var SB=null,CB=0,zB=0,TB=0,RB=0,wB,PB,AB,OB,MB;null==xB&&(xB=0),null==vB&&(vB=0),null==kB&&(kB=1),bB.beginPath&&bB.beginPath();for(var DB=0,qB=_B.length;DB<qB;++DB){switch(wB=_B[DB],1!==kB&&(wB=td(wB,kB)),wB[0]){case'l':CB+=wB[1],zB+=wB[2],bB.lineTo(CB+xB,zB+vB);break;case'L':CB=wB[1],zB=wB[2],bB.lineTo(CB+xB,zB+vB);break;case'h':CB+=wB[1],bB.lineTo(CB+xB,zB+vB);break;case'H':CB=wB[1],bB.lineTo(CB+xB,zB+vB);break;case'v':zB+=wB[1],bB.lineTo(CB+xB,zB+vB);break;case'V':zB=wB[1],bB.lineTo(CB+xB,zB+vB);break;case'm':CB+=wB[1],zB+=wB[2],bB.moveTo(CB+xB,zB+vB);break;case'M':CB=wB[1],zB=wB[2],bB.moveTo(CB+xB,zB+vB);break;case'c':PB=CB+wB[5],AB=zB+wB[6],TB=CB+wB[3],RB=zB+wB[4],bB.bezierCurveTo(CB+wB[1]+xB,zB+wB[2]+vB,TB+xB,RB+vB,PB+xB,AB+vB),CB=PB,zB=AB;break;case'C':CB=wB[5],zB=wB[6],TB=wB[3],RB=wB[4],bB.bezierCurveTo(wB[1]+xB,wB[2]+vB,TB+xB,RB+vB,CB+xB,zB+vB);break;case's':PB=CB+wB[3],AB=zB+wB[4],TB=2*CB-TB,RB=2*zB-RB,bB.bezierCurveTo(TB+xB,RB+vB,CB+wB[1]+xB,zB+wB[2]+vB,PB+xB,AB+vB),TB=CB+wB[1],RB=zB+wB[2],CB=PB,zB=AB;break;case'S':PB=wB[3],AB=wB[4],TB=2*CB-TB,RB=2*zB-RB,bB.bezierCurveTo(TB+xB,RB+vB,wB[1]+xB,wB[2]+vB,PB+xB,AB+vB),CB=PB,zB=AB,TB=wB[1],RB=wB[2];break;case'q':PB=CB+wB[3],AB=zB+wB[4],TB=CB+wB[1],RB=zB+wB[2],bB.quadraticCurveTo(TB+xB,RB+vB,PB+xB,AB+vB),CB=PB,zB=AB;break;case'Q':PB=wB[3],AB=wB[4],bB.quadraticCurveTo(wB[1]+xB,wB[2]+vB,PB+xB,AB+vB),CB=PB,zB=AB,TB=wB[1],RB=wB[2];break;case't':PB=CB+wB[1],AB=zB+wB[2],null===SB[0].match(/[QqTt]/)?(TB=CB,RB=zB):'t'===SB[0]?(TB=2*CB-OB,RB=2*zB-MB):'q'===SB[0]&&(TB=2*CB-TB,RB=2*zB-RB),OB=TB,MB=RB,bB.quadraticCurveTo(TB+xB,RB+vB,PB+xB,AB+vB),CB=PB,zB=AB,TB=CB+wB[1],RB=zB+wB[2];break;case'T':PB=wB[1],AB=wB[2],TB=2*CB-TB,RB=2*zB-RB,bB.quadraticCurveTo(TB+xB,RB+vB,PB+xB,AB+vB),CB=PB,zB=AB;break;case'a':ad(bB,CB+xB,zB+vB,[wB[1],wB[2],wB[3],wB[4],wB[5],wB[6]+CB+xB,wB[7]+zB+vB]),CB+=wB[6],zB+=wB[7];break;case'A':ad(bB,CB+xB,zB+vB,[wB[1],wB[2],wB[3],wB[4],wB[5],wB[6]+xB,wB[7]+vB]),CB=wB[6],zB=wB[7];break;case'z':case'Z':bB.closePath();}SB=wB}}function ad(bB,_B,xB,vB){for(var kB=Qi(vB[5],vB[6],vB[0],vB[1],vB[3],vB[4],vB[2],_B,xB),wB=0,SB;wB<kB.length;++wB)SB=ed(kB[wB]),bB.bezierCurveTo(SB[0],SB[1],SB[2],SB[3],SB[4],SB[5])}function dd(bB){return WR.hasOwnProperty(bB)?WR[bB]:rd(bB)}function rd(bB){if(!HR.hasOwnProperty(bB)){var _B=Ki(bB);HR[bB]={draw:function(vB,kB){nd(vB,_B,0,0,Math.sqrt(kB)/2)}}}return HR[bB]}function od(bB){return bB.x}function ld(bB){return bB.y}function sd(bB){return bB.width}function fd(bB){return bB.height}function pd(bB){return function(){return bB}}function gd(){function bB(CB,zB,TB){var PB=null==zB?+_B.call(this,CB):zB,AB=null==TB?+xB.call(this,CB):TB,OB=+vB.call(this,CB),MB=+kB.call(this,CB),DB=+wB.call(this,CB),RB;if(SB||(SB=RB=Ya()),0>=DB)SB.rect(PB,AB,OB,MB);else{var qB=PB+OB,LB=AB+MB;SB.moveTo(PB+DB,AB),SB.lineTo(qB-DB,AB),SB.quadraticCurveTo(qB,AB,qB,AB+DB),SB.lineTo(qB,LB-DB),SB.quadraticCurveTo(qB,LB,qB-DB,LB),SB.lineTo(PB+DB,LB),SB.quadraticCurveTo(PB,LB,PB,LB-DB),SB.lineTo(PB,AB+DB),SB.quadraticCurveTo(PB,AB,PB+DB,AB),SB.closePath()}return RB?(SB=null,RB+''||null):void 0}var _B=od,xB=ld,vB=sd,kB=fd,wB=pd(0),SB=null;return bB.x=function(CB){return arguments.length?(_B='function'===typeof CB?CB:pd(+CB),bB):_B},bB.y=function(CB){return arguments.length?(xB='function'===typeof CB?CB:pd(+CB),bB):xB},bB.width=function(CB){return arguments.length?(vB='function'===typeof CB?CB:pd(+CB),bB):vB},bB.height=function(CB){return arguments.length?(kB='function'===typeof CB?CB:pd(+CB),bB):kB},bB.cornerRadius=function(CB){return arguments.length?(wB='function'===typeof CB?CB:pd(+CB),bB):wB},bB.context=function(CB){return arguments.length?(SB=null==CB?null:CB,bB):SB},bB}function md(){function bB(PB,AB,OB){var MB=OB/2;if(CB){var DB=TB-AB,qB=PB-zB;if(DB||qB){var LB=Math.sqrt(DB*DB+qB*qB),UB=(DB/=LB)*RB,FB=(qB/=LB)*RB,jB=Math.atan2(qB,DB);SB.moveTo(zB-UB,TB-FB),SB.lineTo(PB-DB*MB,AB-qB*MB),SB.arc(PB,AB,MB,jB-XR,jB),SB.lineTo(zB+UB,TB+FB),SB.arc(zB,TB,RB,jB,jB+XR)}else SB.arc(PB,AB,MB,0,2*XR);SB.closePath()}else CB=1;zB=PB,TB=AB,RB=MB}function _B(PB){var OB=PB.length,DB=!1,AB,MB,qB;for(null==SB&&(SB=qB=Ya()),AB=0;AB<=OB;++AB)!(AB<OB&&wB(MB=PB[AB],AB,PB))===DB&&(DB=!DB)&&(CB=0),DB&&bB(+xB(MB,AB,PB),+vB(MB,AB,PB),+kB(MB,AB,PB));if(qB)return SB=null,qB+''||null}var SB=null,xB,vB,kB,wB,CB,zB,TB,RB;return _B.x=function(PB){return arguments.length?(xB=PB,_B):xB},_B.y=function(PB){return arguments.length?(vB=PB,_B):vB},_B.size=function(PB){return arguments.length?(kB=PB,_B):kB},_B.defined=function(PB){return arguments.length?(wB=PB,_B):wB},_B.context=function(PB){return arguments.length?(SB=null==PB?null:PB,_B):SB},_B}function hd(bB){return bB.x||0}function yd(bB){return bB.y||0}function wd(bB){return bB.cornerRadius||0}function Sd(bB){return!1!==bB.defined}function Ad(bB,_B,xB,vB){return QR.context(bB)(_B,xB,vB)}function qd(bB,_B){return _B.stroke&&0!==_B.opacity&&0!==_B.strokeOpacity&&bB.expand(null==_B.strokeWidth?1:+_B.strokeWidth),bB}function Ld(bB){return nP=bB,Ld}function Ud(){}function Fd(bB,_B){nP.add(bB,_B)}function jd(bB,_B,xB){for(var vB=xB.width(),kB=xB.height(),wB=xB.x1+_B.x1*vB,SB=xB.y1+_B.y1*kB,CB=xB.x1+_B.x2*vB,zB=xB.y1+_B.y2*kB,TB=_B.stops,RB=0,PB=TB.length,AB=bB.createLinearGradient(wB,SB,CB,zB);RB<PB;++RB)AB.addColorStop(TB[RB].offset,TB[RB].color);return AB}function Id(bB,_B,xB){return xB.id?jd(bB,xB,_B.bounds):xB}function $d(bB,_B,xB){return xB*=null==_B.fillOpacity?1:_B.fillOpacity,!!(0<xB)&&(bB.globalAlpha=xB,bB.fillStyle=Id(bB,_B,_B.fill),!0)}function Nd(bB,_B,xB){var vB=null==(vB=_B.strokeWidth)?1:vB;return!(0>=vB)&&(xB*=null==_B.strokeOpacity?1:_B.strokeOpacity,!!(0<xB)&&(bB.globalAlpha=xB,bB.strokeStyle=Id(bB,_B,_B.stroke),bB.lineWidth=vB,bB.lineCap=_B.strokeCap||'butt',bB.lineJoin=_B.strokeJoin||'miter',bB.miterLimit=_B.strokeMiterLimit||10,bB.setLineDash&&(bB.setLineDash(_B.strokeDash||rP),bB.lineDashOffset=_B.strokeDashOffset||0),!0))}function Bd(bB,_B){return bB.zindex-_B.zindex||bB.index-_B.index}function Yd(bB){if(!bB.zdirty)return bB.zitems;var _B=bB.items,xB=[],vB,kB,wB;for(kB=0,wB=_B.length;kB<wB;++kB)vB=_B[kB],vB.index=kB,vB.zindex&&xB.push(vB);return bB.zdirty=!1,bB.zitems=xB.sort(Bd)}function Gd(bB,_B){var xB=bB.items,vB,kB;if(xB&&xB.length){var wB=Yd(bB);if(wB&&wB.length){for(vB=0,kB=xB.length;vB<kB;++vB)xB[vB].zindex||_B(xB[vB]);xB=wB}for(vB=0,kB=xB.length;vB<kB;++vB)_B(xB[vB])}}function Wd(bB,_B){var xB=bB.items,vB,kB;if(!xB||!xB.length)return null;var wB=Yd(bB);for(wB&&wB.length&&(xB=wB),kB=xB.length;0<=--kB;)if(vB=_B(xB[kB]))return vB;if(xB===wB)for(xB=bB.items,kB=xB.length;0<=--kB;)if(!xB[kB].zindex&&(vB=_B(xB[kB])))return vB;return null}function Hd(bB){return function(_B,xB,vB){Gd(xB,function(kB){(!vB||vB.intersects(kB.bounds))&&Vd(bB,_B,kB,kB)})}}function Xd(bB){return function(_B,xB,vB){xB.items.length&&(!vB||vB.intersects(xB.bounds))&&Vd(bB,_B,xB.items[0],xB.items)}}function Vd(bB,_B,xB,vB){var kB=null==xB.opacity?1:xB.opacity;0===kB||bB(_B,vB)||(xB.fill&&$d(_B,xB,kB)&&_B.fill(),xB.stroke&&Nd(_B,xB,kB)&&_B.stroke())}function Jd(bB){return bB||(bB=oP),function(_B,xB,vB,kB,wB,SB){return 1<_B.pixelRatio&&(vB*=_B.pixelRatio,kB*=_B.pixelRatio),Wd(xB,function(CB){var zB=CB.bounds;return(!zB||zB.contains(wB,SB))&&zB?bB(_B,CB,vB,kB,wB,SB)?CB:void 0:void 0})}}function Zd(bB,_B){return function(xB,vB,kB,wB){var SB=Array.isArray(vB)?vB[0]:vB,CB=null==_B?SB.fill:_B,zB=SB.stroke&&xB.isPointInStroke,TB,RB;return zB&&(TB=SB.strokeWidth,RB=SB.strokeCap,xB.lineWidth=null==TB?1:TB,xB.lineCap=null==RB?'butt':RB),!bB(xB,vB)&&(CB&&xB.isPointInPath(kB,wB)||zB&&xB.isPointInStroke(kB,wB))}}function Kd(bB){return Jd(Zd(bB))}function Qd(bB,_B){return'translate('+bB+','+_B+')'}function er(bB){return Qd(bB.x||0,bB.y||0)}function nr(bB,_B){function kB(wB,SB){var CB=SB.x||0,zB=SB.y||0;wB.translate(CB,zB),wB.beginPath(),_B(wB,SB),wB.translate(-CB,-zB)}return{type:bB,tag:'path',nested:!1,attr:function(wB,SB){wB('transform',er(SB)),wB('d',_B(null,SB))},bound:function(wB,SB){return _B(Ld(wB),SB),qd(wB,SB).translate(SB.x||0,SB.y||0)},draw:Hd(kB),pick:Kd(kB)}}function ar(bB,_B){function kB(CB,zB){CB.beginPath(),_B(CB,zB)}var SB=Zd(kB);return{type:bB,tag:'path',nested:!0,attr:function(CB,zB){var TB=zB.mark.items;TB.length&&CB('d',_B(null,TB))},bound:function(CB,zB){var TB=zB.items;return 0===TB.length?CB:(_B(Ld(CB),TB),qd(CB,TB[0]))},draw:Xd(kB),pick:function(CB,zB,TB,RB,PB,AB){var OB=zB.items,MB=zB.bounds;return OB&&OB.length&&(!MB||MB.contains(PB,AB))?(1<CB.pixelRatio&&(TB*=CB.pixelRatio,RB*=CB.pixelRatio),SB(CB,OB,TB,RB)?OB[0]:null):null}}}function ir(bB,_B,xB){var vB=bB._defs,kB=_B.clip_id||(_B.clip_id='clip'+vB.clip_id++),wB=vB.clipping[kB]||(vB.clipping[kB]={id:kB});return wB.width=xB.width||0,wB.height=xB.height||0,'url(#'+kB+')'}function yr(bB,_B,xB){return(!1!==bB.interactive||'group'===bB.marktype)&&bB.bounds&&bB.bounds.contains(_B,xB)}function br(bB,_B){var xB=bB.image;return xB&&xB.url===bB.url||(xB={loaded:!1,width:0,height:0},_B.loadImage(bB.url).then(function(vB){bB.image=vB,bB.image.url=bB.url})),xB}function _r(bB,_B){return'center'===bB?_B/2:'right'===bB?_B:0}function xr(bB,_B){return'middle'===bB?_B/2:'bottom'===bB?_B:0}function Cr(bB,_B){var xB=_B.path;if(null==xB)return!0;var vB=_B.pathCache;vB&&vB.path===xB||((_B.pathCache=vB=Ki(xB)).path=xB),nd(bB,vB,_B.x,_B.y)}function Pr(bB,_B){bB.beginPath(),Ad(bB,_B)}function Mr(bB,_B,xB){var vB,kB,wB,SB;return _B.stroke&&Nd(bB,_B,xB)&&(vB=_B.x||0,kB=_B.y||0,wB=null==_B.x2?vB:_B.x2,SB=null==_B.y2?kB:_B.y2,bB.beginPath(),bB.moveTo(vB,kB),bB.lineTo(wB,SB),!0)}function Lr(bB){return _P=Ir(bB),Ur(Nr(bB))}function Ur(bB){return~~(0.8*bB.length*_P)}function Fr(bB){return bP.font=Yr(bB),jr(Nr(bB))}function jr(bB){return bP.measureText(bB).width}function Ir(bB){return null==bB.fontSize?11:bB.fontSize}function $r(bB){bP=bB?(bP=ja(1,1))?bP.getContext('2d'):null:null,xP.width=bP?Fr:Lr}function Nr(bB){var _B=bB.text;return null==_B?'':0<bB.limit?Br(bB):_B+''}function Br(bB){var _B=+bB.limit,xB=bB.text+'',vB=bP?(bP.font=Yr(bB),jr):(_P=Ir(bB),Ur);if(vB(xB)<_B)return xB;var kB=bB.ellipsis||'\u2026',wB='rtl'===bB.dir,SB=0,CB=xB.length,zB;if(_B-=vB(kB),wB){for(;SB<CB;)zB=SB+CB>>>1,vB(xB.slice(zB))>_B?SB=zB+1:CB=zB;return kB+xB.slice(SB)}for(;SB<CB;)zB=1+(SB+CB>>>1),vB(xB.slice(0,zB))<_B?SB=zB:CB=zB-1;return xB.slice(0,SB)+kB}function Yr(bB,_B){var xB=bB.font;return _B&&xB&&(xB=(xB+'').replace(/\"/g,'\'')),''+(bB.fontStyle?bB.fontStyle+' ':'')+(bB.fontVariant?bB.fontVariant+' ':'')+(bB.fontWeight?bB.fontWeight+' ':'')+Ir(bB)+'px '+(xB||'sans-serif')}function Gr(bB){var _B=bB.baseline,xB=Ir(bB);return Math.round('top'===_B?0.93*xB:'middle'===_B?0.3*xB:'bottom'===_B?-0.21*xB:0)}function Hr(bB,_B,xB){var vB=xP.height(_B),kB=_B.align,wB=_B.radius||0,SB=_B.x||0,CB=_B.y||0,zB=_B.dx||0,TB=(_B.dy||0)+Gr(_B)-Math.round(0.8*vB),RB,PB;return wB&&(PB=(_B.theta||0)-Math.PI/2,SB+=wB*Math.cos(PB),CB+=wB*Math.sin(PB)),RB=xP.width(_B),'center'===kB?zB-=RB/2:'right'===kB&&(zB-=RB),bB.set(zB+=SB,TB+=CB,zB+RB,TB+vB),_B.angle&&!xB&&bB.rotate(_B.angle*Math.PI/180,SB,CB),bB.expand(xB?0:1)}function Jr(bB,_B,xB){var vB=SP[bB.mark.marktype],kB=_B||vB.bound;vB.nested&&(bB=bB.mark);var wB=bB.bounds,SB=bB.bounds_prev||(bB.bounds_prev=new Pa);return wB?(SB.clear().union(wB),wB.clear()):bB.bounds=new Pa,kB(bB.bounds,bB,xB),wB||SB.clear().union(bB.bounds),bB.bounds}function Zr(bB,_B,xB){var vB=SP[bB.marktype],kB=vB.bound,wB=bB.items,SB=wB&&wB.length,CB,zB,TB,RB;if(vB.nested)return TB=SB?wB[0]:(CP.mark=bB,CP),RB=Jr(TB,kB,xB),_B=_B&&_B.union(RB)||RB,_B;if(_B=_B||bB.bounds&&bB.bounds.clear()||new Pa,SB)for(CB=0,zB=wB.length;CB<zB;++CB)_B.union(Jr(wB[CB],kB,xB));return bB.bounds=_B}function Kr(bB,_B){return JSON.stringify(bB,zP,_B)}function Qr(bB){var _B='string'===typeof bB?JSON.parse(bB):bB;return eo(_B)}function eo(bB){var _B=bB.marktype,xB=bB.items,vB,kB,wB;if(xB)for(kB=0,wB=xB.length;kB<wB;++kB)vB=_B?'mark':'group',xB[kB][vB]=bB,xB[kB].zindex&&(xB[kB][vB].zdirty=!0),'group'===(_B||vB)&&eo(xB[kB]);return _B&&Zr(bB),bB}function no(bB){arguments.length?this.root=Qr(bB):(this.root=ao({marktype:'group',name:'root',role:'frame'}),this.root.items=[new Ma(this.root)])}function ao(bB,_B){return{bounds:new Pa,bounds_prev:new Pa,clip:!!bB.clip,group:_B,interactive:!1!==bB.interactive,items:[],marktype:bB.marktype,name:bB.name||void 0,role:bB.role||void 0,zindex:bB.zindex||0}}function io(bB){this._active=null,this._handlers={},this._loader=bB||St()}function ro(bB){this._el=null,this._bgcolor=null,this._loader=new Ia(bB)}function oo(bB,_B){var xB=_B.getBoundingClientRect();return[bB.clientX-xB.left-(_B.clientLeft||0),bB.clientY-xB.top-(_B.clientTop||0)]}function so(bB){io.call(this,bB),this._down=null,this._touch=null,this._first=!0}function fo(bB,_B,xB){return function(vB){var kB=this._active,wB=this.pickEvent(vB);wB===kB?this.fire(bB,vB):((!kB||!kB.exit)&&this.fire(xB,vB),this._active=wB,this.fire(_B,vB),this.fire(bB,vB))}}function co(bB){return function(_B){this.fire(bB,_B),this._active=null}}function uo(bB,_B){var xB=_B.group;bB.save(),bB.beginPath(),bB.rect(0,0,xB.width||0,xB.height||0),bB.clip()}function po(bB,_B,xB,vB){var kB='undefined'!==typeof HTMLElement&&bB instanceof HTMLElement&&null!=bB.parentNode,wB=bB.getContext('2d'),SB=kB?OP:1;return bB.width=_B*SB,bB.height=xB*SB,1!==SB&&(bB.style.width=_B+'px',bB.style.height=xB+'px'),wB.pixelRatio=SB,wB.setTransform(SB,0,0,SB,SB*vB[0],SB*vB[1]),bB}function go(bB){ro.call(this,bB),this._redraw=!1}function mo(bB,_B){var xB=new Pa,vB,kB,wB,SB,CB;for(vB=0,kB=_B.length;vB<kB;++vB)wB=_B[vB],SB=wB.mark,CB=SB.group,wB=SP[SB.marktype].nested?SB:wB,xB.union(ho(wB.bounds,CB)),wB.bounds_prev&&xB.union(ho(wB.bounds_prev,CB));return xB.expand(1).round(),bB.beginPath(),bB.rect(xB.x1,xB.y1,xB.width(),xB.height()),bB.clip(),xB}function ho(bB,_B){if(null==_B)return bB;for(var xB=qP.clear().union(bB);null!=_B;_B=_B.mark.group)xB.translate(_B.x||0,_B.y||0);return xB}function yo(bB){io.call(this,bB);var _B=this;_B._hrefHandler=bo(_B,function(xB,vB){vB&&vB.href&&_B.handleHref(xB,vB,vB.href)}),_B._tooltipHandler=bo(_B,function(xB,vB){vB&&vB.tooltip&&_B.handleTooltip(xB,vB,'mouseover'===xB.type?vB.tooltip:null)})}function bo(bB,_B){return function(xB){var vB=xB.target,kB=vB.__data__;xB.vegaType=xB.type,kB=Array.isArray(kB)?kB[0]:kB,_B.call(bB._obj,xB,kB)}}function _o(bB,_B,xB){var vB='<'+bB,kB,wB;if(_B)for(kB in _B)wB=_B[kB],null!=wB&&(vB+=' '+kB+'="'+wB+'"');return xB&&(vB+=' '+xB),vB+'>'}function xo(bB){return'</'+bB+'>'}function vo(bB){ro.call(this,bB),this._dirtyID=0,this._svg=null,this._root=null,this._defs=null}function ko(bB,_B,xB){var vB,kB,wB;for(bB=La(bB,xB,'linearGradient',IP),bB.setAttribute('id',_B.id),bB.setAttribute('x1',_B.x1),bB.setAttribute('x2',_B.x2),bB.setAttribute('y1',_B.y1),bB.setAttribute('y2',_B.y2),(vB=0,kB=_B.stops.length);vB<kB;++vB)wB=La(bB,vB,'stop',IP),wB.setAttribute('offset',_B.stops[vB].offset),wB.setAttribute('stop-color',_B.stops[vB].color);Ua(bB,vB)}function wo(bB,_B,xB){var vB;bB=La(bB,xB,'clipPath',IP),bB.setAttribute('id',_B.id),vB=La(bB,0,'rect',IP),vB.setAttribute('x',0),vB.setAttribute('y',0),vB.setAttribute('width',_B.width),vB.setAttribute('height',_B.height)}function Eo(bB,_B){for(;bB&&bB.dirty!==_B;bB=bB.mark.group)if(bB.dirty=_B,bB.mark&&bB.mark.dirty!==_B)bB.mark.dirty=_B;else return}function So(bB,_B,xB){_B=_B.lastChild;var kB=0,vB;Gd(xB,function(wB){vB=bB.draw(_B,wB,vB),++kB}),Ua(_B,1+kB)}function Co(bB,_B,xB,vB){var kB=bB._svg,wB;if(!kB&&(wB=_B.ownerDocument,kB=Da(wB,vB,IP),bB._svg=kB,bB.mark&&(kB.__data__=bB,kB.__values__={fill:'default'},'g'===vB))){var SB=Da(wB,'path',IP);SB.setAttribute('class','background'),kB.appendChild(SB),SB.__data__=bB;var CB=Da(wB,'g',IP);kB.appendChild(CB),CB.__data__=bB}return(wB||kB.previousSibling!==xB)&&_B.insertBefore(kB,xB?xB.nextSibling:_B.firstChild),kB}function zo(bB,_B,xB){_B===YP[bB]||(null==_B?xB?BP.removeAttributeNS(xB,bB):BP.removeAttribute(bB):xB?BP.setAttributeNS(xB,bB,_B):BP.setAttribute(bB,_B),YP[bB]=_B)}function To(){return'undefined'===typeof window?'':window.location.href}function Ro(bB){ro.call(this,bB),this._text={head:'',root:'',foot:'',defs:'',body:''},this._defs={clip_id:1,gradient:{},clipping:{}}}function Po(bB,_B,xB,vB){XP[vB||bB]=_B}function Ao(bB,_B,xB,vB){if(null==bB)return'';var TB='',kB,wB,SB,CB,zB;for('bgrect'===xB&&!1===_B.interactive&&(TB+='pointer-events: none;'),'text'===xB&&(TB+='font: '+Yr(bB)+';'),(kB=0,wB=jP.length);kB<wB;++kB)SB=jP[kB],CB=FP[SB],zB=bB[SB],null==zB?'fill'===CB&&(TB+=(TB.length?' ':'')+'fill: none;'):(zB.id&&(vB.gradient[zB.id]=zB,zB='url(#'+zB.id+')'),TB+=(TB.length?' ':'')+CB+': '+zB+';');return TB?'style="'+TB+'"':null}function Oo(bB){return bB.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')}function Mo(bB,_B){return bB=((bB||'')+'').toLowerCase(),1<arguments.length?(eA[bB]=_B,this):eA[bB]}function Do(bB,_B,xB){return!(bB!==_B)||('path'===xB?qo(bB,_B):bB instanceof Date&&_B instanceof Date?+bB===+_B:Ie(bB)&&Ie(_B)?Math.abs(bB-_B)<=tA:bB&&_B&&(Ee(bB)||Ee(_B))?null==bB||null==_B?!1:Lo(bB,_B):bB==_B)}function qo(bB,_B){return Do(Ki(bB),Ki(_B))}function Lo(bB,_B){var xB=Object.keys(bB),vB=Object.keys(_B),kB,wB;if(xB.length!==vB.length)return!1;for(xB.sort(),vB.sort(),wB=xB.length-1;0<=wB;wB--)if(xB[wB]!=vB[wB])return!1;for(wB=xB.length-1;0<=wB;wB--)if(kB=xB[wB],!Do(bB[kB],_B[kB],kB))return!1;return('undefined'===typeof bB?'undefined':babelHelpers.typeof(bB))===('undefined'===typeof _B?'undefined':babelHelpers.typeof(_B))}function Uo(bB){var _B=bB||nT,xB=[],vB={};return xB.add=function(kB){var wB=_B(kB);return vB[wB]||(vB[wB]=1,xB.push(kB)),xB},xB.remove=function(kB){var wB=_B(kB),SB;return vB[wB]&&(vB[wB]=0,0<=(SB=xB.indexOf(kB))&&xB.splice(SB,1)),xB},xB}function Fo(bB){return bB._id}function jo(bB,_B){for(var xB in bB)'_id'!==xB&&(_B[xB]=bB[xB]);return _B}function Io(bB){var _B=bB===Object(bB)?bB:{data:bB};return _B._id||(_B._id=++nA),_B}function $o(bB){return Io(jo(bB,{}))}function No(bB,_B){return jo(bB,_B)}function Bo(bB,_B){return _B._id=bB._id,_B}function Yo(bB){return bB&&bB.constructor===Go}function Go(){var bB=[],_B=[],xB=[],vB=[],kB=[];return{constructor:Go,insert:function(SB){for(var CB=Pe(SB),zB=0,TB=CB.length;zB<TB;++zB)bB.push(CB[zB]);return this},remove:function(SB){for(var CB=Oe(SB)?vB:_B,zB=Pe(SB),TB=0,RB=zB.length;TB<RB;++TB)CB.push(zB[TB]);return this},modify:function(SB,CB,zB){var TB={field:CB,value:Me(zB)};return Oe(SB)?(TB.filter=SB,kB.push(TB)):(TB.tuple=SB,xB.push(TB)),this},encode:function(SB,CB){return xB.push({tuple:SB,field:CB}),this},pulse:function(SB,CB){function zB(qB,LB,UB){UB?qB[LB]=UB(qB):SB.encode=LB,TB[qB._id]=qB}var TB,RB,PB,AB,OB,MB,DB;for(RB=0,PB=bB.length;RB<PB;++RB)SB.add.push(Io(bB[RB]));for(TB={},RB=0,PB=_B.length;RB<PB;++RB)MB=_B[RB],TB[MB._id]=MB;for(RB=0,PB=vB.length;RB<PB;++RB)OB=vB[RB],CB.forEach(function(qB){OB(qB)&&(TB[qB._id]=qB)});for(DB in TB)SB.rem.push(TB[DB]);for(TB={},RB=0,PB=xB.length;RB<PB;++RB)AB=xB[RB],zB(AB.tuple,AB.field,AB.value),SB.modifies(AB.field);for(RB=0,PB=kB.length;RB<PB;++RB)AB=kB[RB],OB=AB.filter,CB.forEach(function(qB){OB(qB)&&zB(qB,AB.field,AB.value)}),SB.modifies(AB.field);for(DB in TB)SB.mod.push(TB[DB]);return SB}}}function Wo(){Object.defineProperty(this,aA,{writable:!0,value:{}})}function Ho(bB,_B,xB,vB){this.id=++dA,this.value=bB,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,_B&&(this._update=_B),xB&&this.parameters(xB,vB)}function Xo(bB){return function(_B){var xB=this.flags;return 0===arguments.length?!!(xB&bB):(this.flags=_B?xB|bB:xB&~bB,this)}}function Zo(bB,_B,xB){this.id=++cA,this.value=null,xB&&(this.receive=xB),bB&&(this._filter=bB),_B&&(this._apply=_B)}function Ko(bB,_B,xB){return new Zo(bB,_B,xB)}function nl(bB,_B,xB,vB,kB,wB){var SB=De({},wB,pA),CB,zB;Oe(xB)||(xB=Me(xB)),vB===void 0?CB=function(RB){bB.touch(xB(RB))}:Oe(vB)?(zB=new Ho(null,vB,kB,!1),CB=function(RB){var PB=xB(RB),AB=(zB.evaluate(RB),zB.value);Yo(AB)?bB.pulse(PB,AB,wB):bB.update(PB,AB,SB)}):CB=function(RB){bB.update(xB(RB),vB,SB)},_B.apply(CB)}function al(bB,_B,xB,vB,kB,wB){var SB,CB;vB===void 0?CB=xB:(SB=Oe(vB)?vB:Me(vB),vB=xB?function(zB,TB){var RB=SB(zB,TB);return xB.skip()?RB:xB.skip(!0).value=RB}:SB,CB=new Ho(null,vB,kB,!1),CB.modified(wB&&wB.force),CB.rank=0,xB&&(CB.skip(!0),CB.value=xB.value,CB.targets().add(xB))),_B.targets().add(CB)}function rl(bB,_B,xB){this.dataflow=bB,this.stamp=null==_B?-1:_B,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=xB||null}function ol(bB,_B){return bB?function(xB,vB){return bB(xB,vB)&&_B(xB,vB)}:_B}function ll(bB,_B){var xB={};return bB.visit(_B,function(vB){xB[vB._id]=1}),function(vB){return xB[vB._id]?null:vB}}function gl(bB){var vB=new Promise(function(kB,wB){_B=kB,xB=wB}),_B,xB;return vB.requests=0,vB.done=function(){0===--vB.requests&&bB.runAfter(function(){bB._pending=null;try{bB.run(),_B(bB)}catch(kB){xB(kB)}})},bB._pending=vB}function yl(bB,_B,xB,vB){var kB=this,wB=0,SB,CB,zB,TB,RB;for(this.dataflow=bB,this.stamp=_B,this.fields=null,this.encode=vB||null,this.pulses=xB,(zB=0,TB=xB.length);zB<TB;++zB)if(SB=xB[zB],SB.stamp===_B){if(SB.fields)for(RB in CB=kB.fields||(kB.fields={}),SB.fields)CB[RB]=1;SB.changed(kB.ADD)&&(wB|=kB.ADD),SB.changed(kB.REM)&&(wB|=kB.REM),SB.changed(kB.MOD)&&(wB|=kB.MOD)}this.changes=wB}function El(bB){this.cmp=bB,this.nodes=[]}function Sl(bB,_B,xB,vB){var kB,wB,SB;for(kB=bB[xB];xB>_B;){if(SB=xB-1>>1,wB=bB[SB],0>vB(kB,wB)){bB[xB]=wB,xB=SB;continue}break}return bB[xB]=kB}function Cl(bB,_B,xB){for(var vB=_B,kB=bB.length,wB=bB[_B],SB=2*_B+1,CB;SB<kB;)CB=SB+1,CB<kB&&0<=xB(bB[SB],bB[CB])&&(SB=CB),bB[_B]=bB[SB],_B=SB,SB=2*_B+1;return bB[_B]=wB,Sl(bB,vB,_B,xB)}function zl(){this._log=Re(),this._clock=0,this._rank=0,this._loader=St(),this._touched=Uo(tT),this._pulses={},this._pulse=null,this._heap=new El(function(bB,_B){return bB.qrank-_B.qrank}),this._postrun=[]}function Tl(bB){return function(){return this._log[bB].apply(this,arguments)}}function Rl(bB,_B){Ho.call(this,bB,null,_B)}function Pl(bB,_B){var xB=bB.type;Al(xB,bB),Ol(xB,_B)}function Al(bB,_B){return bB=bB&&bB.toLowerCase(),1<arguments.length?(OA[bB]=_B,this):OA.hasOwnProperty(bB)?OA[bB]:null}function Ol(bB,_B){return 1<arguments.length?(AA[bB]=_B,this):AA.hasOwnProperty(bB)?AA[bB]:null}function Ml(bB){this._key=bB||'_id',this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null}function Dl(bB,_B){return DA[bB](_B)}function ql(bB){return function(_B){var xB=De({init:'',add:'',rem:'',idx:0},bB);return xB.out=_B||bB.name,xB}}function Ll(bB,_B){return bB.idx-_B.idx}function Ul(bB,_B){function xB(SB,CB){function zB(TB){SB[TB]||xB(SB,SB[TB]=DA[TB]())}return CB.req&&CB.req.forEach(zB),_B&&CB.str&&CB.str.forEach(zB),SB}var vB=bB.reduce(xB,bB.reduce(function(SB,CB){return SB[CB.name]=CB,SB},{})),kB=[],wB;for(wB in vB)kB.push(vB[wB]);return kB.sort(Ll)}function Fl(bB,_B){var vB=Ul(bB,!0),kB='this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;',wB='if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;',SB='if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;',CB='var t = this.tuple; var cell = this.cell;';return vB.forEach(function(zB){0>zB.idx?(kB=zB.init+kB,wB=zB.add+wB,SB=zB.rem+SB):(kB+=zB.init,wB+=zB.add,SB+=zB.rem)}),bB.slice().sort(Ll).forEach(function(zB){CB+='t[\''+zB.out+'\']='+zB.set+';'}),CB+='return t;',kB=Function('cell','t',kB),kB.prototype.add=Function('v','t',wB),kB.prototype.rem=Function('v','t',SB),kB.prototype.set=Function(CB),kB.prototype.get=_B||nT,kB.fields=bB.map(function(zB){return zB.out}),kB}function jl(bB){Rl.call(this,null,bB),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function Il(bB,_B,xB){return xB||bB+(_B?'_'+_B:'')}function $l(bB){var _B=this._dims,xB=_B.length,kB=_B[0](bB)+'',vB;for(vB=1;vB<xB;++vB)kB+='|'+_B[vB](bB);return kB}function Nl(bB){Rl.call(this,null,bB)}function Bl(bB){Rl.call(this,[],bB)}function Yl(bB){Ho.call(this,null,Gl,bB)}function Gl(bB){return this.value&&!bB.modified()?this.value:Ae(bB.fields,bB.orders)}function Wl(bB){Rl.call(this,null,bB)}function Hl(bB,_B,xB){return'upper'===_B?bB=bB.toUpperCase():'lower'===_B?bB=bB.toLowerCase():void 0,bB.match(xB)}function Xl(bB){Rl.call(this,null,bB)}function Vl(bB,_B,xB,vB){for(var kB=[],wB={},SB=bB.length,CB=0,zB,TB;CB<SB;++CB)for(wB[_B]=TB=bB[CB],zB=0;zB<SB;++zB)wB[xB]=bB[zB],vB(wB)&&(kB.push(Io(wB)),wB={},wB[_B]=TB);return kB}function Jl(bB,_B){var xB=bB[NA];IA.hasOwnProperty(xB)||ke('Unknown distribution function: '+xB);var vB=IA[xB]();for(var kB in bB)kB===BA?vB.data((bB.from||_B()).map(bB[kB])):kB===$A?vB[kB](bB[kB].map(function(wB){return Jl(wB,_B)})):babelHelpers.typeof(vB[kB])===NA&&vB[kB](bB[kB]);return vB}function Zl(bB){Rl.call(this,null,bB)}function Kl(bB){return function(){return bB.materialize(bB.SOURCE).source}}function Ql(bB){Rl.call(this,[+Infinity,-Infinity],bB)}function es(bB,_B){Ho.call(this,bB),this.parent=_B}function is(bB){Rl.call(this,{},bB),this._keys=Le();var _B=this._targets=[];_B.active=0,_B.forEach=function(xB){for(var vB=0,kB=_B.active;vB<kB;++vB)xB(_B[vB],vB,_B)}}function rs(bB){Ho.call(this,null,os,bB)}function os(bB){return this.value&&!bB.modified()?this.value:Qz(bB.name)?Pe(bB.name).map(function(_B){return ze(_B)}):ze(bB.name,bB.as)}function ls(bB){Rl.call(this,Le(),bB)}function cs(bB){Rl.call(this,{},bB)}function us(bB){return bB.fields.join('|')}function ps(bB){Rl.call(this,null,bB)}function gs(bB){Rl.call(this,[],bB)}function ms(bB){Rl.call(this,[],bB)}function hs(bB){var _B=bB.method||KA.value,xB;return null==KA[_B]?void ke('Unrecognized imputation method: '+_B):_B===KA.value?(xB=void 0===bB.value?0:bB.value,function(){return xB}):KA[_B]}function ys(bB){var _B=bB.field;return function(xB){return xB?_B(xB):NaN}}function _s(bB,_B,xB){var vB=function(UB){return UB(qB)},kB=[],wB=[],SB={},TB={},CB,zB,RB,PB,AB,OB,MB,DB,qB;for(OB=0,DB=bB.length;OB<DB;++OB)qB=bB[OB],zB=(CB=xB.map(vB))+'',MB=SB[zB]||(SB[zB]=wB.push(CB)),PB=(RB=_B?_B.map(vB):QA)+'',(AB=TB[PB])||(AB=TB[PB]=[],kB.push(AB),AB.values=RB),AB[MB-1]=qB;return kB.domain=wB,kB}function xs(bB){Ho.call(this,null,vs,bB)}function vs(bB){return this.value&&!bB.modified()?this.value:Ne(bB.fields)}function ks(bB){Rl.call(this,{},bB)}function ws(bB){Ho.call(this,null,Es,bB)}function Es(bB){if(this.value&&!bB.modified())return this.value;var _B=+Infinity,xB=-Infinity,vB=bB.extents,kB,wB,SB;for(kB=0,wB=vB.length;kB<wB;++kB)SB=vB[kB],SB[0]<_B&&(_B=SB[0]),SB[1]>xB&&(xB=SB[1]);return[_B,xB]}function Ss(bB){Ho.call(this,null,Cs,bB)}function Cs(bB){return this.value&&!bB.modified()?this.value:bB.values.reduce(function(_B,xB){return _B.concat(xB)},[])}function zs(bB){Rl.call(this,null,bB)}function Ts(bB){is.call(this,bB)}function Rs(bB){Rl.call(this,null,bB)}function Ps(bB){Rl.call(this,null,bB)}function As(bB){Rl.call(this,null,bB)}function Os(bB){Rl.call(this,[],bB),this.count=0}function Ms(bB){Rl.call(this,null,bB)}function Ds(bB){Rl.call(this,null,bB),this.modified(!0)}function qs(bB){Rl.call(this,Le(),bB)}function Ls(bB){Rl.call(this,null,bB)}function Us(bB){return function(_B){var xB=_B[0],vB=_B[1],kB;return vB<xB&&(kB=xB,xB=vB,vB=kB),[bB.invert(xB),bB.invert(vB)]}}function Fs(bB){return function(_B){var xB=bB.range(),vB=_B[0],kB=_B[1],wB=-1,SB,CB,zB,TB;for(kB<vB&&(CB=vB,vB=kB,kB=CB),zB=0,TB=xB.length;zB<TB;++zB)xB[zB]>=vB&&xB[zB]<=kB&&(0>wB&&(wB=zB),SB=zB);if(!(0>wB))return vB=bB.invertExtent(xB[wB]),kB=bB.invertExtent(xB[SB]),[void 0===vB[0]?vB[1]:vB[0],void 0===kB[1]?kB[0]:kB[1]]}}function js(bB,_B,xB){var vB=bB-_B+2*xB;return bB?0<vB?vB:1:0}function Is(bB){function _B(wB){var SB=wB+'',CB=xB.get(SB);if(!CB){if(kB!==AO)return kB;xB.set(SB,CB=vB.push(wB))}return bB[(CB-1)%bB.length]}var xB=tt(),vB=[],kB=AO;return bB=null==bB?[]:PO.call(bB),_B.domain=function(wB){if(!arguments.length)return vB.slice();vB=[],xB=tt();for(var SB=-1,CB=wB.length,zB,TB;++SB<CB;)xB.has(TB=(zB=wB[SB])+'')||xB.set(TB,vB.push(zB));return _B},_B.range=function(wB){return arguments.length?(bB=PO.call(wB),_B):bB.slice()},_B.unknown=function(wB){return arguments.length?(kB=wB,_B):kB},_B.copy=function(){return Is().domain(vB).range(bB).unknown(kB)},_B}function $s(bB,_B,xB){bB.prototype=_B.prototype=xB,xB.constructor=bB}function Ns(bB,_B){var xB=Object.create(bB.prototype);for(var vB in _B)xB[vB]=_B[vB];return xB}function Bs(){}function Ys(bB){var _B;return bB=(bB+'').trim().toLowerCase(),(_B=UO.exec(bB))?(_B=parseInt(_B[1],16),new Vs(15&_B>>8|240&_B>>4,15&_B>>4|240&_B,(15&_B)<<4|15&_B,1)):(_B=FO.exec(bB))?Gs(parseInt(_B[1],16)):(_B=jO.exec(bB))?new Vs(_B[1],_B[2],_B[3],1):(_B=IO.exec(bB))?new Vs(255*_B[1]/100,255*_B[2]/100,255*_B[3]/100,1):(_B=$O.exec(bB))?Ws(_B[1],_B[2],_B[3],_B[4]):(_B=NO.exec(bB))?Ws(255*_B[1]/100,255*_B[2]/100,255*_B[3]/100,_B[4]):(_B=BO.exec(bB))?Js(_B[1],_B[2]/100,_B[3]/100,1):(_B=YO.exec(bB))?Js(_B[1],_B[2]/100,_B[3]/100,_B[4]):GO.hasOwnProperty(bB)?Gs(GO[bB]):'transparent'===bB?new Vs(NaN,NaN,NaN,0):null}function Gs(bB){return new Vs(255&bB>>16,255&bB>>8,255&bB,1)}function Ws(bB,_B,xB,vB){return 0>=vB&&(bB=_B=xB=NaN),new Vs(bB,_B,xB,vB)}function Hs(bB){return(bB instanceof Bs||(bB=Ys(bB)),!bB)?new Vs:(bB=bB.rgb(),new Vs(bB.r,bB.g,bB.b,bB.opacity))}function Xs(bB,_B,xB,vB){return 1===arguments.length?Hs(bB):new Vs(bB,_B,xB,null==vB?1:vB)}function Vs(bB,_B,xB,vB){this.r=+bB,this.g=+_B,this.b=+xB,this.opacity=+vB}function Js(bB,_B,xB,vB){return 0>=vB?bB=_B=xB=NaN:0>=xB||1<=xB?bB=_B=NaN:0>=_B&&(bB=NaN),new Qs(bB,_B,xB,vB)}function Zs(bB){if(bB instanceof Qs)return new Qs(bB.h,bB.s,bB.l,bB.opacity);if(bB instanceof Bs||(bB=Ys(bB)),!bB)return new Qs;if(bB instanceof Qs)return bB;bB=bB.rgb();var _B=bB.r/255,xB=bB.g/255,vB=bB.b/255,kB=Math.min(_B,xB,vB),wB=Math.max(_B,xB,vB),SB=NaN,CB=wB-kB,zB=(wB+kB)/2;return CB?(SB=_B===wB?(xB-vB)/CB+6*(xB<vB):xB===wB?(vB-_B)/CB+2:(_B-xB)/CB+4,CB/=0.5>zB?wB+kB:2-wB-kB,SB*=60):CB=0<zB&&1>zB?0:SB,new Qs(SB,CB,zB,bB.opacity)}function Ks(bB,_B,xB,vB){return 1===arguments.length?Zs(bB):new Qs(bB,_B,xB,null==vB?1:vB)}function Qs(bB,_B,xB,vB){this.h=+bB,this.s=+_B,this.l=+xB,this.opacity=+vB}function ef(bB,_B,xB){return 255*(60>bB?_B+(xB-_B)*bB/60:180>bB?xB:240>bB?_B+(xB-_B)*(240-bB)/60:_B)}function tf(bB){if(bB instanceof af)return new af(bB.l,bB.a,bB.b,bB.opacity);if(bB instanceof pf){var _B=bB.h*WO;return new af(bB.l,Math.cos(_B)*bB.c,Math.sin(_B)*bB.c,bB.opacity)}bB instanceof Vs||(bB=Hs(bB));var xB=ff(bB.r),vB=ff(bB.g),kB=ff(bB.b),wB=rf((0.4124564*xB+0.3575761*vB+0.1804375*kB)/VO),SB=rf((0.2126729*xB+0.7151522*vB+0.072175*kB)/JO),CB=rf((0.0193339*xB+0.119192*vB+0.9503041*kB)/ZO);return new af(116*SB-16,500*(wB-SB),200*(SB-CB),bB.opacity)}function nf(bB,_B,xB,vB){return 1===arguments.length?tf(bB):new af(bB,_B,xB,null==vB?1:vB)}function af(bB,_B,xB,vB){this.l=+bB,this.a=+_B,this.b=+xB,this.opacity=+vB}function rf(bB){return bB>tM?Math.pow(bB,1/3):bB/eM+KO}function of(bB){return bB>QO?bB*bB*bB:eM*(bB-KO)}function lf(bB){return 255*(0.0031308>=bB?12.92*bB:1.055*Math.pow(bB,1/2.4)-0.055)}function ff(bB){return 0.04045>=(bB/=255)?bB/12.92:Math.pow((bB+0.055)/1.055,2.4)}function cf(bB){if(bB instanceof pf)return new pf(bB.h,bB.c,bB.l,bB.opacity);bB instanceof af||(bB=tf(bB));var _B=Math.atan2(bB.b,bB.a)*HO;return new pf(0>_B?_B+360:_B,Math.sqrt(bB.a*bB.a+bB.b*bB.b),bB.l,bB.opacity)}function uf(bB,_B,xB,vB){return 1===arguments.length?cf(bB):new pf(bB,_B,xB,null==vB?1:vB)}function pf(bB,_B,xB,vB){this.h=+bB,this.c=+_B,this.l=+xB,this.opacity=+vB}function mf(bB){if(bB instanceof yf)return new yf(bB.h,bB.s,bB.l,bB.opacity);bB instanceof Vs||(bB=Hs(bB));var _B=bB.r/255,xB=bB.g/255,vB=bB.b/255,kB=(sM*vB+oM*_B-lM*xB)/(sM+oM-lM),wB=vB-kB,SB=(rM*(xB-kB)-iM*wB)/dM,CB=Math.sqrt(SB*SB+wB*wB)/(rM*kB*(1-kB)),zB=CB?Math.atan2(SB,wB)*HO-120:NaN;return new yf(0>zB?zB+360:zB,CB,kB,bB.opacity)}function hf(bB,_B,xB,vB){return 1===arguments.length?mf(bB):new yf(bB,_B,xB,null==vB?1:vB)}function yf(bB,_B,xB,vB){this.h=+bB,this.s=+_B,this.l=+xB,this.opacity=+vB}function _f(bB,_B,xB,vB,kB){var wB=bB*bB,SB=wB*bB;return((1-3*bB+3*wB-SB)*_B+(4-6*wB+3*SB)*xB+(1+3*bB+3*wB-3*SB)*vB+SB*kB)/6}function xf(bB){var _B=bB.length-1;return function(xB){var vB=0>=xB?xB=0:1<=xB?(xB=1,_B-1):Math.floor(xB*_B),kB=bB[vB],wB=bB[vB+1],SB=0<vB?bB[vB-1]:2*kB-wB,CB=vB<_B-1?bB[vB+2]:2*wB-kB;return _f((xB-vB/_B)*_B,SB,kB,wB,CB)}}function vf(bB){var _B=bB.length;return function(xB){var vB=Math.floor((0>(xB%=1)?++xB:xB)*_B),kB=bB[(vB+_B-1)%_B],wB=bB[vB%_B],SB=bB[(vB+1)%_B],CB=bB[(vB+2)%_B];return _f((xB-vB/_B)*_B,kB,wB,SB,CB)}}function kf(bB){return function(){return bB}}function wf(bB,_B){return function(xB){return bB+xB*_B}}function Ef(bB,_B,xB){return bB=Math.pow(bB,xB),_B=Math.pow(_B,xB)-bB,xB=1/xB,function(vB){return Math.pow(bB+vB*_B,xB)}}function Sf(bB,_B){var xB=_B-bB;return xB?wf(bB,180<xB||-180>xB?xB-360*Math.round(xB/360):xB):kf(isNaN(bB)?_B:bB)}function Cf(bB){return 1===(bB=+bB)?zf:function(_B,xB){return xB-_B?Ef(_B,xB,bB):kf(isNaN(_B)?xB:_B)}}function zf(bB,_B){var xB=_B-bB;return xB?wf(bB,xB):kf(isNaN(bB)?_B:bB)}function Tf(bB){return function(_B){var xB=_B.length,vB=Array(xB),kB=Array(xB),wB=Array(xB),SB,CB;for(SB=0;SB<xB;++SB)CB=Xs(_B[SB]),vB[SB]=CB.r||0,kB[SB]=CB.g||0,wB[SB]=CB.b||0;return vB=bB(vB),kB=bB(kB),wB=bB(wB),CB.opacity=1,function(zB){return CB.r=vB(zB),CB.g=kB(zB),CB.b=wB(zB),CB+''}}}function Rf(bB,_B){var xB=_B?_B.length:0,vB=bB?Math.min(xB,bB.length):0,kB=Array(xB),wB=Array(xB),SB;for(SB=0;SB<vB;++SB)kB[SB]=Lf(bB[SB],_B[SB]);for(;SB<xB;++SB)wB[SB]=_B[SB];return function(CB){for(SB=0;SB<vB;++SB)wB[SB]=kB[SB](CB);return wB}}function Pf(bB,_B){var xB=new Date;return bB=+bB,_B-=bB,function(vB){return xB.setTime(bB+_B*vB),xB}}function Af(bB,_B){return bB=+bB,_B-=bB,function(xB){return bB+_B*xB}}function Of(bB,_B){var xB={},vB={},kB;for(kB in(null===bB||'object'!==('undefined'===typeof bB?'undefined':babelHelpers.typeof(bB)))&&(bB={}),(null===_B||'object'!==('undefined'===typeof _B?'undefined':babelHelpers.typeof(_B)))&&(_B={}),_B)kB in bB?xB[kB]=Lf(bB[kB],_B[kB]):vB[kB]=_B[kB];return function(wB){for(kB in xB)vB[kB]=xB[kB](wB);return vB}}function Mf(bB){return function(){return bB}}function Df(bB){return function(_B){return bB(_B)+''}}function qf(bB,_B){var xB=pM.lastIndex=gM.lastIndex=0,SB=-1,CB=[],zB=[],vB,kB,wB;for(bB+='',_B+='';(vB=pM.exec(bB))&&(kB=gM.exec(_B));)(wB=kB.index)>xB&&(wB=_B.slice(xB,wB),CB[SB]?CB[SB]+=wB:CB[++SB]=wB),(vB=vB[0])===(kB=kB[0])?CB[SB]?CB[SB]+=kB:CB[++SB]=kB:(CB[++SB]=null,zB.push({i:SB,x:Af(vB,kB)})),xB=gM.lastIndex;return xB<_B.length&&(wB=_B.slice(xB),CB[SB]?CB[SB]+=wB:CB[++SB]=wB),2>CB.length?zB[0]?Df(zB[0].x):Mf(_B):(_B=zB.length,function(TB){for(var RB=0,PB;RB<_B;++RB)CB[(PB=zB[RB]).i]=PB.x(TB);return CB.join('')})}function Lf(bB,_B){var xB='undefined'===typeof _B?'undefined':babelHelpers.typeof(_B),vB;return null==_B||'boolean'===xB?kf(_B):('number'===xB?Af:'string'===xB?(vB=Ys(_B))?(_B=vB,fM):qf:_B instanceof Ys?fM:_B instanceof Date?Pf:Array.isArray(_B)?Rf:isNaN(_B)?Of:Af)(bB,_B)}function Uf(bB,_B){return bB=+bB,_B-=bB,function(xB){return Math.round(bB+_B*xB)}}function Ff(bB,_B,xB,vB,kB,wB){var SB,CB,zB;return(SB=Math.sqrt(bB*bB+_B*_B))&&(bB/=SB,_B/=SB),(zB=bB*xB+_B*vB)&&(xB-=bB*zB,vB-=_B*zB),(CB=Math.sqrt(xB*xB+vB*vB))&&(xB/=CB,vB/=CB,zB/=CB),bB*vB<_B*xB&&(bB=-bB,_B=-_B,zB=-zB,SB=-SB),{translateX:kB,translateY:wB,rotate:Math.atan2(_B,bB)*mM,skewX:Math.atan(zB)*mM,scaleX:SB,scaleY:CB}}function $f(bB,_B,xB,vB){function kB(TB){return TB.length?TB.pop()+' ':''}function wB(TB,RB,PB,AB,OB,MB){if(TB!==PB||RB!==AB){var DB=OB.push('translate(',null,_B,null,xB);MB.push({i:DB-4,x:Af(TB,PB)},{i:DB-2,x:Af(RB,AB)})}else(PB||AB)&&OB.push('translate('+PB+_B+AB+xB)}function SB(TB,RB,PB,AB){TB===RB?RB&&PB.push(kB(PB)+'rotate('+RB+vB):(180<TB-RB?RB+=360:180<RB-TB&&(TB+=360),AB.push({i:PB.push(kB(PB)+'rotate(',null,vB)-2,x:Af(TB,RB)}))}function CB(TB,RB,PB,AB){TB===RB?RB&&PB.push(kB(PB)+'skewX('+RB+vB):AB.push({i:PB.push(kB(PB)+'skewX(',null,vB)-2,x:Af(TB,RB)})}function zB(TB,RB,PB,AB,OB,MB){if(TB!==PB||RB!==AB){var DB=OB.push(kB(OB)+'scale(',null,',',null,')');MB.push({i:DB-4,x:Af(TB,PB)},{i:DB-2,x:Af(RB,AB)})}else(1!==PB||1!==AB)&&OB.push(kB(OB)+'scale('+PB+','+AB+')')}return function(TB,RB){var PB=[],AB=[];return TB=bB(TB),RB=bB(RB),wB(TB.translateX,TB.translateY,RB.translateX,RB.translateY,PB,AB),SB(TB.rotate,RB.rotate,PB,AB),CB(TB.skewX,RB.skewX,PB,AB),zB(TB.scaleX,TB.scaleY,RB.scaleX,RB.scaleY,PB,AB),TB=RB=null,function(OB){for(var MB=-1,DB=AB.length,qB;++MB<DB;)PB[(qB=AB[MB]).i]=qB.x(OB);return PB.join('')}}}function Nf(bB){return((bB=Math.exp(bB))+1/bB)/2}function Bf(bB){return((bB=Math.exp(bB))-1/bB)/2}function Yf(bB){return((bB=Math.exp(2*bB))-1)/(bB+1)}function Wf(bB){return function(_B,xB){var vB=bB((_B=Ks(_B)).h,(xB=Ks(xB)).h),kB=zf(_B.s,xB.s),wB=zf(_B.l,xB.l),SB=zf(_B.opacity,xB.opacity);return function(CB){return _B.h=vB(CB),_B.s=kB(CB),_B.l=wB(CB),_B.opacity=SB(CB),_B+''}}}function Xf(bB){return function(_B,xB){var vB=bB((_B=uf(_B)).h,(xB=uf(xB)).h),kB=zf(_B.c,xB.c),wB=zf(_B.l,xB.l),SB=zf(_B.opacity,xB.opacity);return function(CB){return _B.h=vB(CB),_B.c=kB(CB),_B.l=wB(CB),_B.opacity=SB(CB),_B+''}}}function Vf(bB){return function _B(xB){function vB(kB,wB){var SB=bB((kB=hf(kB)).h,(wB=hf(wB)).h),CB=zf(kB.s,wB.s),zB=zf(kB.l,wB.l),TB=zf(kB.opacity,wB.opacity);return function(RB){return kB.h=SB(RB),kB.s=CB(RB),kB.l=zB(Math.pow(RB,xB)),kB.opacity=TB(RB),kB+''}}return xB=+xB,vB.gamma=_B,vB}(1)}function Zf(bB){return function(){return bB}}function Kf(bB){return+bB}function Qf(bB,_B){return(_B-=bB=+bB)?function(xB){return(xB-bB)/_B}:Zf(_B)}function ec(bB){return function(_B,xB){var vB=bB(_B=+_B,xB=+xB);return function(kB){return kB<=_B?0:kB>=xB?1:vB(kB)}}}function nc(bB){return function(_B,xB){var vB=bB(_B=+_B,xB=+xB);return function(kB){return 0>=kB?_B:1<=kB?xB:vB(kB)}}}function ac(bB,_B,xB,vB){var kB=bB[0],wB=bB[1],SB=_B[0],CB=_B[1];return wB<kB?(kB=xB(wB,kB),SB=vB(CB,SB)):(kB=xB(kB,wB),SB=vB(SB,CB)),function(zB){return SB(kB(zB))}}function ic(bB,_B,xB,vB){var kB=Math.min(bB.length,_B.length)-1,wB=Array(kB),SB=Array(kB),CB=-1;for(bB[kB]<bB[0]&&(bB=bB.slice().reverse(),_B=_B.slice().reverse());++CB<kB;)wB[CB]=xB(bB[CB],bB[CB+1]),SB[CB]=vB(_B[CB],_B[CB+1]);return function(zB){var TB=Xz(bB,zB,1,kB)-1;return SB[TB](wB[TB](zB))}}function fc(bB,_B){return _B.domain(bB.domain()).range(bB.range()).interpolate(bB.interpolate()).clamp(bB.clamp())}function uc(bB,_B){function xB(){return zB=2<Math.min(kB.length,wB.length)?ic:ac,TB=RB=null,vB}function vB(PB){return(TB||(TB=zB(kB,wB,CB?ec(bB):bB,SB)))(+PB)}var kB=DM,wB=DM,SB=Lf,CB=!1,zB,TB,RB;return vB.invert=function(PB){return(RB||(RB=zB(wB,kB,Qf,CB?nc(_B):_B)))(+PB)},vB.domain=function(PB){return arguments.length?(kB=RO.call(PB,Kf),xB()):kB.slice()},vB.range=function(PB){return arguments.length?(wB=PO.call(PB),xB()):wB.slice()},vB.rangeRound=function(PB){return wB=PO.call(PB),SB=Uf,xB()},vB.clamp=function(PB){return arguments.length?(CB=!!PB,xB()):CB},vB.interpolate=function(PB){return arguments.length?(SB=PB,xB()):SB},xB()}function pc(bB,_B){if(0>(xB=(bB=_B?bB.toExponential(_B-1):bB.toExponential()).indexOf('e')))return null;var vB=bB.slice(0,xB),xB;return[1<vB.length?vB[0]+vB.slice(2):vB,+bB.slice(xB+1)]}function gc(bB){return bB=pc(Math.abs(bB)),bB?bB[1]:NaN}function mc(bB,_B){return function(xB,vB){for(var kB=xB.length,wB=[],SB=0,CB=bB[0],zB=0;0<kB&&0<CB&&(zB+CB+1>vB&&(CB=Math.max(1,vB-zB)),wB.push(xB.substring(kB-=CB,kB+CB)),!((zB+=CB+1)>vB));)CB=bB[SB=(SB+1)%bB.length];return wB.reverse().join(_B)}}function bc(bB){return function(_B){return _B.replace(/[0-9]/g,function(xB){return bB[+xB]})}}function wc(bB,_B){var xB=pc(bB,_B);if(!xB)return bB+'';var vB=xB[0],kB=xB[1];return 0>kB?'0.'+Array(-kB).join('0')+vB:vB.length>kB+1?vB.slice(0,kB+1)+'.'+vB.slice(kB+1):vB+Array(kB-vB.length+2).join('0')}function Ec(bB){return new Sc(bB)}function Sc(bB){if(!(_B=UM.exec(bB)))throw new Error('invalid format: '+bB);var xB=_B[1]||' ',vB=_B[2]||'>',kB=_B[3]||'-',wB=_B[4]||'',SB=!!_B[5],CB=_B[6]&&+_B[6],zB=!!_B[7],TB=_B[8]&&+_B[8].slice(1),RB=_B[9]||'',_B;'n'===RB?(zB=!0,RB='g'):!LM[RB]&&(RB=''),(SB||'0'===xB&&'='===vB)&&(SB=!0,xB='0',vB='='),this.fill=xB,this.align=vB,this.sign=kB,this.symbol=wB,this.zero=SB,this.width=CB,this.comma=zB,this.precision=TB,this.type=RB}function Cc(bB){return bB}function zc(bB){function _B(zB){function TB(NB){var BB=FB,YB=jB,GB,WB,HB;if('c'===UB)YB=IB(NB)+YB,NB='';else{NB=+NB;var XB=0>NB;if(NB=IB(Math.abs(NB),LB),XB&&0===+NB&&(XB=!1),BB=(XB?'('===AB?AB:'-':'-'===AB||'('===AB?'':AB)+BB,YB=YB+('s'===UB?FM[8+qM/3]:'')+(XB&&'('===AB?')':''),$B)for(GB=-1,WB=NB.length;++GB<WB;)if(HB=NB.charCodeAt(GB),48>HB||57<HB){YB=(46===HB?wB+NB.slice(GB+1):NB.slice(GB))+YB,NB=NB.slice(0,GB);break}}qB&&!MB&&(NB=vB(NB,Infinity));var VB=BB.length+NB.length+YB.length,JB=VB<DB?Array(DB-VB+1).join(RB):'';switch(qB&&MB&&(NB=vB(JB+NB,JB.length?DB-YB.length:Infinity),JB=''),PB){case'<':NB=BB+NB+YB+JB;break;case'=':NB=BB+JB+NB+YB;break;case'^':NB=JB.slice(0,VB=JB.length>>1)+BB+NB+YB+JB.slice(VB);break;default:NB=JB+BB+NB+YB;}return SB(NB)}zB=Ec(zB);var RB=zB.fill,PB=zB.align,AB=zB.sign,OB=zB.symbol,MB=zB.zero,DB=zB.width,qB=zB.comma,LB=zB.precision,UB=zB.type,FB='$'===OB?kB[0]:'#'===OB&&/[boxX]/.test(UB)?'0'+UB.toLowerCase():'',jB='$'===OB?kB[1]:/[%p]/.test(UB)?CB:'',IB=LM[UB],$B=!UB||/[defgprs%]/.test(UB);return LB=null==LB?UB?6:12:/[gprs]/.test(UB)?Math.max(1,Math.min(21,LB)):Math.max(0,Math.min(20,LB)),TB.toString=function(){return zB+''},TB}var vB=bB.grouping&&bB.thousands?mc(bB.grouping,bB.thousands):Cc,kB=bB.currency,wB=bB.decimal,SB=bB.numerals?bc(bB.numerals):Cc,CB=bB.percent||'%';return{format:_B,formatPrefix:function(zB,TB){var RB=_B((zB=Ec(zB),zB.type='f',zB)),PB=3*Math.max(-8,Math.min(8,Math.floor(gc(TB)/3))),AB=Math.pow(10,-PB),OB=FM[8+PB/3];return function(MB){return RB(AB*MB)+OB}}}}function Tc(bB){return jM=zc(bB),IM=jM.format,$M=jM.formatPrefix,jM}function Rc(bB){return Math.max(0,-gc(Math.abs(bB)))}function Pc(bB,_B){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(gc(_B)/3)))-gc(Math.abs(bB)))}function Ac(bB,_B){return bB=Math.abs(bB),_B=Math.abs(_B)-bB,Math.max(0,gc(_B)-gc(bB))+1}function Oc(bB,_B,xB){var vB=bB[0],kB=bB[bB.length-1],wB=ee(vB,kB,null==_B?10:_B),SB;switch(xB=Ec(null==xB?',f':xB),xB.type){case's':{var CB=Math.max(Math.abs(vB),Math.abs(kB));return null!=xB.precision||isNaN(SB=Pc(wB,CB))||(xB.precision=SB),$M(xB,CB)}case'':case'e':case'g':case'p':case'r':{null!=xB.precision||isNaN(SB=Ac(wB,Math.max(Math.abs(vB),Math.abs(kB))))||(xB.precision=SB-('e'===xB.type));break}case'f':case'%':{null!=xB.precision||isNaN(SB=Rc(wB))||(xB.precision=SB-2*('%'===xB.type));break}}return IM(xB)}function Mc(bB){var _B=bB.domain;return bB.ticks=function(xB){var vB=_B();return K(vB[0],vB[vB.length-1],null==xB?10:xB)},bB.tickFormat=function(xB,vB){return Oc(_B(),xB,vB)},bB.nice=function(xB){var vB=_B(),kB=vB.length-1,wB=null==xB?10:xB,SB=vB[0],CB=vB[kB],zB=ee(SB,CB,wB);return zB&&(zB=ee(Math.floor(SB/zB)*zB,Math.ceil(CB/zB)*zB,wB),vB[0]=Math.floor(SB/zB)*zB,vB[kB]=Math.ceil(CB/zB)*zB,_B(vB)),bB},bB}function Dc(){var bB=uc(Qf,Af);return bB.copy=function(){return fc(bB,Dc())},Mc(bB)}function qc(){function bB(xB){return+xB}var _B=[0,1];return bB.invert=bB,bB.domain=bB.range=function(xB){return arguments.length?(_B=RO.call(xB,Kf),bB):_B.slice()},bB.copy=function(){return qc().domain(_B)},Mc(bB)}function Lc(bB,_B){bB=bB.slice();var xB=0,vB=bB.length-1,kB=bB[xB],wB=bB[vB],SB;return wB<kB&&(SB=xB,xB=vB,vB=SB,SB=kB,kB=wB,wB=SB),bB[xB]=_B.floor(kB),bB[vB]=_B.ceil(wB),bB}function Uc(bB,_B){return(_B=Math.log(_B/bB))?function(xB){return Math.log(xB/bB)/_B}:Zf(_B)}function Fc(bB,_B){return 0>bB?function(xB){return-Math.pow(-_B,xB)*Math.pow(-bB,1-xB)}:function(xB){return Math.pow(_B,xB)*Math.pow(bB,1-xB)}}function jc(bB){return isFinite(bB)?+('1e'+bB):0>bB?0:bB}function Ic(bB){return 10===bB?jc:bB===Math.E?Math.exp:function(_B){return Math.pow(bB,_B)}}function $c(bB){return bB===Math.E?Math.log:10===bB&&Math.log10||2===bB&&Math.log2||(bB=Math.log(bB),function(_B){return Math.log(_B)/bB})}function Nc(bB){return function(_B){return-bB(-_B)}}function Bc(){function bB(){return kB=$c(vB),wB=Ic(vB),0>xB()[0]&&(kB=Nc(kB),wB=Nc(wB)),_B}var _B=uc(Uc,Fc).domain([1,10]),xB=_B.domain,vB=10,kB=$c(10),wB=Ic(10);return _B.base=function(SB){return arguments.length?(vB=+SB,bB()):vB},_B.domain=function(SB){return arguments.length?(xB(SB),bB()):xB()},_B.ticks=function(SB){var CB=xB(),zB=CB[0],TB=CB[CB.length-1],RB;(RB=TB<zB)&&(PB=zB,zB=TB,TB=PB);var PB=kB(zB),AB=kB(TB),qB=null==SB?10:+SB,LB=[],OB,MB,DB;if(vB%1||!(AB-PB<qB))LB=K(PB,AB,Math.min(AB-PB,qB)).map(wB);else if(PB=Math.round(PB)-1,AB=Math.round(AB)+1,0<zB){for(;PB<AB;++PB)for(MB=1,OB=wB(PB);MB<vB;++MB)if(DB=OB*MB,!(DB<zB)){if(DB>TB)break;LB.push(DB)}}else for(;PB<AB;++PB)for(MB=vB-1,OB=wB(PB);1<=MB;--MB)if(DB=OB*MB,!(DB<zB)){if(DB>TB)break;LB.push(DB)}return RB?LB.reverse():LB},_B.tickFormat=function(SB,CB){if(null==CB&&(CB=10===vB?'.0e':','),'function'!==typeof CB&&(CB=IM(CB)),SB===Infinity)return CB;null==SB&&(SB=10);var zB=Math.max(1,vB*SB/_B.ticks().length);return function(TB){var RB=TB/wB(Math.round(kB(TB)));return RB*vB<vB-0.5&&(RB*=vB),RB<=zB?CB(TB):''}},_B.nice=function(){return xB(Lc(xB(),{floor:function(CB){return wB(Math.floor(kB(CB)))},ceil:function(CB){return wB(Math.ceil(kB(CB)))}}))},_B.copy=function(){return fc(_B,Bc().base(vB))},_B}function Yc(bB,_B){return 0>bB?-Math.pow(-bB,_B):Math.pow(bB,_B)}function Gc(){var xB=1,vB=uc(function(wB,SB){return(SB=Yc(SB,xB)-(wB=Yc(wB,xB)))?function(CB){return(Yc(CB,xB)-wB)/SB}:Zf(SB)},function(wB,SB){return SB=Yc(SB,xB)-(wB=Yc(wB,xB)),function(CB){return Yc(wB+SB*CB,1/xB)}}),kB=vB.domain;return vB.exponent=function(wB){return arguments.length?(xB=+wB,kB(kB())):xB},vB.copy=function(){return fc(vB,Gc().exponent(xB))},Mc(vB)}function Hc(){function bB(){var wB=0,SB=Math.max(1,vB.length);for(kB=Array(SB-1);++wB<SB;)kB[wB-1]=ne(xB,wB/SB);return _B}function _B(wB){if(!isNaN(wB=+wB))return vB[Xz(kB,wB)]}var xB=[],vB=[],kB=[];return _B.invertExtent=function(wB){var SB=vB.indexOf(wB);return 0>SB?[NaN,NaN]:[0<SB?kB[SB-1]:xB[0],SB<kB.length?kB[SB]:xB[xB.length-1]]},_B.domain=function(wB){if(!arguments.length)return xB.slice();xB=[];for(var SB=0,CB=wB.length,zB;SB<CB;++SB)(zB=wB[SB],null!=zB&&!isNaN(zB=+zB))&&xB.push(zB);return xB.sort(U),bB()},_B.range=function(wB){return arguments.length?(vB=PO.call(wB),bB()):vB.slice()},_B.quantiles=function(){return kB.slice()},_B.copy=function(){return Hc().domain(xB).range(vB)},_B}function Xc(){function bB(CB){if(CB<=CB)return SB[Xz(wB,CB,0,kB)]}function _B(){var CB=-1;for(wB=Array(kB);++CB<kB;)wB[CB]=((CB+1)*vB-(CB-kB)*xB)/(kB+1);return bB}var xB=0,vB=1,kB=1,wB=[0.5],SB=[0,1];return bB.domain=function(CB){return arguments.length?(xB=+CB[0],vB=+CB[1],_B()):[xB,vB]},bB.range=function(CB){return arguments.length?(kB=(SB=PO.call(CB)).length-1,_B()):SB.slice()},bB.invertExtent=function(CB){var zB=SB.indexOf(CB);return 0>zB?[NaN,NaN]:1>zB?[xB,wB[0]]:zB>=kB?[wB[kB-1],vB]:[wB[zB-1],wB[zB]]},bB.copy=function(){return Xc().domain([xB,vB]).range(SB)},Mc(bB)}function Vc(){function bB(kB){if(kB<=kB)return xB[Xz(_B,kB,0,vB)]}var _B=[0.5],xB=[0,1],vB=1;return bB.domain=function(kB){return arguments.length?(_B=PO.call(kB),vB=Math.min(_B.length,xB.length-1),bB):_B.slice()},bB.range=function(kB){return arguments.length?(xB=PO.call(kB),vB=Math.min(_B.length,xB.length-1),bB):xB.slice()},bB.invertExtent=function(kB){var wB=xB.indexOf(kB);return[_B[wB-1],_B[wB]]},bB.copy=function(){return Vc().domain(_B).range(xB)},bB}function Jc(bB){return new Date(bB)}function Zc(bB){return bB instanceof Date?+bB:+new Date(+bB)}function Kc(bB,_B,xB,vB,kB,wB,SB,CB,zB){function TB(NB){return(SB(NB)<NB?MB:wB(NB)<NB?DB:kB(NB)<NB?qB:vB(NB)<NB?LB:_B(NB)<NB?xB(NB)<NB?UB:FB:bB(NB)<NB?jB:IB)(NB)}function RB(NB,BB,YB,GB){if(null==NB&&(NB=10),'number'===typeof NB){var WB=Math.abs(YB-BB)/NB,HB=F(function(XB){return XB[2]}).right($B,WB);HB===$B.length?(GB=ee(BB/XM,YB/XM,NB),NB=bB):HB?(HB=$B[WB/$B[HB-1][2]<$B[HB][2]/WB?HB-1:HB],GB=HB[1],NB=HB[0]):(GB=ee(BB,YB,NB),NB=CB)}return null==GB?NB:NB.every(GB)}var PB=uc(Qf,Af),AB=PB.invert,OB=PB.domain,MB=zB('.%L'),DB=zB(':%S'),qB=zB('%I:%M'),LB=zB('%I %p'),UB=zB('%a %d'),FB=zB('%b %d'),jB=zB('%B'),IB=zB('%Y'),$B=[[SB,1,NM],[SB,5,5*NM],[SB,15,15*NM],[SB,30,30*NM],[wB,1,BM],[wB,5,5*BM],[wB,15,15*BM],[wB,30,30*BM],[kB,1,YM],[kB,3,3*YM],[kB,6,6*YM],[kB,12,12*YM],[vB,1,GM],[vB,2,2*GM],[xB,1,WM],[_B,1,HM],[_B,3,3*HM],[bB,1,XM]];return PB.invert=function(NB){return new Date(AB(NB))},PB.domain=function(NB){return arguments.length?OB(RO.call(NB,Zc)):OB().map(Jc)},PB.ticks=function(NB,BB){var YB=OB(),GB=YB[0],WB=YB[YB.length-1],HB=WB<GB,XB;return HB&&(XB=GB,GB=WB,WB=XB),XB=RB(NB,GB,WB,BB),XB=XB?XB.range(GB,WB+1):[],HB?XB.reverse():XB},PB.tickFormat=function(NB,BB){return null==BB?TB:zB(BB)},PB.nice=function(NB,BB){var YB=OB();return(NB=RB(NB,YB[0],YB[YB.length-1],BB))?OB(Lc(YB,NB)):PB},PB.copy=function(){return fc(PB,Kc(bB,_B,xB,vB,kB,wB,SB,CB,zB))},PB}function tu(bB){return bB.match(/.{6}/g).map(function(_B){return'#'+_B})}function nu(bB){var _B=bB.length;return function(xB){return bB[Math.max(0,Math.min(_B-1,Math.floor(xB*_B)))]}}function au(){function bB(){var PB=xB().length,AB=kB[1]<kB[0],OB=kB[AB-0],MB=kB[1-AB],DB=js(PB,zB,TB);wB=(MB-OB)/(DB||1),CB&&(wB=Math.floor(wB)),OB+=(MB-OB-wB*(PB-zB))*RB,SB=wB*(1-zB),CB&&(OB=Math.round(OB),SB=Math.round(SB));var qB=J(PB).map(function(LB){return OB+wB*LB});return vB(AB?qB.reverse():qB)}var _B=Is().unknown(void 0),xB=_B.domain,vB=_B.range,kB=[0,1],CB=!1,zB=0,TB=0,RB=0.5,wB,SB;return delete _B.unknown,_B.domain=function(PB){return arguments.length?(xB(PB),bB()):xB()},_B.range=function(PB){return arguments.length?(kB=[+PB[0],+PB[1]],bB()):kB.slice()},_B.rangeRound=function(PB){return kB=[+PB[0],+PB[1]],CB=!0,bB()},_B.bandwidth=function(){return SB},_B.step=function(){return wB},_B.round=function(PB){return arguments.length?(CB=!!PB,bB()):CB},_B.padding=function(PB){return arguments.length?(zB=TB=Math.max(0,Math.min(1,PB)),bB()):zB},_B.paddingInner=function(PB){return arguments.length?(zB=Math.max(0,Math.min(1,PB)),bB()):zB},_B.paddingOuter=function(PB){return arguments.length?(TB=Math.max(0,Math.min(1,PB)),bB()):TB},_B.align=function(PB){return arguments.length?(RB=Math.max(0,Math.min(1,PB)),bB()):RB},_B.invertRange=function(PB){var AB=+PB[0],OB=+PB[1],MB=kB[1]<kB[0],DB=MB?vB().reverse():vB(),qB=DB.length-1,LB,UB,FB;if(OB<AB&&(FB=AB,AB=OB,OB=FB),!(OB<DB[0]||AB>kB[1-MB]))return LB=Math.max(0,Xz(DB,AB)-1),UB=AB===OB?LB:Xz(DB,OB)-1,AB-DB[LB]>SB+1e-10&&++LB,MB&&(FB=LB,LB=qB-UB,UB=qB-FB),LB>UB?void 0:xB().slice(LB,UB+1)},_B.invert=function(PB){var AB=_B.invertRange([PB,PB]);return AB?AB[0]:AB},_B.copy=function(){return au().domain(xB()).range(kB).round(CB).paddingInner(zB).paddingOuter(TB).align(RB)},bB()}function iu(bB){var _B=bB.copy;return bB.padding=bB.paddingOuter,delete bB.paddingInner,bB.copy=function(){return iu(_B())},bB}function ru(bB){return rD.call(bB,function(_B){return+_B})}function ou(){function bB(kB){return null==kB||kB!==kB?void 0:xB(vB[Math.max(Xz(vB,kB),1)-1])}function _B(kB){vB=ru(kB),xB.domain([vB[0],We(vB)])}var xB=Dc(),vB=[];return bB.domain=function(kB){return arguments.length?(_B(kB),bB):vB.slice()},bB.range=function(kB){return arguments.length?(xB.range(kB),bB):xB.range()},bB.rangeRound=function(kB){return arguments.length?(xB.rangeRound(kB),bB):xB.rangeRound()},bB.interpolate=function(kB){return arguments.length?(xB.interpolate(kB),bB):xB.interpolate()},bB.invert=function(kB){return xB.invert(kB)},bB.ticks=function(kB){var wB=vB.length,SB=~~(wB/(kB||wB));return 2>SB?bB.domain():vB.filter(function(CB,zB){return!(zB%SB)})},bB.tickFormat=function(){return xB.tickFormat.apply(xB,arguments)},bB.copy=function(){return ou().domain(bB.domain()).range(bB.range())},bB}function lu(){function bB(vB){return null==vB||vB!==vB?void 0:xB[(Xz(_B,vB)-1)%xB.length]}var _B=[],xB=[];return bB.domain=function(vB){return arguments.length?(_B=ru(vB),bB):_B.slice()},bB.range=function(vB){return arguments.length?(xB=oD.call(vB),bB):xB.slice()},bB.copy=function(){return lu().domain(bB.domain()).range(bB.range())},bB}function su(bB){function _B(){var CB=vB.domain();kB=CB[0],wB=We(CB)-kB}function xB(CB){var zB=(CB-kB)/wB;return bB(SB?Math.max(0,Math.min(1,zB)):zB)}var vB=Dc(),kB=0,wB=1,SB=!1;return xB.clamp=function(CB){return arguments.length?(SB=!!CB,xB):SB},xB.domain=function(CB){return arguments.length?(vB.domain(CB),_B(),xB):vB.domain()},xB.interpolator=function(CB){return arguments.length?(bB=CB,xB):bB},xB.copy=function(){return su().domain(vB.domain()).clamp(SB).interpolator(bB)},xB.ticks=function(CB){return vB.ticks(CB)},xB.tickFormat=function(CB,zB){return vB.tickFormat(CB,zB)},xB.nice=function(CB){return vB.nice(CB),_B(),xB},xB}function fu(bB,_B){return function(){var vB=_B();return vB.invertRange||(vB.invertRange=vB.invert?Us(vB):vB.invertExtent?Fs(vB):void 0),vB.type=bB,vB}}function cu(bB,_B){return 1<arguments.length?(lD[bB]=fu(bB,_B),this):lD.hasOwnProperty(bB)?lD[bB]:void 0}function pu(bB){for(var _B=0|bB.length/6,xB=Array(_B),vB=0;vB<_B;)xB[vB]='#'+bB.slice(6*vB,6*++vB);return xB}function gu(bB){for(var _B=0|bB.length/6,xB=Array(_B),vB=0;vB<_B;)xB[vB]='#'+bB.slice(6*vB,6*++vB);return xB}function hu(bB){return cM(bB[bB.length-1])}function yu(bB,_B){Eq[bB]=kq['interpolate'+_B],wq[bB]=kq['scheme'+_B]}function bu(bB,_B){if(1<arguments.length)return Eq[bB]=_B,this;var xB=bB.split('-');return bB=xB[0],xB=+xB[1]+1,xB&&wq.hasOwnProperty(bB)?wq[bB][xB-1]:!xB&&Eq.hasOwnProperty(bB)?Eq[bB]:void 0}function _u(bB,_B){var xB=_B[0],vB=We(_B)-xB;return function(kB){return bB(xB+kB*vB)}}function xu(bB,_B,xB){return'linear'===bB.type||'sequential'===bB.type?function(vB){return(vB-_B)/(xB-_B)}:bB.copy().domain([_B,xB]).range([0,1]).interpolate(vu)}function vu(bB,_B){return function(vB){return bB+vB*(_B-bB)}}function ku(bB,_B){var xB=MM[wu(bB)];return null!=_B&&xB&&xB.gamma?xB.gamma(_B):xB}function wu(bB){return'interpolate'+bB.toLowerCase().split('-').map(function(_B){return _B[0].toUpperCase()+_B.slice(1)}).join('')}function Eu(bB,_B){return bB-_B}function Su(bB){for(var _B=0,xB=bB.length,vB=bB[xB-1][1]*bB[0][0]-bB[xB-1][0]*bB[0][1];++_B<xB;)vB+=bB[_B-1][1]*bB[_B][0]-bB[_B-1][0]*bB[_B][1];return vB}function Cu(bB){return function(){return bB}}function zu(bB,_B){for(var xB=-1,vB=_B.length,kB;++xB<vB;)if(kB=Tu(bB,_B[xB]))return kB;return 0}function Tu(bB,_B){for(var xB=_B[0],vB=_B[1],kB=-1,wB=0,SB=bB.length,CB=SB-1;wB<SB;CB=wB++){var zB=bB[wB],TB=zB[0],RB=zB[1],PB=bB[CB],AB=PB[0],OB=PB[1];if(Ru(zB,PB,_B))return 0;RB>vB!==OB>vB&&xB<(AB-TB)*(vB-RB)/(OB-RB)+TB&&(kB=-kB)}return kB}function Ru(bB,_B,xB){var vB;return Pu(bB,_B,xB)&&Au(bB[vB=+(bB[0]===_B[0])],xB[vB],_B[vB])}function Pu(bB,_B,xB){return(_B[0]-bB[0])*(xB[1]-bB[1])===(xB[0]-bB[0])*(_B[1]-bB[1])}function Au(bB,_B,xB){return bB<=_B&&_B<=xB||xB<=_B&&_B<=bB}function Ou(){}function Mu(){function bB(zB){var TB=SB(zB);if(!Array.isArray(TB)){var RB=V(zB),PB=RB[0],AB=RB[1];TB=ee(PB,AB,TB),TB=J(Math.floor(PB/TB)*TB,Math.floor(AB/TB)*TB,TB)}else TB=TB.slice().sort(Eu);var OB=TB.map(function(MB){var DB=[],qB=[];return _B(zB,MB,function(LB){CB(LB,zB,MB),0<Su(LB)?DB.push([LB]):qB.push(LB)}),qB.forEach(function(LB){for(var UB=0,FB=DB.length,jB;UB<FB;++UB)if(zu((jB=DB[UB])[0],LB))return void jB.push(LB)}),DB});return OB.map(function(MB,DB){return{type:'MultiPolygon',value:TB[DB],coordinates:MB}})}function _B(zB,TB,RB){function PB(jB){var IB=[jB[0][0]+MB,jB[0][1]+DB],$B=[jB[1][0]+MB,jB[1][1]+DB],NB=xB(IB),BB=xB($B),YB,GB;(YB=OB[NB])?(GB=AB[BB])?(delete OB[YB.end],delete AB[GB.start],YB===GB?(YB.ring.push($B),RB(YB.ring)):AB[YB.start]=OB[GB.end]={start:YB.start,end:GB.end,ring:YB.ring.concat(GB.ring)}):(delete OB[YB.end],YB.ring.push($B),OB[YB.end=BB]=YB):(YB=AB[BB])?(GB=OB[NB])?(delete AB[YB.start],delete OB[GB.end],YB===GB?(YB.ring.push($B),RB(YB.ring)):AB[GB.start]=OB[YB.end]={start:GB.start,end:YB.end,ring:GB.ring.concat(YB.ring)}):(delete AB[YB.start],YB.ring.unshift(IB),AB[YB.start=NB]=YB):AB[NB]=OB[BB]={start:NB,end:BB,ring:[IB,$B]}}var AB=[],OB=[],MB,DB,qB,LB,UB,FB;for(MB=DB=-1,LB=zB[0]>=TB,zq[LB<<1].forEach(PB);++MB<kB-1;)qB=LB,LB=zB[MB+1]>=TB,zq[qB|LB<<1].forEach(PB);for(zq[LB<<0].forEach(PB);++DB<wB-1;){for(MB=-1,LB=zB[DB*kB+kB]>=TB,UB=zB[DB*kB]>=TB,zq[LB<<1|UB<<2].forEach(PB);++MB<kB-1;)qB=LB,LB=zB[DB*kB+kB+MB+1]>=TB,FB=UB,UB=zB[DB*kB+MB+1]>=TB,zq[qB|LB<<1|UB<<2|FB<<3].forEach(PB);zq[LB|UB<<3].forEach(PB)}for(MB=-1,UB=zB[DB*kB]>=TB,zq[UB<<2].forEach(PB);++MB<kB-1;)FB=UB,UB=zB[DB*kB+MB+1]>=TB,zq[UB<<2|FB<<3].forEach(PB);zq[UB<<3].forEach(PB)}function xB(zB){return 2*zB[0]+4*(zB[1]*(kB+1))}function vB(zB,TB,RB){zB.forEach(function(PB){var AB=PB[0],OB=PB[1],MB=0|AB,DB=0|OB,LB=TB[DB*kB+MB],qB;0<AB&&AB<kB&&MB===AB&&(qB=TB[DB*kB+MB-1],PB[0]=AB+(RB-qB)/(LB-qB)-0.5),0<OB&&OB<wB&&DB===OB&&(qB=TB[(DB-1)*kB+MB],PB[1]=OB+(RB-qB)/(LB-qB)-0.5)})}var kB=1,wB=1,SB=te,CB=vB;return bB.size=function(zB){if(!arguments.length)return[kB,wB];var TB=Math.ceil(zB[0]),RB=Math.ceil(zB[1]);if(!(0<TB)||!(0<RB))throw new Error('invalid size');return kB=TB,wB=RB,bB},bB.thresholds=function(zB){return arguments.length?(SB='function'===typeof zB?zB:Array.isArray(zB)?Cu(Cq.call(zB)):Cu(zB),bB):SB},bB.smooth=function(zB){return arguments.length?(CB=zB?vB:Ou,bB):CB===vB},bB}function Du(bB,_B,xB){for(var vB=bB.width,kB=bB.height,wB=(xB<<1)+1,SB=0;SB<kB;++SB)for(var CB=0,zB=0;CB<vB+xB;++CB)CB<vB&&(zB+=bB.data[CB+SB*vB]),CB>=xB&&(CB>=wB&&(zB-=bB.data[CB-wB+SB*vB]),_B.data[CB-xB+SB*vB]=zB/Math.min(CB+1,vB-1+wB-CB,wB))}function qu(bB,_B,xB){for(var vB=bB.width,kB=bB.height,wB=(xB<<1)+1,SB=0;SB<vB;++SB)for(var CB=0,zB=0;CB<kB+xB;++CB)CB<kB&&(zB+=bB.data[SB+CB*vB]),CB>=xB&&(CB>=wB&&(zB-=bB.data[SB+(CB-wB)*vB]),_B.data[SB+(CB-xB)*vB]=zB/Math.min(CB+1,kB-1+wB-CB,wB))}function Lu(bB){return bB[0]}function Uu(bB){return bB[1]}function Fu(){function bB(qB){var LB=new Float32Array(OB*MB),UB=new Float32Array(OB*MB);qB.forEach(function(IB,$B,NB){var BB=SB(IB,$B,NB)+AB>>PB,YB=CB(IB,$B,NB)+AB>>PB;0<=BB&&BB<OB&&0<=YB&&YB<MB&&++LB[BB+YB*OB]}),Du({width:OB,height:MB,data:LB},{width:OB,height:MB,data:UB},RB>>PB),qu({width:OB,height:MB,data:UB},{width:OB,height:MB,data:LB},RB>>PB),Du({width:OB,height:MB,data:LB},{width:OB,height:MB,data:UB},RB>>PB),qu({width:OB,height:MB,data:UB},{width:OB,height:MB,data:LB},RB>>PB),Du({width:OB,height:MB,data:LB},{width:OB,height:MB,data:UB},RB>>PB),qu({width:OB,height:MB,data:UB},{width:OB,height:MB,data:LB},RB>>PB);var FB=DB(LB);if(!Array.isArray(FB)){var jB=ae(LB);FB=ee(0,jB,FB),FB=J(0,Math.floor(jB/FB)*FB,FB),FB.shift()}return Mu().thresholds(FB).size([OB,MB])(LB).map(_B)}function _B(qB){return qB.value*=Math.pow(2,-2*PB),qB.coordinates.forEach(xB),qB}function xB(qB){qB.forEach(vB)}function vB(qB){qB.forEach(kB)}function kB(qB){qB[0]=qB[0]*Math.pow(2,PB)-AB,qB[1]=qB[1]*Math.pow(2,PB)-AB}function wB(){return AB=3*RB,OB=zB+2*AB>>PB,MB=TB+2*AB>>PB,bB}var SB=Lu,CB=Uu,zB=960,TB=500,RB=20,PB=2,AB=3*RB,OB=zB+2*AB>>PB,MB=TB+2*AB>>PB,DB=Cu(20);return bB.x=function(qB){return arguments.length?(SB='function'===typeof qB?qB:Cu(+qB),bB):SB},bB.y=function(qB){return arguments.length?(CB='function'===typeof qB?qB:Cu(+qB),bB):CB},bB.size=function(qB){if(!arguments.length)return[zB,TB];var LB=Math.ceil(qB[0]),UB=Math.ceil(qB[1]);if(!(0<=LB)&&!(0<=LB))throw new Error('invalid size');return zB=LB,TB=UB,wB()},bB.cellSize=function(qB){if(!arguments.length)return 1<<PB;if(!(1<=(qB=+qB)))throw new Error('invalid cell size');return PB=Math.floor(Math.log(qB)/Math.LN2),wB()},bB.thresholds=function(qB){return arguments.length?(DB='function'===typeof qB?qB:Array.isArray(qB)?Cu(Cq.call(qB)):Cu(qB),bB):DB},bB.bandwidth=function(qB){if(!arguments.length)return Math.sqrt(RB*(RB+1));if(!(0<=(qB=+qB)))throw new Error('invalid bandwidth');return RB=Math.round((Math.sqrt(4*qB*qB+1)-1)/2),wB()},bB}function ju(bB){Rl.call(this,null,bB)}function Iu(){return new $u}function $u(){this.reset()}function Nu(bB,_B,xB){var vB=bB.s=_B+xB,kB=vB-_B;bB.t=_B-(vB-kB)+(xB-kB)}function Bu(bB){return 1<bB?0:-1>bB?Mq:Math.acos(bB)}function Yu(bB){return 1<bB?Dq:-1>bB?-Dq:Math.asin(bB)}function Gu(){}function Wu(bB,_B){bB&&Kq.hasOwnProperty(bB.type)&&Kq[bB.type](bB,_B)}function Hu(bB,_B,xB){var vB=-1,kB=bB.length-xB,wB;for(_B.lineStart();++vB<kB;)wB=bB[vB],_B.point(wB[0],wB[1],wB[2]);_B.lineEnd()}function Xu(bB,_B){var xB=-1,vB=bB.length;for(_B.polygonStart();++xB<vB;)Hu(bB[xB],_B,1);_B.polygonEnd()}function Vu(bB,_B){bB&&Zq.hasOwnProperty(bB.type)?Zq[bB.type](bB,_B):Wu(bB,_B)}function Ju(){rL.point=Ku}function Zu(){Qu(tL,nL)}function Ku(bB,_B){rL.point=Qu,tL=bB,nL=_B,bB*=Fq,_B*=Fq,aL=bB,iL=Nq(_B=_B/2+qq),dL=Hq(_B)}function Qu(bB,_B){bB*=Fq,_B*=Fq,_B=_B/2+qq;var xB=bB-aL,vB=0<=xB?1:-1,kB=vB*xB,wB=Nq(_B),SB=Hq(_B),CB=dL*SB,zB=iL*wB+CB*Nq(kB),TB=CB*vB*Hq(kB);Qq.add($q(TB,zB)),aL=bB,iL=wB,dL=SB}function ep(bB){return[$q(bB[1],bB[0]),Yu(bB[2])]}function tp(bB){var _B=bB[0],xB=bB[1],vB=Nq(xB);return[vB*Nq(_B),vB*Hq(_B),Hq(xB)]}function np(bB,_B){return bB[0]*_B[0]+bB[1]*_B[1]+bB[2]*_B[2]}function ip(bB,_B){return[bB[1]*_B[2]-bB[2]*_B[1],bB[2]*_B[0]-bB[0]*_B[2],bB[0]*_B[1]-bB[1]*_B[0]]}function lp(bB,_B){bB[0]+=_B[0],bB[1]+=_B[1],bB[2]+=_B[2]}function sp(bB,_B){return[bB[0]*_B,bB[1]*_B,bB[2]*_B]}function fp(bB){var _B=Vq(bB[0]*bB[0]+bB[1]*bB[1]+bB[2]*bB[2]);bB[0]/=_B,bB[1]/=_B,bB[2]/=_B}function cp(bB,_B){hL.push(yL=[oL=bB,sL=bB]),_B<lL&&(lL=_B),_B>fL&&(fL=_B)}function up(bB,_B){var xB=tp([bB*Fq,_B*Fq]);if(gL){var vB=ip(gL,xB),kB=[vB[1],-vB[0],0],wB=ip(kB,vB);fp(wB),wB=ep(wB);var SB=bB-cL,CB=0<SB?1:-1,zB=wB[0]*Uq*CB,RB=180<jq(SB),TB;RB^(CB*cL<zB&&zB<CB*bB)?(TB=wB[1]*Uq,TB>fL&&(fL=TB)):(zB=(zB+360)%360-180,RB^(CB*cL<zB&&zB<CB*bB))?(TB=-wB[1]*Uq,TB<lL&&(lL=TB)):(_B<lL&&(lL=_B),_B>fL&&(fL=_B)),RB?bB<cL?vp(oL,bB)>vp(oL,sL)&&(sL=bB):vp(bB,sL)>vp(oL,sL)&&(oL=bB):sL>=oL?(bB<oL&&(oL=bB),bB>sL&&(sL=bB)):bB>cL?vp(oL,bB)>vp(oL,sL)&&(sL=bB):vp(bB,sL)>vp(oL,sL)&&(oL=bB)}else hL.push(yL=[oL=bB,sL=bB]);_B<lL&&(lL=_B),_B>fL&&(fL=_B),gL=xB,cL=bB}function pp(){bL.point=up}function gp(){yL[0]=oL,yL[1]=sL,bL.point=cp,gL=null}function mp(bB,_B){if(gL){var xB=bB-cL;mL.add(180<jq(xB)?xB+(0<xB?360:-360):xB)}else uL=bB,pL=_B;rL.point(bB,_B),up(bB,_B)}function hp(){rL.lineStart()}function bp(){mp(uL,pL),rL.lineEnd(),jq(mL)>Oq&&(oL=-(sL=180)),yL[0]=oL,yL[1]=sL,gL=null}function vp(bB,_B){return 0>(_B-=bB)?_B+360:_B}function kp(bB,_B){bB*=Fq,_B*=Fq;var xB=Nq(_B);Ep(xB*Nq(bB),xB*Hq(bB),Hq(_B))}function Ep(bB,_B,xB){++_L,vL+=(bB-vL)/_L,kL+=(_B-kL)/_L,wL+=(xB-wL)/_L}function Sp(){qL.point=Cp}function Cp(bB,_B){bB*=Fq,_B*=Fq;var xB=Nq(_B);OL=xB*Nq(bB),ML=xB*Hq(bB),DL=Hq(_B),qL.point=zp,Ep(OL,ML,DL)}function zp(bB,_B){bB*=Fq,_B*=Fq;var xB=Nq(_B),vB=xB*Nq(bB),kB=xB*Hq(bB),wB=Hq(_B),SB=$q(Vq((SB=ML*wB-DL*kB)*SB+(SB=DL*vB-OL*wB)*SB+(SB=OL*kB-ML*vB)*SB),OL*vB+ML*kB+DL*wB);xL+=SB,EL+=SB*(OL+(OL=vB)),SL+=SB*(ML+(ML=kB)),CL+=SB*(DL+(DL=wB)),Ep(OL,ML,DL)}function Tp(){qL.point=kp}function Rp(){qL.point=Ap}function Pp(){Op(PL,AL),qL.point=kp}function Ap(bB,_B){PL=bB,AL=_B,bB*=Fq,_B*=Fq,qL.point=Op;var xB=Nq(_B);OL=xB*Nq(bB),ML=xB*Hq(bB),DL=Hq(_B),Ep(OL,ML,DL)}function Op(bB,_B){bB*=Fq,_B*=Fq;var xB=Nq(_B),vB=xB*Nq(bB),kB=xB*Hq(bB),wB=Hq(_B),SB=ML*wB-DL*kB,CB=DL*vB-OL*wB,zB=OL*kB-ML*vB,TB=Vq(SB*SB+CB*CB+zB*zB),RB=Yu(TB),PB=TB&&-RB/TB;zL+=PB*SB,TL+=PB*CB,RL+=PB*zB,xL+=RB,EL+=RB*(OL+(OL=vB)),SL+=RB*(ML+(ML=kB)),CL+=RB*(DL+(DL=wB)),Ep(OL,ML,DL)}function Mp(bB,_B){function xB(vB,kB){return vB=bB(vB,kB),_B(vB[0],vB[1])}return bB.invert&&_B.invert&&(xB.invert=function(vB,kB){return vB=_B.invert(vB,kB),vB&&bB.invert(vB[0],vB[1])}),xB}function Dp(bB,_B){return[bB>Mq?bB-Lq:bB<-Mq?bB+Lq:bB,_B]}function qp(bB,_B,xB){return(bB%=Lq)?_B||xB?Mp(Up(bB),Fp(_B,xB)):Up(bB):_B||xB?Fp(_B,xB):Dp}function Lp(bB){return function(_B,xB){return _B+=bB,[_B>Mq?_B-Lq:_B<-Mq?_B+Lq:_B,xB]}}function Up(bB){var _B=Lp(bB);return _B.invert=Lp(-bB),_B}function Fp(bB,_B){function xB(CB,zB){var TB=Nq(zB),RB=Nq(CB)*TB,PB=Hq(CB)*TB,AB=Hq(zB),OB=AB*vB+RB*kB;return[$q(PB*wB-OB*SB,RB*vB-AB*kB),Yu(OB*wB+PB*SB)]}var vB=Nq(bB),kB=Hq(bB),wB=Nq(_B),SB=Hq(_B);return xB.invert=function(CB,zB){var TB=Nq(zB),RB=Nq(CB)*TB,PB=Hq(CB)*TB,AB=Hq(zB),OB=AB*wB-PB*SB;return[$q(PB*wB+AB*SB,RB*vB+OB*kB),Yu(OB*vB-RB*kB)]},xB}function jp(bB){function _B(xB){return xB=bB(xB[0]*Fq,xB[1]*Fq),xB[0]*=Uq,xB[1]*=Uq,xB}return bB=qp(bB[0]*Fq,bB[1]*Fq,2<bB.length?bB[2]*Fq:0),_B.invert=function(xB){return xB=bB.invert(xB[0]*Fq,xB[1]*Fq),xB[0]*=Uq,xB[1]*=Uq,xB},_B}function Ip(bB,_B,xB,vB,kB,wB){if(xB){var SB=Nq(_B),CB=Hq(_B),zB=vB*xB;null==kB?(kB=_B+vB*Lq,wB=_B-zB/2):(kB=$p(SB,kB),wB=$p(SB,wB),(0<vB?kB<wB:kB>wB)&&(kB+=vB*Lq));for(var RB=kB,TB;0<vB?RB>wB:RB<wB;RB-=zB)TB=ep([SB,-CB*Nq(RB),-CB*Hq(RB)]),bB.point(TB[0],TB[1])}}function $p(bB,_B){_B=tp(_B),_B[0]-=bB,fp(_B);var xB=Bu(-_B[1]);return((0>-_B[2]?-xB:xB)+Lq-Oq)%Lq}function Np(){var bB=[],_B;return{point:function(vB,kB){_B.push([vB,kB])},lineStart:function(){bB.push(_B=[])},lineEnd:Gu,rejoin:function(){1<bB.length&&bB.push(bB.pop().concat(bB.shift()))},result:function(){var xB=bB;return bB=[],_B=null,xB}}}function Bp(bB,_B,xB,vB,kB,wB){var SB=bB[0],CB=bB[1],zB=_B[0],TB=_B[1],RB=0,PB=1,AB=zB-SB,OB=TB-CB,MB;if(MB=xB-SB,AB||!(0<MB)){if(MB/=AB,0>AB){if(MB<RB)return;MB<PB&&(PB=MB)}else if(0<AB){if(MB>PB)return;MB>RB&&(RB=MB)}if(MB=kB-SB,AB||!(0>MB)){if(MB/=AB,0>AB){if(MB>PB)return;MB>RB&&(RB=MB)}else if(0<AB){if(MB<RB)return;MB<PB&&(PB=MB)}if(MB=vB-CB,OB||!(0<MB)){if(MB/=OB,0>OB){if(MB<RB)return;MB<PB&&(PB=MB)}else if(0<OB){if(MB>PB)return;MB>RB&&(RB=MB)}if(MB=wB-CB,OB||!(0>MB)){if(MB/=OB,0>OB){if(MB>PB)return;MB>RB&&(RB=MB)}else if(0<OB){if(MB<RB)return;MB<PB&&(PB=MB)}return 0<RB&&(bB[0]=SB+RB*AB,bB[1]=CB+RB*OB),1>PB&&(_B[0]=SB+PB*AB,_B[1]=CB+PB*OB),!0}}}}}function Yp(bB,_B){return jq(bB[0]-_B[0])<Oq&&jq(bB[1]-_B[1])<Oq}function Gp(bB,_B,xB,vB){this.x=bB,this.z=_B,this.o=xB,this.e=vB,this.v=!1,this.n=this.p=null}function Wp(bB,_B,xB,vB,kB){var wB=[],SB=[],CB,zB;if(bB.forEach(function(MB){if(!(0>=(DB=MB.length-1))){var qB=MB[0],LB=MB[DB],DB,UB;if(Yp(qB,LB)){for(kB.lineStart(),CB=0;CB<DB;++CB)kB.point((qB=MB[CB])[0],qB[1]);return void kB.lineEnd()}wB.push(UB=new Gp(qB,MB,null,!0)),SB.push(UB.o=new Gp(qB,null,UB,!1)),wB.push(UB=new Gp(LB,MB,null,!1)),SB.push(UB.o=new Gp(LB,null,UB,!0))}}),!!wB.length){for(SB.sort(_B),Hp(wB),Hp(SB),(CB=0,zB=SB.length);CB<zB;++CB)SB[CB].e=xB=!xB;for(var TB=wB[0],RB,PB;;){for(var AB=TB,OB=!0;AB.v;)if((AB=AB.n)===TB)return;RB=AB.z,kB.lineStart();do{if(AB.v=AB.o.v=!0,AB.e){if(OB)for(CB=0,zB=RB.length;CB<zB;++CB)kB.point((PB=RB[CB])[0],PB[1]);else vB(AB.x,AB.n.x,1,kB);AB=AB.n}else{if(OB)for(RB=AB.p.z,CB=RB.length-1;0<=CB;--CB)kB.point((PB=RB[CB])[0],PB[1]);else vB(AB.x,AB.p.x,-1,kB);AB=AB.p}AB=AB.o,RB=AB.z,OB=!OB}while(!AB.v);kB.lineEnd()}}}function Hp(bB){if(_B=bB.length){for(var xB=0,vB=bB[0],_B,kB;++xB<_B;)vB.n=kB=bB[xB],kB.p=vB,vB=kB;vB.n=kB=bB[0],kB.p=vB}}function Xp(bB,_B,xB,vB){function kB(TB,RB){return bB<=TB&&TB<=xB&&_B<=RB&&RB<=vB}function wB(TB,RB,PB,AB){var OB=0,MB=0;if(null==TB||(OB=SB(TB,PB))!==(MB=SB(RB,PB))||0>zB(TB,RB)^0<PB)do AB.point(0===OB||3===OB?bB:xB,1<OB?vB:_B);while((OB=(OB+PB+4)%4)!==MB);else AB.point(RB[0],RB[1])}function SB(TB,RB){return jq(TB[0]-bB)<Oq?0<RB?0:3:jq(TB[0]-xB)<Oq?0<RB?2:1:jq(TB[1]-_B)<Oq?0<RB?1:0:0<RB?3:2}function CB(TB,RB){return zB(TB.x,RB.x)}function zB(TB,RB){var PB=SB(TB,1),AB=SB(RB,1);return PB===AB?0===PB?RB[1]-TB[1]:1===PB?TB[0]-RB[0]:2===PB?TB[1]-RB[1]:RB[0]-TB[0]:PB-AB}return function(TB){function RB(JB,ZB){kB(JB,ZB)&&LB.point(JB,ZB)}function PB(){for(var JB=0,ZB=0,KB=jB.length;ZB<KB;++ZB)for(var QB=jB[ZB],eY=1,tY=QB.length,nY=QB[0],dY=nY[0],rY=nY[1],aY,iY;eY<tY;++eY)aY=dY,iY=rY,nY=QB[eY],dY=nY[0],rY=nY[1],iY<=vB?rY>vB&&(dY-aY)*(vB-iY)>(rY-iY)*(bB-aY)&&++JB:rY<=vB&&(dY-aY)*(vB-iY)<(rY-iY)*(bB-aY)&&--JB;return JB}function qB(JB,ZB){var KB=kB(JB,ZB);if(jB&&IB.push([JB,ZB]),HB)$B=JB,NB=ZB,BB=KB,HB=!1,KB&&(LB.lineStart(),LB.point(JB,ZB));else if(KB&&WB)LB.point(JB,ZB);else{var QB=[YB=Math.max(UL,Math.min(LL,YB)),GB=Math.max(UL,Math.min(LL,GB))],eY=[JB=Math.max(UL,Math.min(LL,JB)),ZB=Math.max(UL,Math.min(LL,ZB))];Bp(QB,eY,bB,_B,xB,vB)?(!WB&&(LB.lineStart(),LB.point(QB[0],QB[1])),LB.point(eY[0],eY[1]),!KB&&LB.lineEnd(),XB=!1):KB&&(LB.lineStart(),LB.point(JB,ZB),XB=!1)}YB=JB,GB=ZB,WB=KB}var LB=TB,UB=Np(),FB,jB,IB,$B,NB,BB,YB,GB,WB,HB,XB,VB={point:RB,lineStart:function(){VB.point=qB,jB&&jB.push(IB=[]),HB=!0,WB=!1,YB=GB=NaN},lineEnd:function(){FB&&(qB($B,NB),BB&&WB&&UB.rejoin(),FB.push(UB.result())),VB.point=RB,WB&&LB.lineEnd()},polygonStart:function(){LB=UB,FB=[],jB=[],XB=!0},polygonEnd:function(){var JB=PB(),ZB=XB&&JB,KB=(FB=oe(FB)).length;(ZB||KB)&&(TB.polygonStart(),ZB&&(TB.lineStart(),wB(null,null,1,TB),TB.lineEnd()),KB&&Wp(FB,CB,JB,wB,TB),TB.polygonEnd()),LB=TB,FB=jB=IB=null}};return VB}}function Vp(bB,_B){var xB=_B[0],vB=_B[1],kB=[Hq(xB),-Nq(xB),0],wB=0,SB=0;FL.reset();for(var CB=0,zB=bB.length;CB<zB;++CB)if(RB=(TB=bB[CB]).length)for(var PB=TB[RB-1],AB=PB[0],OB=PB[1]/2+qq,MB=Hq(OB),DB=Nq(OB),qB=0,TB,RB;qB<RB;++qB,AB=UB,MB=jB,DB=IB,PB=LB){var LB=TB[qB],UB=LB[0],FB=LB[1]/2+qq,jB=Hq(FB),IB=Nq(FB),$B=UB-AB,NB=0<=$B?1:-1,BB=NB*$B,YB=BB>Mq,GB=MB*jB;if(FL.add($q(GB*NB*Hq(BB),DB*IB+GB*Nq(BB))),wB+=YB?$B+NB*Lq:$B,YB^AB>=xB^UB>=xB){var WB=ip(tp(PB),tp(LB));fp(WB);var HB=ip(kB,WB);fp(HB);var XB=(YB^0<=$B?-1:1)*Yu(HB[2]);(vB>XB||vB===XB&&(WB[0]||WB[1]))&&(SB+=YB^0<=$B?1:-1)}}return(wB<-Oq||wB<Oq&&FL<-Oq)^1&SB}function Zp(){BL.point=BL.lineEnd=Gu}function Kp(bB,_B){bB*=Fq,_B*=Fq,IL=bB,$L=Hq(_B),NL=Nq(_B),BL.point=Qp}function Qp(bB,_B){bB*=Fq,_B*=Fq;var xB=Hq(_B),vB=Nq(_B),kB=jq(bB-IL),wB=Nq(kB),SB=Hq(kB),CB=vB*SB,zB=NL*xB-$L*vB*wB,TB=$L*xB+NL*vB*wB;jL.add($q(Vq(CB*CB+zB*zB),TB)),IL=bB,$L=xB,NL=vB}function eg(bB,_B,xB){var vB=J(bB,_B-Oq,xB).concat(_B);return function(kB){return vB.map(function(wB){return[kB,wB]})}}function tg(bB,_B,xB){var vB=J(bB,_B-Oq,xB).concat(_B);return function(kB){return vB.map(function(wB){return[wB,kB]})}}function ng(){function bB(){return{type:'MultiLineString',coordinates:_B()}}function _B(){return J(Bq(wB/AB)*AB,kB,AB).map(qB).concat(J(Bq(TB/OB)*OB,zB,OB).map(LB)).concat(J(Bq(vB/RB)*RB,xB,RB).filter(function(FB){return jq(FB%AB)>Oq}).map(MB)).concat(J(Bq(CB/PB)*PB,SB,PB).filter(function(FB){return jq(FB%OB)>Oq}).map(DB))}var RB=10,PB=RB,AB=90,OB=360,UB=2.5,xB,vB,kB,wB,SB,CB,zB,TB,MB,DB,qB,LB;return bB.lines=function(){return _B().map(function(FB){return{type:'LineString',coordinates:FB}})},bB.outline=function(){return{type:'Polygon',coordinates:[qB(wB).concat(LB(zB).slice(1),qB(kB).reverse().slice(1),LB(TB).reverse().slice(1))]}},bB.extent=function(FB){return arguments.length?bB.extentMajor(FB).extentMinor(FB):bB.extentMinor()},bB.extentMajor=function(FB){return arguments.length?(wB=+FB[0][0],kB=+FB[1][0],TB=+FB[0][1],zB=+FB[1][1],wB>kB&&(FB=wB,wB=kB,kB=FB),TB>zB&&(FB=TB,TB=zB,zB=FB),bB.precision(UB)):[[wB,TB],[kB,zB]]},bB.extentMinor=function(FB){return arguments.length?(vB=+FB[0][0],xB=+FB[1][0],CB=+FB[0][1],SB=+FB[1][1],vB>xB&&(FB=vB,vB=xB,xB=FB),CB>SB&&(FB=CB,CB=SB,SB=FB),bB.precision(UB)):[[vB,CB],[xB,SB]]},bB.step=function(FB){return arguments.length?bB.stepMajor(FB).stepMinor(FB):bB.stepMinor()},bB.stepMajor=function(FB){return arguments.length?(AB=+FB[0],OB=+FB[1],bB):[AB,OB]},bB.stepMinor=function(FB){return arguments.length?(RB=+FB[0],PB=+FB[1],bB):[RB,PB]},bB.precision=function(FB){return arguments.length?(UB=+FB,MB=eg(CB,SB,90),DB=tg(vB,xB,UB),qB=eg(TB,zB,90),LB=tg(wB,kB,UB),bB):UB},bB.extentMajor([[-180,-90+Oq],[180,90-Oq]]).extentMinor([[-180,-80-Oq],[180,80+Oq]])}function ag(bB){return bB}function ig(){JL.point=dg}function dg(bB,_B){JL.point=rg,WL=XL=bB,HL=VL=_B}function rg(bB,_B){GL.add(VL*bB-XL*_B),XL=bB,VL=_B}function og(){rg(WL,HL)}function sg(bB,_B){nU+=bB,aU+=_B,++iU}function cg(){mU.point=ug}function ug(bB,_B){mU.point=pg,sg(pU=bB,gU=_B)}function pg(bB,_B){var xB=bB-pU,vB=_B-gU,kB=Vq(xB*xB+vB*vB);dU+=kB*(pU+bB)/2,rU+=kB*(gU+_B)/2,oU+=kB,sg(pU=bB,gU=_B)}function gg(){mU.point=sg}function mg(){mU.point=yg}function hg(){_g(cU,uU)}function yg(bB,_B){mU.point=_g,sg(cU=pU=bB,uU=gU=_B)}function _g(bB,_B){var xB=bB-pU,vB=_B-gU,kB=Vq(xB*xB+vB*vB);dU+=kB*(pU+bB)/2,rU+=kB*(gU+_B)/2,oU+=kB,kB=gU*bB-pU*_B,lU+=kB*(pU+bB),sU+=kB*(gU+_B),fU+=3*kB,sg(pU=bB,gU=_B)}function xg(bB){this._context=bB}function vg(bB,_B){kU.point=kg,bU=xU=bB,_U=vU=_B}function kg(bB,_B){xU-=bB,vU-=_B,hU.add(Vq(xU*xU+vU*vU)),xU=bB,vU=_B}function wg(){this._string=[]}function Eg(bB){return'm0,'+bB+'a'+bB+','+bB+' 0 1,1 0,'+-2*bB+'a'+bB+','+bB+' 0 1,1 0,'+2*bB+'z'}function Sg(bB,_B){function xB(SB){return SB&&('function'===typeof vB&&wB.pointRadius(+vB.apply(this,arguments)),Vu(SB,kB(wB))),wB.result()}var vB=4.5,kB,wB;return xB.area=function(SB){return Vu(SB,kB(JL)),JL.result()},xB.measure=function(SB){return Vu(SB,kB(kU)),kU.result()},xB.bounds=function(SB){return Vu(SB,kB(tU)),tU.result()},xB.centroid=function(SB){return Vu(SB,kB(mU)),mU.result()},xB.projection=function(SB){return arguments.length?(kB=null==SB?(bB=null,ag):(bB=SB).stream,xB):bB},xB.context=function(SB){return arguments.length?(wB=null==SB?(_B=null,new wg):new xg(_B=SB),'function'!==typeof vB&&wB.pointRadius(vB),xB):_B},xB.pointRadius=function(SB){return arguments.length?(vB='function'===typeof SB?SB:(wB.pointRadius(+SB),+SB),xB):vB},xB.projection(bB).context(_B)}function Cg(bB,_B,xB,vB){return function(kB,wB){function SB($B,NB){var BB=kB($B,NB);bB($B=BB[0],NB=BB[1])&&wB.point($B,NB)}function CB($B,NB){var BB=kB($B,NB);OB.point(BB[0],BB[1])}function zB(){IB.point=CB,OB.lineStart()}function TB(){IB.point=SB,OB.lineEnd()}function RB($B,NB){jB.push([$B,NB]);var BB=kB($B,NB);qB.point(BB[0],BB[1])}function PB(){qB.lineStart(),jB=[]}function AB(){RB(jB[0][0],jB[0][1]),qB.lineEnd();var $B=qB.clean(),NB=DB.result(),YB=NB.length,BB,GB,WB,HB;if(jB.pop(),UB.push(jB),jB=null,!!YB){if(1&$B){if(WB=NB[0],0<(GB=WB.length-1)){for(LB||(wB.polygonStart(),LB=!0),wB.lineStart(),BB=0;BB<GB;++BB)wB.point((HB=WB[BB])[0],HB[1]);wB.lineEnd()}return}1<YB&&2&$B&&NB.push(NB.pop().concat(NB.shift())),FB.push(NB.filter(zg))}}var OB=_B(wB),MB=kB.invert(vB[0],vB[1]),DB=Np(),qB=_B(DB),LB=!1,UB,FB,jB,IB={point:SB,lineStart:zB,lineEnd:TB,polygonStart:function(){IB.point=RB,IB.lineStart=PB,IB.lineEnd=AB,FB=[],UB=[]},polygonEnd:function(){IB.point=SB,IB.lineStart=zB,IB.lineEnd=TB,FB=oe(FB);var NB=Vp(UB,MB);FB.length?(!LB&&(wB.polygonStart(),LB=!0),Wp(FB,Tg,NB,xB,wB)):NB&&(!LB&&(wB.polygonStart(),LB=!0),wB.lineStart(),xB(null,null,1,wB),wB.lineEnd()),LB&&(wB.polygonEnd(),LB=!1),FB=UB=null},sphere:function(){wB.polygonStart(),wB.lineStart(),xB(null,null,1,wB),wB.lineEnd(),wB.polygonEnd()}};return IB}}function zg(bB){return 1<bB.length}function Tg(bB,_B){return(0>(bB=bB.x)[0]?bB[1]-Dq-Oq:Dq-bB[1])-(0>(_B=_B.x)[0]?_B[1]-Dq-Oq:Dq-_B[1])}function Pg(bB,_B,xB,vB){var SB=Hq(bB-xB),kB,wB;return jq(SB)>Oq?Iq((Hq(_B)*(wB=Nq(vB))*Hq(xB)-Hq(vB)*(kB=Nq(_B))*Hq(bB))/(kB*wB*SB)):(_B+vB)/2}function Og(bB,_B){function vB(RB,PB){return Nq(RB)*Nq(PB)>CB}function wB(RB,PB,AB){var OB=tp(RB),MB=tp(PB),DB=[1,0,0],qB=ip(OB,MB),LB=np(qB,qB),UB=qB[0],FB=LB-UB*UB;if(!FB)return!AB&&RB;var $B=ip(DB,qB),NB=sp(DB,CB*LB/FB),BB=sp(qB,-CB*UB/FB);lp(NB,BB);var YB=$B,GB=np(NB,YB),WB=np(YB,YB),HB=GB*GB-WB*(np(NB,NB)-1);if(!(0>HB)){var XB=Vq(HB),VB=sp(YB,(-GB-XB)/WB);if(lp(VB,NB),VB=ep(VB),!AB)return VB;var JB=RB[0],ZB=PB[0],KB=RB[1],QB=PB[1],eY;ZB<JB&&(eY=JB,JB=ZB,ZB=eY);var tY=ZB-JB,nY=jq(tY-Mq)<Oq;if(!nY&&QB<KB&&(eY=KB,KB=QB,QB=eY),nY||tY<Oq?nY?0<KB+QB^VB[1]<(jq(VB[0]-JB)<Oq?KB:QB):KB<=VB[1]&&VB[1]<=QB:tY>Mq^(JB<=VB[0]&&VB[0]<=ZB)){var iY=sp(YB,(-GB+XB)/WB);return lp(iY,NB),[VB,ep(iY)]}}}function SB(RB,PB){var AB=zB?bB:Mq-bB,OB=0;return RB<-AB?OB|=1:RB>AB&&(OB|=2),PB<-AB?OB|=4:PB>AB&&(OB|=8),OB}var CB=Nq(bB),zB=0<CB,TB=jq(CB)>Oq;return Cg(vB,function(RB){var PB,AB,OB,MB,DB;return{lineStart:function(){MB=OB=!1,DB=1},point:function(LB,UB){var FB=[LB,UB],IB=vB(LB,UB),$B=zB?IB?0:SB(LB,UB):IB?SB(LB+(0>LB?Mq:-Mq),UB):0,jB;if(!PB&&(MB=OB=IB)&&RB.lineStart(),IB!==OB&&(jB=wB(PB,FB),(Yp(PB,jB)||Yp(FB,jB))&&(FB[0]+=Oq,FB[1]+=Oq,IB=vB(FB[0],FB[1]))),IB!==OB)DB=0,IB?(RB.lineStart(),jB=wB(FB,PB),RB.point(jB[0],jB[1])):(jB=wB(PB,FB),RB.point(jB[0],jB[1]),RB.lineEnd()),PB=jB;else if(TB&&PB&&zB^IB){var NB;!($B&AB)&&(NB=wB(FB,PB,!0))&&(DB=0,zB?(RB.lineStart(),RB.point(NB[0][0],NB[0][1]),RB.point(NB[1][0],NB[1][1]),RB.lineEnd()):(RB.point(NB[1][0],NB[1][1]),RB.lineEnd(),RB.lineStart(),RB.point(NB[0][0],NB[0][1])))}!IB||PB&&Yp(PB,FB)||RB.point(FB[0],FB[1]),PB=FB,OB=IB,AB=$B},lineEnd:function(){OB&&RB.lineEnd(),PB=null},clean:function(){return DB|(MB&&OB)<<1}}},function(RB,PB,AB,OB){Ip(OB,bB,_B,AB,RB,PB)},zB?[0,-bB]:[-Mq,bB-Mq])}function Mg(bB){return function(_B){var xB=new Dg;for(var vB in bB)xB[vB]=bB[vB];return xB.stream=_B,xB}}function Dg(){}function qg(bB,_B,xB){var vB=_B[1][0]-_B[0][0],kB=_B[1][1]-_B[0][1],wB=bB.clipExtent&&bB.clipExtent();bB.scale(150).translate([0,0]),null!=wB&&bB.clipExtent(null),Vu(xB,bB.stream(tU));var SB=tU.result(),CB=Math.min(vB/(SB[1][0]-SB[0][0]),kB/(SB[1][1]-SB[0][1])),zB=+_B[0][0]+(vB-CB*(SB[1][0]+SB[0][0]))/2,TB=+_B[0][1]+(kB-CB*(SB[1][1]+SB[0][1]))/2;return null!=wB&&bB.clipExtent(wB),bB.scale(150*CB).translate([zB,TB])}function Lg(bB,_B,xB){return qg(bB,[[0,0],_B],xB)}function Ug(bB,_B){return+_B?jg(bB,_B):Fg(bB)}function Fg(bB){return Mg({point:function(xB,vB){xB=bB(xB,vB),this.stream.point(xB[0],xB[1])}})}function jg(bB,_B){function xB(vB,kB,wB,SB,CB,zB,TB,RB,PB,AB,OB,MB,DB,qB){var LB=TB-vB,UB=RB-kB,FB=LB*LB+UB*UB;if(FB>4*_B&&DB--){var jB=SB+AB,IB=CB+OB,$B=zB+MB,NB=Vq(jB*jB+IB*IB+$B*$B),BB=Yu($B/=NB),YB=jq(jq($B)-1)<Oq||jq(wB-PB)<Oq?(wB+PB)/2:$q(IB,jB),GB=bB(YB,BB),WB=GB[0],HB=GB[1],XB=WB-vB,VB=HB-kB,JB=UB*XB-LB*VB;(JB*JB/FB>_B||0.3<jq((LB*XB+UB*VB)/FB-0.5)||SB*AB+CB*OB+zB*MB<SU)&&(xB(vB,kB,wB,SB,CB,zB,WB,HB,YB,jB/=NB,IB/=NB,$B,DB,qB),qB.point(WB,HB),xB(WB,HB,YB,jB,IB,$B,TB,RB,PB,AB,OB,MB,DB,qB))}}return function(vB){function kB(BB,YB){BB=bB(BB,YB),vB.point(BB[0],BB[1])}function wB(){UB=NaN,NB.point=SB,vB.lineStart()}function SB(BB,YB){var GB=tp([BB,YB]),WB=bB(BB,YB);xB(UB,FB,LB,jB,IB,$B,UB=WB[0],FB=WB[1],LB=BB,jB=GB[0],IB=GB[1],$B=GB[2],EU,vB),vB.point(UB,FB)}function CB(){NB.point=kB,vB.lineEnd()}function zB(){wB(),NB.point=TB,NB.lineEnd=RB}function TB(BB,YB){SB(PB=BB,YB),AB=UB,OB=FB,MB=jB,DB=IB,qB=$B,NB.point=SB}function RB(){xB(UB,FB,LB,jB,IB,$B,AB,OB,PB,MB,DB,qB,EU,vB),NB.lineEnd=CB,CB()}var PB,AB,OB,MB,DB,qB,LB,UB,FB,jB,IB,$B,NB={point:kB,lineStart:wB,lineEnd:CB,polygonStart:function(){vB.polygonStart(),NB.lineStart=zB},polygonEnd:function(){vB.polygonEnd(),NB.lineStart=wB}};return NB}}function Ig(bB){return $g(function(){return bB})()}function $g(bB){function _B(VB){return VB=UB(VB[0]*Fq,VB[1]*Fq),[VB[0]*CB+RB,PB-VB[1]*CB]}function xB(VB){return VB=UB.invert((VB[0]-RB)/CB,(PB-VB[1])/CB),VB&&[VB[0]*Uq,VB[1]*Uq]}function vB(VB,JB){return VB=SB(VB,JB),[VB[0]*CB+RB,PB-VB[1]*CB]}function kB(){UB=Mp(LB=qp(MB,DB,qB),SB);var VB=SB(AB,OB);return RB=zB-VB[0]*CB,PB=TB+VB[1]*CB,wB()}function wB(){return HB=XB=null,_B}var CB=150,zB=480,TB=250,AB=0,OB=0,MB=0,DB=0,qB=0,FB=null,jB=wU,IB=null,YB=ag,GB=0.5,WB=Ug(vB,GB),SB,RB,PB,LB,UB,$B,NB,BB,HB,XB;return _B.stream=function(VB){return HB&&XB===VB?HB:HB=CU(jB(LB,WB(YB(XB=VB))))},_B.clipAngle=function(VB){return arguments.length?(jB=+VB?Og(FB=VB*Fq,6*Fq):(FB=null,wU),wB()):FB*Uq},_B.clipExtent=function(VB){return arguments.length?(YB=null==VB?(IB=$B=NB=BB=null,ag):Xp(IB=+VB[0][0],$B=+VB[0][1],NB=+VB[1][0],BB=+VB[1][1]),wB()):null==IB?null:[[IB,$B],[NB,BB]]},_B.scale=function(VB){return arguments.length?(CB=+VB,kB()):CB},_B.translate=function(VB){return arguments.length?(zB=+VB[0],TB=+VB[1],kB()):[zB,TB]},_B.center=function(VB){return arguments.length?(AB=VB[0]%360*Fq,OB=VB[1]%360*Fq,kB()):[AB*Uq,OB*Uq]},_B.rotate=function(VB){return arguments.length?(MB=VB[0]%360*Fq,DB=VB[1]%360*Fq,qB=2<VB.length?VB[2]%360*Fq:0,kB()):[MB*Uq,DB*Uq,qB*Uq]},_B.precision=function(VB){return arguments.length?(WB=Ug(vB,GB=VB*VB),wB()):Vq(GB)},_B.fitExtent=function(VB,JB){return qg(_B,VB,JB)},_B.fitSize=function(VB,JB){return Lg(_B,VB,JB)},function(){return SB=bB.apply(this,arguments),_B.invert=SB.invert&&xB,kB()}}function Ng(bB){var _B=0,xB=Mq/3,vB=$g(bB),kB=vB(_B,xB);return kB.parallels=function(wB){return arguments.length?vB(_B=wB[0]*Fq,xB=wB[1]*Fq):[_B*Uq,xB*Uq]},kB}function Bg(bB){function _B(vB,kB){return[vB*xB,Hq(kB)/xB]}var xB=Nq(bB);return _B.invert=function(vB,kB){return[vB/xB,Yu(kB*xB)]},_B}function Yg(bB,_B){function xB(CB,zB){var TB=Vq(wB-2*kB*Hq(zB))/kB;return[TB*Hq(CB*=kB),SB-TB*Nq(CB)]}var vB=Hq(bB),kB=(vB+Hq(_B))/2;if(jq(kB)<Oq)return Bg(bB);var wB=1+vB*(2*kB-vB),SB=Vq(wB)/kB;return xB.invert=function(CB,zB){var TB=SB-zB;return[$q(CB,jq(TB))/kB*Xq(TB),Yu((wB-(CB*CB+TB*TB)*kB*kB)/(2*kB))]},xB}function Gg(){return Ng(Yg).scale(155.424).center([0,33.6442])}function Wg(){return Gg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-0.6,38.7])}function Hg(bB){var _B=bB.length;return{point:function(vB,kB){for(var wB=-1;++wB<_B;)bB[wB].point(vB,kB)},sphere:function(){for(var vB=-1;++vB<_B;)bB[vB].sphere()},lineStart:function(){for(var vB=-1;++vB<_B;)bB[vB].lineStart()},lineEnd:function(){for(var vB=-1;++vB<_B;)bB[vB].lineEnd()},polygonStart:function(){for(var vB=-1;++vB<_B;)bB[vB].polygonStart()},polygonEnd:function(){for(var vB=-1;++vB<_B;)bB[vB].polygonEnd()}}}function Vg(bB){return function(_B,xB){var vB=Nq(_B),kB=Nq(xB),wB=bB(vB*kB);return[wB*kB*Hq(_B),wB*Hq(xB)]}}function Jg(bB){return function(_B,xB){var vB=Vq(_B*_B+xB*xB),kB=bB(vB),wB=Hq(kB),SB=Nq(kB);return[$q(_B*wB,vB*SB),Yu(vB&&xB*wB/vB)]}}function Qg(bB,_B){return[bB,Gq(Jq((Dq+_B)/2))]}function tm(bB){function _B(){var PB=Mq*kB(),AB=xB(jp(xB.rotate()).invert([0,0]));return SB(null==CB?[[AB[0]-PB,AB[1]-PB],[AB[0]+PB,AB[1]+PB]]:bB===Qg?[[Math.max(AB[0]-PB,CB),zB],[Math.min(AB[0]+PB,TB),RB]]:[[CB,Math.max(AB[1]-PB,zB)],[TB,Math.min(AB[1]+PB,RB)]])}var xB=Ig(bB),vB=xB.center,kB=xB.scale,wB=xB.translate,SB=xB.clipExtent,CB=null,zB,TB,RB;return xB.scale=function(PB){return arguments.length?(kB(PB),_B()):kB()},xB.translate=function(PB){return arguments.length?(wB(PB),_B()):wB()},xB.center=function(PB){return arguments.length?(vB(PB),_B()):vB()},xB.clipExtent=function(PB){return arguments.length?(null==PB?CB=zB=TB=RB=null:(CB=+PB[0][0],zB=+PB[0][1],TB=+PB[1][0],RB=+PB[1][1]),_B()):null==CB?null:[[CB,zB],[TB,RB]]},_B()}function nm(bB){return Jq((Dq+bB)/2)}function im(bB,_B){function xB(SB,CB){0<wB?CB<-Dq+Oq&&(CB=-Dq+Oq):CB>Dq-Oq&&(CB=Dq-Oq);var zB=wB/Wq(nm(CB),kB);return[zB*Hq(kB*SB),wB-zB*Nq(kB*SB)]}var vB=Nq(bB),kB=bB===_B?Hq(bB):Gq(vB/Nq(_B))/Gq(nm(_B)/nm(bB)),wB=vB*Wq(nm(bB),kB)/kB;return kB?(xB.invert=function(SB,CB){var zB=wB-CB,TB=Xq(kB)*Vq(SB*SB+zB*zB);return[$q(SB,jq(zB))/kB*Xq(zB),2*Iq(Wq(wB/TB,1/kB))-Dq]},xB):Qg}function rm(bB,_B){return[bB,_B]}function lm(bB,_B){function xB(SB,CB){var zB=wB-CB,TB=kB*SB;return[zB*Hq(TB),wB-zB*Nq(TB)]}var vB=Nq(bB),kB=bB===_B?Hq(bB):(vB-Nq(_B))/(_B-bB),wB=vB/kB+bB;return jq(kB)<Oq?rm:(xB.invert=function(SB,CB){var zB=wB-CB;return[$q(SB,jq(zB))/kB*Xq(zB),wB-Xq(kB)*Vq(SB*SB+zB*zB)]},xB)}function cm(bB,_B){var xB=Nq(_B),vB=Nq(bB)*xB;return[xB*Hq(bB)/vB,Hq(_B)/vB]}function pm(bB,_B){return[Nq(_B)*Hq(bB),Hq(_B)]}function mm(bB,_B){var xB=Nq(_B),vB=1+Nq(bB)*xB;return[xB*Hq(bB)/vB,Hq(_B)/vB]}function _m(bB,_B){return[Gq(Jq((Dq+_B)/2)),-bB]}function km(bB,_B){return function xB(){var vB=_B();return vB.type=bB,vB.path=Sg().projection(vB),vB.copy=vB.copy||function(){var kB=xB();return PU.forEach(function(wB){vB.hasOwnProperty(wB)&&kB[wB](vB[wB]())}),kB.path.pointRadius(vB.path.pointRadius()),kB},vB}}function Em(bB,_B){return 1<arguments.length?(AU[bB]=km(bB,_B),this):AU.hasOwnProperty(bB)?AU[bB]:null}function Sm(bB){return bB&&bB.path||RU}function Cm(bB){Rl.call(this,null,bB)}function zm(bB){Rl.call(this,null,bB)}function Tm(bB){Rl.call(this,null,bB)}function Rm(bB,_B){var xB=function(kB){return bB(_B(kB))};return xB.context=function(vB){return bB.context(vB),xB},xB}function Pm(bB){Rl.call(this,[],bB),this.generator=ng()}function Am(bB){Rl.call(this,null,bB),this.modified(!0)}function Om(bB,_B){var xB=Mm(_B.fit);_B.extent?bB.fitExtent(_B.extent,xB):_B.size?bB.fitSize(_B.size,xB):0}function Mm(bB){return Qz(bB)?1<bB.length?{type:'FeatureCollection',features:bB}:bB[0]:bB}function Dm(bB){var _B=Em((bB||'mercator').toLowerCase());return _B||ke('Unrecognized projection type: '+bB),_B()}function qm(bB,_B,xB){Oe(bB[_B])&&bB[_B](xB)}function Lm(bB,_B){return bB.ticks?bB.ticks(_B):bB.domain()}function Um(bB,_B,xB){var vB=bB.tickFormat?bB.tickFormat(_B,xB):String;return bB.type===BU?Fm(vB,jm(xB)):vB}function Fm(bB,_B){return function(xB){return bB(xB)?_B(xB):''}}function jm(bB){var _B=Ec(bB||',');if(null==_B.precision){switch(_B.precision=12,_B.type){case'%':_B.precision-=2;break;case'e':_B.precision-=1;}return Im(IM(_B),IM('.1f')(1)[1])}return IM(_B)}function Im(bB,_B){return function(xB){var vB=bB(xB),kB=vB.indexOf(_B),wB,SB;if(0>kB)return vB;for(wB=$m(vB,kB),SB=wB<vB.length?vB.slice(wB):'';--wB>kB;)if('0'!==vB[wB]){++wB;break}return vB.slice(0,wB)+SB}}function $m(bB,_B){var xB=bB.lastIndexOf('e'),vB;if(0<xB)return xB;for(xB=bB.length;--xB>_B;)if(vB=bB.charCodeAt(xB),48<=vB&&57>=vB)return xB+1}function Nm(bB){Rl.call(this,null,bB)}function Bm(bB){Rl.call(this,null,bB)}function Ym(){return Io({})}function Gm(bB){return bB.exit}function Wm(bB){Rl.call(this,null,bB)}function Hm(bB,_B,xB){if(xB)return bB.domain();var vB=dF[bB.type];return vB?vB(bB):Lm(bB,_B)}function Zm(bB){var _B=bB.domain();return _B.max=_B.pop(),_B}function Km(bB,_B){return dF[bB.type]?Qm(_B):nh(_B)}function Qm(bB){return function(_B,xB,vB){var kB=vB[xB+1]||vB.max||+Infinity,wB=eh(_B,bB),SB=eh(kB,bB);return wB&&SB?wB+'\u2013'+SB:SB?'< '+SB:'\u2265 '+wB}}function eh(bB,_B){return isFinite(bB)?_B(bB):null}function nh(bB){return function(_B){return bB(_B)}}function ah(bB){Rl.call(this,[],bB)}function ih(bB){return bB.source.x}function dh(bB){return bB.source.y}function rh(bB){return bB.target.x}function oh(bB){return bB.target.y}function lh(bB){Rl.call(this,{},bB)}function sh(bB,_B,xB,vB){return'M'+bB+','+_B+'L'+xB+','+vB}function uh(bB,_B,xB,vB){var kB=xB-bB,wB=vB-_B,SB=Math.sqrt(kB*kB+wB*wB)/2,CB=180*Math.atan2(wB,kB)/Math.PI;return'M'+bB+','+_B+'A'+SB+','+SB+' '+CB+' 0 1 '+xB+','+vB}function gh(bB,_B,xB,vB){var kB=xB-bB,wB=vB-_B,SB=0.2*(kB+wB),CB=0.2*(wB-kB);return'M'+bB+','+_B+'C'+(bB+SB)+','+(_B+CB)+' '+(xB+CB)+','+(vB-SB)+' '+xB+','+vB}function wh(bB){Rl.call(this,null,bB)}function Eh(bB){Rl.call(this,null,bB),this.modified(!0)}function Sh(bB,_B,xB){var vB=Ch(bB,_B.domainRaw);if(-1<vB)return vB;var kB=_B.domain,wB=_B.zero||void 0===_B.zero&&cF[bB.type],SB,CB;return kB?((wB||null!=_B.domainMin||null!=_B.domainMax||null!=_B.domainMid)&&(SB=(kB=kB.slice()).length-1||1,wB&&(0<kB[0]&&(kB[0]=0),0>kB[SB]&&(kB[SB]=0)),null!=_B.domainMin&&(kB[0]=_B.domainMin),null!=_B.domainMax&&(kB[SB]=_B.domainMax),null!=_B.domainMid&&(CB=_B.domainMid,(CB<kB[0]||CB>kB[SB])&&xB.warn('Scale domainMid exceeds domain min or max.',CB),kB.splice(SB,0,CB))),bB.domain(kB),_B.nice&&bB.nice&&bB.nice(!0!==_B.nice&&+_B.nice||null),kB.length):0}function Ch(bB,_B){return _B?(bB.domain(_B),_B.length):-1}function zh(bB,_B,xB){var vB=_B.round||!1,kB=_B.range;if(null!=_B.rangeStep)kB=Th(bB.type,_B,xB);else if(_B.scheme){if(kB=Rh(bB.type,_B,xB),Oe(kB))return bB.interpolator(kB);}else if(kB&&bB.type===tF)return bB.interpolator(cM(Ah(kB,_B.reverse)));kB&&_B.interpolate&&bB.interpolate?bB.interpolate(ku(_B.interpolate,_B.interpolateGamma)):Oe(bB.round)?bB.round(vB):Oe(bB.rangeRound)&&bB.interpolate(vB?Uf:Lf),kB&&bB.range(Ah(kB,_B.reverse))}function Th(bB,_B,xB){bB!==WU&&bB!==HU&&ke('Only band and point scales support rangeStep.');var vB=(null==_B.paddingOuter?_B.padding:_B.paddingOuter)||0,kB=bB===HU?1:(null==_B.paddingInner?_B.padding:_B.paddingInner)||0;return[0,_B.rangeStep*js(xB,kB,vB)]}function Rh(bB,_B,xB){var vB=_B.scheme.toLowerCase(),kB=bu(vB),wB=_B.schemeExtent,SB;return kB||ke('Unrecognized scheme name: '+_B.scheme),xB=bB===KU?xB+1:bB===eF?xB-1:bB===JU||bB===ZU?+_B.schemeCount||fF:xB,bB===tF?Ph(kB,wB,_B.reverse):!wB&&(SB=bu(vB+'-'+xB))?SB:Oe(kB)?Oh(Ph(kB,wB),xB):bB===VU?kB:kB.slice(0,xB)}function Ph(bB,_B,xB){return Oe(bB)&&(_B||xB)?_u(bB,Ah(_B||[0,1],xB)):bB}function Ah(bB,_B){return _B?bB.slice().reverse():bB}function Oh(bB,_B){for(var xB=Array(_B),kB=0;kB<_B;++kB)xB[kB]=bB(kB/(_B-1||1));return xB}function Mh(bB){Rl.call(this,null,bB)}function Dh(bB){Rl.call(this,null,bB)}function qh(bB,_B,xB,vB,kB){for(var wB=(_B-bB.sum)/2,SB=bB.length,CB=0,zB;CB<SB;++CB)zB=bB[CB],zB[vB]=wB,zB[kB]=wB+=Math.abs(xB(zB))}function Lh(bB,_B,xB,vB,kB){for(var wB=1/bB.sum,SB=0,CB=bB.length,zB=0,TB=0,RB;zB<CB;++zB)RB=bB[zB],RB[vB]=SB,RB[kB]=SB=wB*(TB+=Math.abs(xB(RB)))}function Uh(bB,_B,xB,vB,kB){for(var wB=0,SB=0,CB=bB.length,zB=0,TB,RB;zB<CB;++zB)RB=bB[zB],TB=xB(RB),0>TB?(RB[vB]=SB,RB[kB]=SB+=TB):(RB[vB]=wB,RB[kB]=wB+=TB)}function Fh(bB,_B,xB,vB){var kB=[],wB=function(qB){return qB(RB)},SB,CB,zB,TB,RB,PB,AB,OB,MB;if(null==_B)kB.push(bB.slice());else for(SB={},CB=0,zB=bB.length;CB<zB;++CB)RB=bB[CB],PB=_B.map(wB),AB=SB[PB]||(kB.push(SB[PB]=[]),SB[PB]),AB.push(RB);for(PB=0,MB=0,TB=kB.length;PB<TB;++PB){for(AB=kB[PB],CB=0,OB=0,zB=AB.length;CB<zB;++CB)OB+=Math.abs(vB(AB[CB]));AB.sum=OB,OB>MB&&(MB=OB),xB&&AB.sort(xB)}return kB.max=MB,kB}function Ih(bB){return function(){return bB}}function $h(){return 1e-6*(Math.random()-0.5)}function Bh(bB,_B,xB,vB){if(isNaN(_B)||isNaN(xB))return bB;var wB=bB._root,SB={data:vB},CB=bB._x0,zB=bB._y0,TB=bB._x1,RB=bB._y1,kB,PB,AB,OB,MB,DB,qB,LB,UB;if(!wB)return bB._root=SB,bB;for(;wB.length;)if((DB=_B>=(PB=(CB+TB)/2))?CB=PB:TB=PB,(qB=xB>=(AB=(zB+RB)/2))?zB=AB:RB=AB,(kB=wB,!(wB=wB[LB=qB<<1|DB])))return kB[LB]=SB,bB;if(OB=+bB._x.call(null,wB.data),MB=+bB._y.call(null,wB.data),_B===OB&&xB===MB)return SB.next=wB,kB?kB[LB]=SB:bB._root=SB,bB;do kB=kB?kB[LB]=[,,,,]:bB._root=[,,,,],(DB=_B>=(PB=(CB+TB)/2))?CB=PB:TB=PB,(qB=xB>=(AB=(zB+RB)/2))?zB=AB:RB=AB;while((LB=qB<<1|DB)===(UB=(MB>=AB)<<1|OB>=PB));return kB[UB]=wB,kB[LB]=SB,bB}function Xh(bB,_B,xB,vB,kB){this.node=bB,this.x0=_B,this.y0=xB,this.x1=vB,this.y1=kB}function my(bB){return bB[0]}function yy(bB){return bB[1]}function wy(bB,_B,xB){var vB=new Ey(null==_B?my:_B,null==xB?yy:xB,NaN,NaN,NaN,NaN);return null==bB?vB:vB.addAll(bB)}function Ey(bB,_B,xB,vB,kB,wB){this._x=bB,this._y=_B,this._x0=xB,this._y0=vB,this._x1=kB,this._y1=wB,this._root=void 0}function Sy(bB){for(var _B={data:bB.data},xB=_B;bB=bB.next;)xB=xB.next={data:bB.data};return _B}function Cy(bB){return bB.x+bB.vx}function zy(bB){return bB.y+bB.vy}function Ry(bB){return bB.index}function Py(bB,_B){var xB=bB.get(_B);if(!xB)throw new Error('missing: '+_B);return xB}function Oy(){return RF||(OF(My),RF=AF.now()+PF)}function My(){RF=0}function Dy(){this._call=this._time=this._next=null}function qy(bB,_B,xB){var vB=new Dy;return vB.restart(bB,_B,xB),vB}function Ly(){Oy(),++kF;for(var bB=CF,_B;bB;)0<=(_B=RF-bB._time)&&bB._call.call(null,_B),bB=bB._next;--kF}function Uy(){RF=(TF=AF.now())+PF,kF=wF=0;try{Ly()}finally{kF=0,jy(),RF=0}}function Fy(){var bB=AF.now(),_B=bB-TF;_B>SF&&(PF-=_B,TF=bB)}function jy(){for(var _B=CF,vB=Infinity,bB,xB;_B;)_B._call?(vB>_B._time&&(vB=_B._time),bB=_B,_B=_B._next):(xB=_B._next,_B._next=null,_B=bB?bB._next=xB:CF=xB);zF=bB,Iy(vB)}function Iy(bB){if(!kF){wF&&(wF=clearTimeout(wF));var _B=bB-RF;24<_B?(bB<Infinity&&(wF=setTimeout(Uy,_B)),EF&&(EF=clearInterval(EF))):(!EF&&(TF=RF,EF=setInterval(Fy,SF)),kF=1,OF(Uy))}}function $y(bB){return bB.x}function Ny(bB){return bB.y}function By(bB){function _B(){xB(),OB.call('tick',wB),SB<CB&&(AB.stop(),OB.call('end',wB))}function xB(){var DB=bB.length,MB,qB;for(SB+=(TB-SB)*zB,PB.each(function(LB){LB(SB)}),MB=0;MB<DB;++MB)qB=bB[MB],null==qB.fx?qB.x+=qB.vx*=RB:(qB.x=qB.fx,qB.vx=0),null==qB.fy?qB.y+=qB.vy*=RB:(qB.y=qB.fy,qB.vy=0)}function vB(){for(var MB=0,DB=bB.length,qB;MB<DB;++MB){if(qB=bB[MB],qB.index=MB,isNaN(qB.x)||isNaN(qB.y)){var LB=MF*Math.sqrt(MB),UB=MB*DF;qB.x=LB*Math.cos(UB),qB.y=LB*Math.sin(UB)}(isNaN(qB.vx)||isNaN(qB.vy))&&(qB.vx=qB.vy=0)}}function kB(MB){return MB.initialize&&MB.initialize(bB),MB}var SB=1,CB=1e-3,zB=1-Math.pow(CB,1/300),TB=0,RB=0.6,PB=tt(),AB=qy(_B),OB=st('tick','end'),wB;return null==bB&&(bB=[]),vB(),wB={tick:xB,restart:function(){return AB.restart(_B),wB},stop:function(){return AB.stop(),wB},nodes:function(DB){return arguments.length?(bB=DB,vB(),PB.each(kB),wB):bB},alpha:function(DB){return arguments.length?(SB=+DB,wB):SB},alphaMin:function(DB){return arguments.length?(CB=+DB,wB):CB},alphaDecay:function(DB){return arguments.length?(zB=+DB,wB):+zB},alphaTarget:function(DB){return arguments.length?(TB=+DB,wB):TB},velocityDecay:function(DB){return arguments.length?(RB=1-DB,wB):1-RB},force:function(DB,qB){return 1<arguments.length?(null==qB?PB.remove(DB):PB.set(DB,kB(qB)),wB):PB.get(DB)},find:function(DB,qB,LB){var UB=0,FB=bB.length,jB,IB,$B,NB,BB;for(null==LB?LB=Infinity:LB*=LB,UB=0;UB<FB;++UB)NB=bB[UB],jB=DB-NB.x,IB=qB-NB.y,$B=jB*jB+IB*IB,$B<LB&&(BB=NB,LB=$B);return BB},on:function(DB,qB){return 1<arguments.length?(OB.on(DB,qB),wB):OB.on(DB)}}}function Hy(bB){Rl.call(this,null,bB)}function Xy(bB,_B){return function(){bB.touch(_B).run()}}function Vy(bB,_B){var xB=By(bB),vB=!1,kB=xB.stop,wB=xB.restart;return xB.stopped=function(){return vB},xB.restart=function(){return vB=!1,wB()},xB.stop=function(){return vB=!0,kB()},Jy(xB,_B,!0).on('end',function(){vB=!0})}function Jy(bB,_B,xB){var vB=Pe(_B.forces),kB,wB,SB;for(kB=0,wB=UF.length;kB<wB;++kB)SB=UF[kB],SB!==LF&&_B.modified(SB)&&bB[SB](_B[SB]);for(kB=0,wB=vB.length;kB<wB;++kB)(xB||_B.modified(LF,kB))&&bB.force(LF+kB,Zy(vB[kB]));for(wB=bB.numForces||0;kB<wB;++kB)bB.force(LF+kB,null);return bB.numForces=vB.length,bB}function Zy(bB){var _B,xB;for(xB in qF.hasOwnProperty(bB.force)||ke('Unrecognized force: '+bB.force),_B=qF[bB.force](),bB)Oe(_B[xB])&&_B[xB](bB[xB]);return _B}function Ky(bB,_B){return bB.parent===_B.parent?1:2}function Qy(bB){return bB.reduce(eb,0)/bB.length}function eb(bB,_B){return bB+_B.x}function tb(bB){return 1+bB.reduce(ib,0)}function ib(bB,_B){return Math.max(bB,_B.y)}function rb(bB){for(var _B;_B=bB.children;)bB=_B[0];return bB}function ob(bB){for(var _B;_B=bB.children;)bB=_B[_B.length-1];return bB}function sb(bB){var _B=0,xB=bB.children,vB=xB&&xB.length;if(!vB)_B=1;else for(;0<=--vB;)_B+=xB[vB].value;bB.value=_B}function Sb(bB,_B){if(bB===_B)return bB;var xB=bB.ancestors(),vB=_B.ancestors(),kB=null;for(bB=xB.pop(),_B=vB.pop();bB===_B;)kB=bB,bB=xB.pop(),_B=vB.pop();return kB}function Pb(bB,_B){var xB=new qb(bB),vB=+bB.value&&(xB.value=bB.value),wB=[xB],kB,SB,CB,zB,TB;for(null==_B&&(_B=Ob);kB=wB.pop();)if(vB&&(kB.value=+kB.data.value),(CB=_B(kB.data))&&(TB=CB.length))for(kB.children=Array(TB),zB=TB-1;0<=zB;--zB)wB.push(SB=kB.children[zB]=new qb(CB[zB])),SB.parent=kB,SB.depth=kB.depth+1;return xB.eachBefore(Db)}function Ob(bB){return bB.children}function Mb(bB){bB.data=bB.data.data}function Db(bB){var _B=0;do bB.height=_B;while((bB=bB.parent)&&bB.height<++_B)}function qb(bB){this.data=bB,this.depth=this.height=0,this.parent=null}function Lb(bB){this._=bB,this.next=null}function Ub(bB){for(var xB=(bB=bB.slice()).length,vB=null,kB=vB,_B,wB;xB;)wB=new Lb(bB[xB-1]),kB=kB?kB.next=wB:vB=wB,bB[_B]=bB[--xB];return{head:vB,tail:kB}}function Fb(bB){return Ib(Ub(bB),[])}function jb(bB,_B){var xB=_B.x-bB.x,vB=_B.y-bB.y,kB=bB.r-_B.r;return kB*kB+1e-6>xB*xB+vB*vB}function Ib(bB,_B){var vB=null,kB=bB.head,xB,wB,SB;switch(_B.length){case 1:xB=$b(_B[0]);break;case 2:xB=Nb(_B[0],_B[1]);break;case 3:xB=Bb(_B[0],_B[1],_B[2]);}for(;kB;)SB=kB._,wB=kB.next,xB&&jb(xB,SB)?vB=kB:(vB?(bB.tail=vB,vB.next=null):bB.head=bB.tail=null,_B.push(SB),xB=Ib(bB,_B),_B.pop(),bB.head?(kB.next=bB.head,bB.head=kB):(kB.next=null,bB.head=bB.tail=kB),vB=bB.tail,vB.next=wB),kB=wB;return bB.tail=vB,xB}function $b(bB){return{x:bB.x,y:bB.y,r:bB.r}}function Nb(bB,_B){var xB=bB.x,vB=bB.y,kB=bB.r,wB=_B.x,SB=_B.y,CB=_B.r,zB=wB-xB,TB=SB-vB,RB=CB-kB,PB=Math.sqrt(zB*zB+TB*TB);return{x:(xB+wB+zB/PB*RB)/2,y:(vB+SB+TB/PB*RB)/2,r:(PB+kB+CB)/2}}function Bb(bB,_B,xB){var vB=bB.x,kB=bB.y,wB=bB.r,SB=_B.x,CB=_B.y,zB=_B.r,TB=xB.x,RB=xB.y,PB=xB.r,AB=2*(vB-SB),OB=2*(kB-CB),MB=2*(zB-wB),DB=vB*vB+kB*kB-wB*wB-SB*SB-CB*CB+zB*zB,qB=2*(vB-TB),LB=2*(kB-RB),UB=2*(PB-wB),FB=vB*vB+kB*kB-wB*wB-TB*TB-RB*RB+PB*PB,jB=qB*OB-AB*LB,IB=(OB*FB-LB*DB)/jB-vB,$B=(LB*MB-OB*UB)/jB,NB=(qB*DB-AB*FB)/jB-kB,BB=(AB*UB-qB*MB)/jB,YB=$B*$B+BB*BB-1,GB=2*(IB*$B+NB*BB+wB),HB=(-GB-Math.sqrt(GB*GB-4*YB*(IB*IB+NB*NB-wB*wB)))/(2*YB);return{x:IB+$B*HB+vB,y:NB+BB*HB+kB,r:HB}}function Yb(bB,_B,xB){var vB=bB.x,kB=bB.y,wB=_B.r+xB.r,SB=bB.r+xB.r,CB=_B.x-vB,zB=_B.y-kB,TB=CB*CB+zB*zB;if(TB){var RB=0.5+((SB*=SB)-(wB*=wB))/(2*TB),PB=Math.sqrt(Math.max(0,2*wB*(SB+TB)-(SB-=TB)*SB-wB*wB))/(2*TB);xB.x=vB+RB*CB+PB*zB,xB.y=kB+RB*zB-PB*CB}else xB.x=vB+SB,xB.y=kB}function Gb(bB,_B){var xB=_B.x-bB.x,vB=_B.y-bB.y,kB=bB.r+_B.r;return kB*kB-1e-6>xB*xB+vB*vB}function Wb(bB,_B,xB){var vB=bB._,kB=bB.next._,wB=vB.r+kB.r,SB=(vB.x*kB.r+kB.x*vB.r)/wB-_B,CB=(vB.y*kB.r+kB.y*vB.r)/wB-xB;return SB*SB+CB*CB}function Hb(bB){this._=bB,this.next=null,this.previous=null}function Xb(bB){if(!(kB=bB.length))return 0;var _B,xB,vB,kB;if(_B=bB[0],_B.x=0,_B.y=0,!(1<kB))return _B.r;if(xB=bB[1],_B.x=-xB.r,xB.x=_B.r,xB.y=0,!(2<kB))return _B.r+xB.r;Yb(xB,_B,vB=bB[2]);var wB=_B.r*_B.r,SB=xB.r*xB.r,CB=vB.r*vB.r,zB=wB+SB+CB,TB=wB*_B.x+SB*xB.x+CB*vB.x,RB=wB*_B.y+SB*xB.y+CB*vB.y,PB,AB,OB,MB,DB,qB,LB;_B=new Hb(_B),xB=new Hb(xB),vB=new Hb(vB),_B.next=vB.previous=xB,xB.next=_B.previous=vB,vB.next=xB.previous=_B;pack:for(OB=3;OB<kB;++OB){Yb(_B._,xB._,vB=bB[OB]),vB=new Hb(vB),MB=xB.next,DB=_B.previous,qB=xB._.r,LB=_B._.r;do if(qB<=LB){if(Gb(MB._,vB._)){xB=MB,_B.next=xB,xB.previous=_B,--OB;continue pack}qB+=MB._.r,MB=MB.next}else{if(Gb(DB._,vB._)){_B=DB,_B.next=xB,xB.previous=_B,--OB;continue pack}LB+=DB._.r,DB=DB.previous}while(MB!==DB.next);for(vB.previous=_B,vB.next=xB,_B.next=xB.previous=xB=vB,zB+=CB=vB._.r*vB._.r,TB+=CB*vB._.x,RB+=CB*vB._.y,wB=Wb(_B,PB=TB/zB,AB=RB/zB);(vB=vB.next)!==xB;)(CB=Wb(vB,PB,AB))<wB&&(_B=vB,wB=CB);xB=_B.next}for(_B=[xB._],vB=xB;(vB=vB.next)!==xB;)_B.push(vB._);for(vB=Fb(_B),OB=0;OB<kB;++OB)_B=bB[OB],_B.x-=vB.x,_B.y-=vB.y;return vB.r}function Vb(bB){return null==bB?null:Jb(bB)}function Jb(bB){if('function'!==typeof bB)throw new Error;return bB}function Zb(){return 0}function Kb(bB){return function(){return bB}}function Qb(bB){return Math.sqrt(bB.value)}function t_(bB){return function(_B){_B.children||(_B.r=Math.max(0,+bB(_B)||0))}}function n_(bB,_B){return function(xB){if(vB=xB.children){var wB=vB.length,SB=bB(xB)*_B||0,vB,kB,CB;if(SB)for(kB=0;kB<wB;++kB)vB[kB].r+=SB;if(CB=Xb(vB),SB)for(kB=0;kB<wB;++kB)vB[kB].r-=SB;xB.r=CB+SB}}}function a_(bB){return function(_B){var xB=_B.parent;_B.r*=bB,xB&&(_B.x=xB.x+bB*_B.x,_B.y=xB.y+bB*_B.y)}}function i_(bB){bB.x0=Math.round(bB.x0),bB.y0=Math.round(bB.y0),bB.x1=Math.round(bB.x1),bB.y1=Math.round(bB.y1)}function d_(bB,_B,xB,vB,kB){for(var wB=bB.children,CB=-1,zB=wB.length,TB=bB.value&&(vB-_B)/bB.value,SB;++CB<zB;)SB=wB[CB],SB.y0=xB,SB.y1=kB,SB.x0=_B,SB.x1=_B+=SB.value*TB}function o_(bB){return bB.id}function l_(bB){return bB.parentId}function s_(){function bB(vB){var SB=vB.length,RB=Array(SB),OB={},kB,wB,CB,zB,TB,PB,AB;for(wB=0;wB<SB;++wB)kB=vB[wB],TB=RB[wB]=new qb(kB),null!=(PB=_B(kB,wB,vB))&&(PB+='')&&(AB=NF+(TB.id=PB),OB[AB]=AB in OB?YF:TB);for(wB=0;wB<SB;++wB)if(TB=RB[wB],PB=xB(vB[wB],wB,vB),null==PB||!(PB+='')){if(CB)throw new Error('multiple roots');CB=TB}else{if(zB=OB[NF+PB],!zB)throw new Error('missing: '+PB);if(zB===YF)throw new Error('ambiguous: '+PB);zB.children?zB.children.push(TB):zB.children=[TB],TB.parent=zB}if(!CB)throw new Error('no root');if(CB.parent=BF,CB.eachBefore(function(MB){MB.depth=MB.parent.depth+1,--SB}).eachBefore(Db),CB.parent=null,0<SB)throw new Error('cycle');return CB}var _B=o_,xB=l_;return bB.id=function(vB){return arguments.length?(_B=Jb(vB),bB):_B},bB.parentId=function(vB){return arguments.length?(xB=Jb(vB),bB):xB},bB}function f_(bB,_B){return bB.parent===_B.parent?1:2}function c_(bB){var _B=bB.children;return _B?_B[0]:bB.t}function u_(bB){var _B=bB.children;return _B?_B[_B.length-1]:bB.t}function p_(bB,_B,xB){var vB=xB/(_B.i-bB.i);_B.c-=vB,_B.s+=xB,bB.c+=vB,_B.z+=xB,_B.m+=xB}function g_(bB){for(var _B=0,xB=0,vB=bB.children,kB=vB.length,wB;0<=--kB;)wB=vB[kB],wB.z+=_B,wB.m+=_B,_B+=wB.s+(xB+=wB.c)}function m_(bB,_B,xB){return bB.a.parent===_B.parent?bB.a:xB}function h_(bB,_B){this._=bB,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=_B}function b_(bB){for(var _B=new h_(bB,0),vB=[_B],xB,kB,wB,SB,CB;xB=vB.pop();)if(wB=xB._.children)for(xB.children=Array(CB=wB.length),SB=CB-1;0<=SB;--SB)vB.push(kB=xB.children[SB]=new h_(wB[SB],SB)),kB.parent=xB;return(_B.parent=new h_(null,0)).children=[_B],_B}function k_(bB,_B,xB,vB,kB){for(var wB=bB.children,CB=-1,zB=wB.length,TB=bB.value&&(kB-xB)/bB.value,SB;++CB<zB;)SB=wB[CB],SB.x0=_B,SB.x1=vB,SB.y0=xB,SB.y1=xB+=SB.value*TB}function w_(bB,_B,xB,vB,kB,wB){for(var SB=[],CB=_B.children,RB=0,PB=0,AB=CB.length,DB=_B.value,zB,TB,OB,MB,qB,LB,UB,FB,jB,IB,$B;RB<AB;){OB=kB-xB,MB=wB-vB;do qB=CB[PB++].value;while(!qB&&PB<AB);for(LB=UB=qB,IB=Math.max(MB/OB,OB/MB)/(DB*bB),$B=qB*qB*IB,jB=Math.max(UB/$B,$B/LB);PB<AB;++PB){if(qB+=TB=CB[PB].value,TB<LB&&(LB=TB),TB>UB&&(UB=TB),$B=qB*qB*IB,FB=Math.max(UB/$B,$B/LB),FB>jB){qB-=TB;break}jB=FB}SB.push(zB={value:qB,dice:OB<MB,children:CB.slice(RB,PB)}),zB.dice?d_(zB,xB,vB,kB,DB?vB+=MB*qB/DB:wB):k_(zB,xB,vB,DB?xB+=OB*qB/DB:kB,wB),DB-=qB,RB=PB}return SB}function E_(){function bB(AB){return AB.x0=AB.y0=0,AB.x1=kB,AB.y1=wB,AB.eachBefore(_B),SB=[0],vB&&AB.eachBefore(i_),AB}function _B(AB){var OB=SB[AB.depth],MB=AB.x0+OB,DB=AB.y0+OB,qB=AB.x1-OB,LB=AB.y1-OB;qB<MB&&(MB=qB=(MB+qB)/2),LB<DB&&(DB=LB=(DB+LB)/2),AB.x0=MB,AB.y0=DB,AB.x1=qB,AB.y1=LB,AB.children&&(OB=SB[AB.depth+1]=CB(AB)/2,MB+=PB(AB)-OB,DB+=zB(AB)-OB,qB-=TB(AB)-OB,LB-=RB(AB)-OB,qB<MB&&(MB=qB=(MB+qB)/2),LB<DB&&(DB=LB=(DB+LB)/2),xB(AB,MB,DB,qB,LB))}var xB=WF,vB=!1,kB=1,wB=1,SB=[0],CB=Zb,zB=Zb,TB=Zb,RB=Zb,PB=Zb;return bB.round=function(AB){return arguments.length?(vB=!!AB,bB):vB},bB.size=function(AB){return arguments.length?(kB=+AB[0],wB=+AB[1],bB):[kB,wB]},bB.tile=function(AB){return arguments.length?(xB=Jb(AB),bB):xB},bB.padding=function(AB){return arguments.length?bB.paddingInner(AB).paddingOuter(AB):bB.paddingInner()},bB.paddingInner=function(AB){return arguments.length?(CB='function'===typeof AB?AB:Kb(+AB),bB):CB},bB.paddingOuter=function(AB){return arguments.length?bB.paddingTop(AB).paddingRight(AB).paddingBottom(AB).paddingLeft(AB):bB.paddingTop()},bB.paddingTop=function(AB){return arguments.length?(zB='function'===typeof AB?AB:Kb(+AB),bB):zB},bB.paddingRight=function(AB){return arguments.length?(TB='function'===typeof AB?AB:Kb(+AB),bB):TB},bB.paddingBottom=function(AB){return arguments.length?(RB='function'===typeof AB?AB:Kb(+AB),bB):RB},bB.paddingLeft=function(AB){return arguments.length?(PB='function'===typeof AB?AB:Kb(+AB),bB):PB},bB}function z_(bB){Rl.call(this,null,bB)}function T_(bB){return bB.values}function R_(bB){Rl.call(this,null,bB)}function P_(bB){Rl.call(this,{},bB)}function A_(bB){var _B;return bB.parent&&(_B=bB.parent.data)&&null!=Fo(_B)&&_B}function D_(bB){Rl.call(this,null,bB)}function q_(bB,_B,xB){for(var kB=0,wB=_B.length,vB;kB<wB;++kB)vB=_B[kB],vB in xB&&bB[vB](xB[vB])}function L_(bB,_B,xB){for(var vB=bB.data,kB=0,wB=_B.length-1;kB<wB;++kB)vB[xB[kB]]=bB[_B[kB]];vB[xB[wB]]=bB.children?bB.children.length:0}function U_(bB){D_.call(this,bB)}function F_(bB){D_.call(this,bB)}function j_(bB){D_.call(this,bB)}function I_(bB){D_.call(this,bB)}function $_(bB){return function(){return bB}}function N_(bB){return bB[0]}function B_(bB){return bB[1]}function Y_(){this._=null}function G_(bB){bB.U=bB.C=bB.L=bB.R=bB.P=bB.N=null}function W_(bB,_B){var xB=_B,vB=_B.R,kB=xB.U;kB?kB.L===xB?kB.L=vB:kB.R=vB:bB._=vB,vB.U=kB,xB.U=vB,xB.R=vB.L,xB.R&&(xB.R.U=xB),vB.L=xB}function H_(bB,_B){var xB=_B,vB=_B.L,kB=xB.U;kB?kB.L===xB?kB.L=vB:kB.R=vB:bB._=vB,vB.U=kB,xB.U=vB,xB.L=vB.R,xB.L&&(xB.L.U=xB),vB.R=xB}function X_(bB){for(;bB.L;)bB=bB.L;return bB}function V_(bB,_B,xB,vB){var kB=[null,null],wB=_j.push(kB)-1;return kB.left=bB,kB.right=_B,xB&&Z_(kB,bB,_B,xB),vB&&Z_(kB,_B,bB,vB),hj[bB.index].halfedges.push(wB),hj[_B.index].halfedges.push(wB),kB}function J_(bB,_B,xB){var vB=[_B,xB];return vB.left=bB,vB}function Z_(bB,_B,xB,vB){bB[0]||bB[1]?bB.left===xB?bB[1]=vB:bB[0]=vB:(bB[0]=vB,bB.left=_B,bB.right=xB)}function K_(bB,_B,xB,vB,kB){var wB=bB[0],SB=bB[1],CB=wB[0],zB=wB[1],TB=SB[0],RB=SB[1],PB=0,AB=1,OB=TB-CB,MB=RB-zB,DB;if(DB=_B-CB,OB||!(0<DB)){if(DB/=OB,0>OB){if(DB<PB)return;DB<AB&&(AB=DB)}else if(0<OB){if(DB>AB)return;DB>PB&&(PB=DB)}if(DB=vB-CB,OB||!(0>DB)){if(DB/=OB,0>OB){if(DB>AB)return;DB>PB&&(PB=DB)}else if(0<OB){if(DB<PB)return;DB<AB&&(AB=DB)}if(DB=xB-zB,MB||!(0<DB)){if(DB/=MB,0>MB){if(DB<PB)return;DB<AB&&(AB=DB)}else if(0<MB){if(DB>AB)return;DB>PB&&(PB=DB)}if(DB=kB-zB,MB||!(0>DB)){if(DB/=MB,0>MB){if(DB>AB)return;DB>PB&&(PB=DB)}else if(0<MB){if(DB<PB)return;DB<AB&&(AB=DB)}return 0<PB||1>AB?(0<PB&&(bB[0]=[CB+PB*OB,zB+PB*MB]),1>AB&&(bB[1]=[CB+AB*OB,zB+AB*MB]),!0):!0}}}}}function Q_(bB,_B,xB,vB,kB){var wB=bB[1];if(wB)return!0;var SB=bB[0],CB=bB.left,zB=bB.right,TB=CB[0],RB=CB[1],PB=zB[0],AB=zB[1],OB=(TB+PB)/2,DB,qB;if(AB===RB){if(OB<_B||OB>=vB)return;if(TB>PB){if(!SB)SB=[OB,xB];else if(SB[1]>=kB)return;wB=[OB,kB]}else{if(!SB)SB=[OB,kB];else if(SB[1]<xB)return;wB=[OB,xB]}}else if(DB=(TB-PB)/(AB-RB),qB=(RB+AB)/2-DB*OB,-1>DB||1<DB){if(TB>PB){if(!SB)SB=[(xB-qB)/DB,xB];else if(SB[1]>=kB)return;wB=[(kB-qB)/DB,kB]}else{if(!SB)SB=[(kB-qB)/DB,kB];else if(SB[1]<xB)return;wB=[(xB-qB)/DB,xB]}}else if(RB<AB){if(!SB)SB=[_B,DB*_B+qB];else if(SB[0]>=vB)return;wB=[vB,DB*vB+qB]}else{if(!SB)SB=[vB,DB*vB+qB];else if(SB[0]<_B)return;wB=[_B,DB*_B+qB]}return bB[0]=SB,bB[1]=wB,!0}function ex(bB,_B,xB,vB){for(var kB=_j.length,wB;kB--;)Q_(wB=_j[kB],bB,_B,xB,vB)&&K_(wB,bB,_B,xB,vB)&&(Math.abs(wB[0][0]-wB[1][0])>uj||Math.abs(wB[0][1]-wB[1][1])>uj)||delete _j[kB]}function mx(bB){return hj[bB.index]={site:bB,halfedges:[]}}function hx(bB,_B){var xB=bB.site,vB=_B.left,kB=_B.right;return(xB===kB&&(kB=vB,vB=xB),kB)?Math.atan2(kB[1]-vB[1],kB[0]-vB[0]):(xB===vB?(vB=_B[1],kB=_B[0]):(vB=_B[0],kB=_B[1]),Math.atan2(vB[0]-kB[0],kB[1]-vB[1]))}function yx(bB,_B){return _B[+(_B.left!==bB.site)]}function xx(bB,_B){return _B[+(_B.left===bB.site)]}function wx(){for(var bB=0,_B=hj.length,xB,vB,kB,wB;bB<_B;++bB)if((xB=hj[bB])&&(wB=(vB=xB.halfedges).length)){var SB=Array(wB),CB=Array(wB);for(kB=0;kB<wB;++kB)SB[kB]=kB,CB[kB]=hx(xB,_j[vB[kB]]);for(SB.sort(function(zB,TB){return CB[TB]-CB[zB]}),kB=0;kB<wB;++kB)CB[kB]=vB[SB[kB]];for(kB=0;kB<wB;++kB)vB[kB]=CB[kB]}}function Ex(bB,_B,xB,vB){var kB=hj.length,LB=!0,wB,SB,CB,zB,TB,RB,PB,AB,OB,MB,DB,qB;for(wB=0;wB<kB;++wB)if(SB=hj[wB]){for(CB=SB.site,TB=SB.halfedges,zB=TB.length;zB--;)_j[TB[zB]]||TB.splice(zB,1);for(zB=0,RB=TB.length;zB<RB;)MB=xx(SB,_j[TB[zB]]),DB=MB[0],qB=MB[1],PB=yx(SB,_j[TB[++zB%RB]]),AB=PB[0],OB=PB[1],(Math.abs(DB-AB)>uj||Math.abs(qB-OB)>uj)&&(TB.splice(zB,0,_j.push(J_(CB,MB,Math.abs(DB-bB)<uj&&vB-qB>uj?[bB,Math.abs(AB-bB)<uj?OB:vB]:Math.abs(qB-vB)<uj&&xB-DB>uj?[Math.abs(OB-vB)<uj?AB:xB,vB]:Math.abs(DB-xB)<uj&&qB-_B>uj?[xB,Math.abs(AB-xB)<uj?OB:_B]:Math.abs(qB-_B)<uj&&DB-bB>uj?[Math.abs(OB-_B)<uj?AB:bB,_B]:null))-1),++RB);RB&&(LB=!1)}if(LB){var IB=Infinity,UB,FB,jB;for(wB=0,LB=null;wB<kB;++wB)(SB=hj[wB])&&(CB=SB.site,UB=CB[0]-bB,FB=CB[1]-_B,jB=UB*UB+FB*FB,jB<IB&&(IB=jB,LB=SB));if(LB){var $B=[bB,_B],NB=[bB,vB],BB=[xB,vB],YB=[xB,_B];LB.halfedges.push(_j.push(J_(CB=LB.site,$B,NB))-1,_j.push(J_(CB,NB,BB))-1,_j.push(J_(CB,BB,YB))-1,_j.push(J_(CB,YB,$B))-1)}}for(wB=0;wB<kB;++wB)(SB=hj[wB])&&(SB.halfedges.length||delete hj[wB])}function Sx(){G_(this),this.x=this.y=this.arc=this.site=this.cy=null}function Cx(bB){var _B=bB.P,xB=bB.N;if(_B&&xB){var vB=_B.site,kB=bB.site,wB=xB.site;if(vB!==wB){var SB=kB[0],CB=kB[1],zB=vB[0]-SB,TB=vB[1]-CB,RB=wB[0]-SB,PB=wB[1]-CB,AB=2*(zB*PB-TB*RB);if(!(AB>=-gj)){var OB=zB*zB+TB*TB,MB=RB*RB+PB*PB,DB=(PB*OB-TB*MB)/AB,qB=(zB*MB-RB*OB)/AB,LB=lj.pop()||new Sx;LB.arc=bB,LB.site=kB,LB.x=DB+SB,LB.y=(LB.cy=qB+CB)+Math.sqrt(DB*DB+qB*qB),bB.circle=LB;for(var UB=null,FB=bj._;FB;)if(LB.y<FB.y||LB.y===FB.y&&LB.x<=FB.x){if(FB.L)FB=FB.L;else{UB=FB.P;break}}else if(FB.R)FB=FB.R;else{UB=FB;break}bj.insert(UB,LB),UB||(fj=LB)}}}}function zx(bB){var _B=bB.circle;_B&&(!_B.P&&(fj=_B.N),bj.remove(_B),lj.push(_B),G_(_B),bB.circle=null)}function Tx(){G_(this),this.edge=this.site=this.circle=null}function Rx(bB){var _B=cj.pop()||new Tx;return _B.site=bB,_B}function Px(bB){zx(bB),mj.remove(bB),cj.push(bB),G_(bB)}function Ax(bB){var _B=bB.circle,xB=_B.x,vB=_B.cy,kB=[xB,vB],wB=bB.P,SB=bB.N,CB=[bB];Px(bB);for(var zB=wB;zB.circle&&Math.abs(xB-zB.circle.x)<uj&&Math.abs(vB-zB.circle.cy)<uj;)wB=zB.P,CB.unshift(zB),Px(zB),zB=wB;CB.unshift(zB),zx(zB);for(var TB=SB;TB.circle&&Math.abs(xB-TB.circle.x)<uj&&Math.abs(vB-TB.circle.cy)<uj;)SB=TB.N,CB.push(TB),Px(TB),TB=SB;CB.push(TB),zx(TB);var RB=CB.length,PB;for(PB=1;PB<RB;++PB)TB=CB[PB],zB=CB[PB-1],Z_(TB.edge,zB.site,TB.site,kB);zB=CB[0],TB=CB[RB-1],TB.edge=V_(zB.site,TB.site,null,kB),Cx(zB),Cx(TB)}function Ox(bB){for(var _B=bB[0],xB=bB[1],CB=mj._,vB,kB,wB,SB;CB;)if(wB=Mx(CB,xB)-_B,wB>uj)CB=CB.L;else if(SB=_B-Dx(CB,xB),SB>uj){if(!CB.R){vB=CB;break}CB=CB.R}else{wB>-uj?(vB=CB.P,kB=CB):SB>-uj?(vB=CB,kB=CB.N):vB=kB=CB;break}mx(bB);var zB=Rx(bB);if(mj.insert(vB,zB),vB||kB){if(vB===kB)return zx(vB),kB=Rx(vB.site),mj.insert(zB,kB),zB.edge=kB.edge=V_(vB.site,zB.site),Cx(vB),void Cx(kB);if(!kB)return void(zB.edge=V_(vB.site,zB.site));zx(vB),zx(kB);var TB=vB.site,RB=TB[0],PB=TB[1],AB=bB[0]-RB,OB=bB[1]-PB,MB=kB.site,DB=MB[0]-RB,qB=MB[1]-PB,LB=2*(AB*qB-OB*DB),UB=AB*AB+OB*OB,FB=DB*DB+qB*qB,jB=[(qB*UB-OB*FB)/LB+RB,(AB*FB-DB*UB)/LB+PB];Z_(kB.edge,TB,MB,jB),zB.edge=V_(TB,bB,null,jB),kB.edge=V_(bB,MB,null,jB),Cx(vB),Cx(kB)}}function Mx(bB,_B){var xB=bB.site,vB=xB[0],kB=xB[1],wB=kB-_B;if(!wB)return vB;var SB=bB.P;if(!SB)return-Infinity;xB=SB.site;var CB=xB[0],zB=xB[1],TB=zB-_B;if(!TB)return CB;var RB=CB-vB,PB=1/wB-1/TB,AB=RB/TB;return PB?(-AB+Math.sqrt(AB*AB-2*PB*(RB*RB/(-2*TB)-zB+TB/2+kB-wB/2)))/PB+vB:(vB+CB)/2}function Dx(bB,_B){var xB=bB.N;if(xB)return Mx(xB,_B);var vB=bB.site;return vB[1]===_B?vB[0]:Infinity}function qx(bB,_B,xB){return(bB[0]-xB[0])*(_B[1]-bB[1])-(bB[0]-_B[0])*(xB[1]-bB[1])}function Lx(bB,_B){return _B[1]-bB[1]||_B[0]-bB[0]}function Ux(bB,_B){var xB=bB.sort(Lx).pop(),vB,kB,wB;for(_j=[],hj=Array(bB.length),mj=new Y_,bj=new Y_;;)if(wB=fj,xB&&(!wB||xB[1]<wB.y||xB[1]===wB.y&&xB[0]<wB.x))(xB[0]!==vB||xB[1]!==kB)&&(Ox(xB),vB=xB[0],kB=xB[1]),xB=bB.pop();else if(wB)Ax(wB.arc);else break;if(wx(),_B){var SB=+_B[0][0],CB=+_B[0][1],zB=+_B[1][0],TB=+_B[1][1];ex(SB,CB,zB,TB),Ex(SB,CB,zB,TB)}this.edges=_j,this.cells=hj,mj=bj=_j=hj=null}function Fx(){function bB(kB){return new Ux(kB.map(function(wB,SB){var CB=[Math.round(_B(wB,SB,kB)/uj)*uj,Math.round(xB(wB,SB,kB)/uj)*uj];return CB.index=SB,CB.data=wB,CB}),vB)}var _B=N_,xB=B_,vB=null;return bB.polygons=function(kB){return bB(kB).polygons()},bB.links=function(kB){return bB(kB).links()},bB.triangles=function(kB){return bB(kB).triangles()},bB.x=function(kB){return arguments.length?(_B='function'===typeof kB?kB:$_(+kB),bB):_B},bB.y=function(kB){return arguments.length?(xB='function'===typeof kB?kB:$_(+kB),bB):xB},bB.extent=function(kB){return arguments.length?(vB=null==kB?null:[[+kB[0][0],+kB[0][1]],[+kB[1][0],+kB[1][1]]],bB):vB&&[[vB[0][0],vB[0][1]],[vB[1][0],vB[1][1]]]},bB.size=function(kB){return arguments.length?(vB=null==kB?null:[[0,0],[+kB[0],+kB[1]]],bB):vB&&[vB[1][0]-vB[0][0],vB[1][1]-vB[0][1]]},bB}function jx(bB){Rl.call(this,null,bB)}function Ix(){function bB(DB){DB.width=DB.height=1;var qB=Math.sqrt(DB.getContext('2d').getImageData(0,0,1,1).data.length>>2);DB.width=(Sj<<5)/qB,DB.height=Cj/qB;var LB=DB.getContext('2d');return LB.fillStyle=LB.strokeStyle='red',LB.textAlign='center',{context:LB,ratio:qB}}function _B(DB,qB,LB){for(var UB=qB.x,FB=qB.y,jB=Math.sqrt(xB[0]*xB[0]+xB[1]*xB[1]),IB=RB(xB),$B=.5>AB()?1:-1,NB=-$B,BB,YB,GB;(BB=IB(NB+=$B))&&(YB=~~BB[0],GB=~~BB[1],!(Math.min(Math.abs(YB),Math.abs(GB))>=jB));)if(qB.x=UB+YB,qB.y=FB+GB,!(0>qB.x+qB.x0||0>qB.y+qB.y0||qB.x+qB.x1>xB[0]||qB.y+qB.y1>xB[1])&&(!LB||!Nx(qB,DB,xB[0]))&&(!LB||Yx(qB,LB))){for(var WB=qB.sprite,HB=qB.width>>5,XB=xB[0]>>5,VB=qB.x-(HB<<4),JB=127&VB,KB=qB.y1-qB.y0,QB=(qB.y+qB.y0)*XB+(VB>>5),tY=0,eY;tY<KB;tY++){eY=0;for(var nY=0;nY<=HB;nY++)DB[QB+nY]|=eY<<32-JB|(nY<HB?(eY=WB[tY*HB+nY])>>>JB:0);QB+=XB}return qB.sprite=null,!0}return!1}var xB=[256,256],RB=Gx,PB=[],AB=Math.random,OB={},vB,kB,wB,SB,CB,zB,TB;return OB.layout=function(){for(var DB=bB(Xx()),qB=Hx((xB[0]>>5)*xB[1]),LB=null,UB=PB.length,FB=-1,jB=[],IB=PB.map(function(NB){return{text:vB(NB),font:kB(NB),style:SB(NB),weight:CB(NB),rotate:zB(NB),size:~~wB(NB),padding:TB(NB),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:NB}}).sort(function(NB,BB){return BB.size-NB.size}),$B;++FB<UB;)$B=IB[FB],$B.x=xB[0]*(AB()+.5)>>1,$B.y=xB[1]*(AB()+.5)>>1,$x(DB,$B,IB,FB),$B.hasText&&_B(qB,$B,LB)&&(jB.push($B),LB?Bx(LB,$B):LB=[{x:$B.x+$B.x0,y:$B.y+$B.y0},{x:$B.x+$B.x1,y:$B.y+$B.y1}],$B.x-=xB[0]>>1,$B.y-=xB[1]>>1);return jB},OB.words=function(DB){return arguments.length?(PB=DB,OB):PB},OB.size=function(DB){return arguments.length?(xB=[+DB[0],+DB[1]],OB):xB},OB.font=function(DB){return arguments.length?(kB=Vx(DB),OB):kB},OB.fontStyle=function(DB){return arguments.length?(SB=Vx(DB),OB):SB},OB.fontWeight=function(DB){return arguments.length?(CB=Vx(DB),OB):CB},OB.rotate=function(DB){return arguments.length?(zB=Vx(DB),OB):zB},OB.text=function(DB){return arguments.length?(vB=Vx(DB),OB):vB},OB.spiral=function(DB){return arguments.length?(RB=zj[DB]||DB,OB):RB},OB.fontSize=function(DB){return arguments.length?(wB=Vx(DB),OB):wB},OB.padding=function(DB){return arguments.length?(TB=Vx(DB),OB):TB},OB.random=function(DB){return arguments.length?(AB=DB,OB):AB},OB}function $x(bB,_B,xB,vB){if(!_B.sprite){var kB=bB.context,wB=bB.ratio;kB.clearRect(0,0,(Sj<<5)/wB,Cj/wB);var SB=0,CB=0,zB=0,TB=xB.length,RB,PB,AB,OB,MB;for(--vB;++vB<TB;){if(_B=xB[vB],kB.save(),kB.font=_B.style+' '+_B.weight+' '+~~((_B.size+1)/wB)+'px '+_B.font,RB=kB.measureText(_B.text+'m').width*wB,AB=_B.size<<1,_B.rotate){var DB=Math.sin(_B.rotate*Ej),qB=Math.cos(_B.rotate*Ej),LB=RB*qB,UB=RB*DB,FB=AB*qB,jB=AB*DB;RB=Math.max(Math.abs(LB+jB),Math.abs(LB-jB))+31>>5<<5,AB=~~Math.max(Math.abs(UB+FB),Math.abs(UB-FB))}else RB=RB+31>>5<<5;if(AB>zB&&(zB=AB),SB+RB>=Sj<<5&&(SB=0,CB+=zB,zB=0),CB+AB>=Cj)break;kB.translate((SB+(RB>>1))/wB,(CB+(AB>>1))/wB),_B.rotate&&kB.rotate(_B.rotate*Ej),kB.fillText(_B.text,0,0),_B.padding&&(kB.lineWidth=2*_B.padding,kB.strokeText(_B.text,0,0)),kB.restore(),_B.width=RB,_B.height=AB,_B.xoff=SB,_B.yoff=CB,_B.x1=RB>>1,_B.y1=AB>>1,_B.x0=-_B.x1,_B.y0=-_B.y1,_B.hasText=!0,SB+=RB}for(var IB=kB.getImageData(0,0,(Sj<<5)/wB,Cj/wB).data,$B=[];0<=--vB;)if(_B=xB[vB],_B.hasText){for(RB=_B.width,PB=RB>>5,AB=_B.y1-_B.y0,OB=0;OB<AB*PB;OB++)$B[OB]=0;if(SB=_B.xoff,null==SB)return;CB=_B.yoff;var NB=0,BB=-1;for(MB=0;MB<AB;MB++){for(OB=0;OB<RB;OB++){var YB=PB*MB+(OB>>5),GB=IB[(CB+MB)*(Sj<<5)+(SB+OB)<<2]?1<<31-OB%32:0;$B[YB]|=GB,NB|=GB}NB?BB=MB:(_B.y0++,AB--,MB--,CB++)}_B.y1=_B.y0+BB,_B.sprite=$B.slice(0,(_B.y1-_B.y0)*PB)}}}function Nx(bB,_B,xB){xB>>=5;for(var vB=bB.sprite,kB=bB.width>>5,wB=bB.x-(kB<<4),SB=127&wB,zB=bB.y1-bB.y0,TB=(bB.y+bB.y0)*xB+(wB>>5),PB=0,RB;PB<zB;PB++){RB=0;for(var AB=0;AB<=kB;AB++)if((RB<<32-SB|(AB<kB?(RB=vB[PB*kB+AB])>>>SB:0))&_B[TB+AB])return!0;TB+=xB}return!1}function Bx(bB,_B){var xB=bB[0],vB=bB[1];_B.x+_B.x0<xB.x&&(xB.x=_B.x+_B.x0),_B.y+_B.y0<xB.y&&(xB.y=_B.y+_B.y0),_B.x+_B.x1>vB.x&&(vB.x=_B.x+_B.x1),_B.y+_B.y1>vB.y&&(vB.y=_B.y+_B.y1)}function Yx(bB,_B){return bB.x+bB.x1>_B[0].x&&bB.x+bB.x0<_B[1].x&&bB.y+bB.y1>_B[0].y&&bB.y+bB.y0<_B[1].y}function Gx(bB){var _B=bB[0]/bB[1];return function(xB){return[_B*(xB*=.1)*Math.cos(xB),xB*Math.sin(xB)]}}function Hx(bB){for(var _B=[],xB=-1;++xB<bB;)_B[xB]=0;return _B}function Xx(){try{return'undefined'!==typeof document&&document.createElement?document.createElement('canvas'):new(require('canvas'))}catch(bB){ke('Canvas unavailable. Run in browser or install node-canvas.')}}function Vx(bB){return'function'===typeof bB?bB:function(){return bB}}function Jx(bB){Rl.call(this,Ix(),bB)}function Zx(bB,_B){var xB=new AA.Extent;return xB.transform({field:bB,modified:dT},_B),xB.value}function Kx(bB){return new Uint8Array(bB)}function Qx(bB){return new Uint16Array(bB)}function ev(bB){return new Uint32Array(bB)}function tv(){var bB=8,_B=[],xB=ev(0),vB=iv(0,bB),kB=iv(0,bB);return{data:function(){return _B},seen:function(){return xB=nv(xB,_B.length)},add:function(SB){for(var CB=0,zB=_B.length,TB=SB.length,RB;CB<TB;++CB)RB=SB[CB],RB._index=zB++,_B.push(RB)},remove:function(SB,CB){var zB=_B.length,TB=Array(zB-SB),RB=_B,PB,AB,OB;for(AB=0;!CB[AB]&&AB<zB;++AB)TB[AB]=_B[AB],RB[AB]=AB;for(OB=AB;AB<zB;++AB)PB=_B[AB],CB[AB]?RB[AB]=-1:(RB[AB]=OB,vB[OB]=vB[AB],kB[OB]=kB[AB],TB[OB]=PB,PB._index=OB++),vB[AB]=0;return _B=TB,RB},size:function(){return _B.length},curr:function(){return vB},prev:function(){return kB},reset:function(SB){kB[SB]=vB[SB]},all:function(){return 257>bB?255:65537>bB?65535:4294967295},set:function(SB,CB){vB[SB]|=CB},clear:function(SB,CB){vB[SB]&=~CB},resize:function(SB,CB){var zB=vB.length;(SB>zB||CB>bB)&&(bB=Math.max(CB,bB),vB=iv(SB,bB,vB),kB=iv(SB,bB))}}}function nv(bB,_B,xB){return bB.length>=_B?bB:(xB=xB||new bB.constructor(_B),xB.set(bB),xB)}function iv(bB,_B,xB){var vB=(257>_B?Kx:65537>_B?Qx:ev)(bB);return xB&&vB.set(xB),vB}function dv(bB,_B,xB){var vB=1<<_B;return{one:vB,zero:~vB,range:xB.slice(),bisect:bB.bisect,index:bB.index,size:bB.size,onAdd:function(wB,SB){var CB=this,zB=CB.bisect(CB.range,wB.value),TB=wB.index,RB=zB[0],PB=zB[1],AB=TB.length,OB;for(OB=0;OB<RB;++OB)SB[TB[OB]]|=vB;for(OB=PB;OB<AB;++OB)SB[TB[OB]]|=vB;return CB}}}function ov(){var kB=ev(0),wB=[],SB=0;return{insert:function(CB,zB,TB){if(!zB.length)return[];var RB=SB,PB=zB.length,AB=Array(PB),OB=ev(PB),MB,DB,qB;for(qB=0;qB<PB;++qB)AB[qB]=CB(zB[qB]),OB[qB]=qB;if(AB=lv(AB,OB),RB)MB=wB,DB=kB,wB=Array(RB+PB),kB=ev(RB+PB),sv(TB,MB,DB,RB,AB,OB,PB,wB,kB);else{if(0<TB)for(qB=0;qB<PB;++qB)OB[qB]+=TB;wB=AB,kB=OB}return SB=RB+PB,{index:OB,value:AB}},remove:function(CB,zB){var TB=SB,RB,PB,AB;for(PB=0;!zB[kB[PB]]&&PB<TB;++PB);for(AB=PB;PB<TB;++PB)zB[RB=kB[PB]]||(kB[AB]=RB,wB[AB]=wB[PB],++AB);SB=TB-CB},bisect:function(CB,zB){var TB=zB?zB.length:(zB=wB,SB);return[Vz(zB,CB[0],0,TB),Xz(zB,CB[1],0,TB)]},reindex:function(CB){for(var zB=0,TB=SB;zB<TB;++zB)kB[zB]=CB[kB[zB]]},index:function(){return kB},size:function(){return SB}}}function lv(bB,_B){return bB.sort.call(_B,function(xB,vB){var kB=bB[xB],wB=bB[vB];return kB<wB?-1:kB>wB?1:0}),se(bB,_B)}function sv(bB,_B,xB,vB,kB,wB,SB,CB,zB){var TB=0,RB=0,PB;for(PB=0;TB<vB&&RB<SB;++PB)_B[TB]<kB[RB]?(CB[PB]=_B[TB],zB[PB]=xB[TB++]):(CB[PB]=kB[RB],zB[PB]=wB[RB++]+bB);for(;TB<vB;++TB,++PB)CB[PB]=_B[TB],zB[PB]=xB[TB];for(;RB<SB;++RB,++PB)CB[PB]=kB[RB],zB[PB]=wB[RB]+bB}function fv(bB){Rl.call(this,tv(),bB),this._indices=null,this._dims=null}function cv(bB){Rl.call(this,null,bB)}function uv(bB){Rl.call(this,null,bB)}function pv(bB,_B,xB){return bB.bounds_prev.clear().union(bB.bounds),_B(bB.bounds.clear(),bB,xB)}function gv(bB){Rl.call(this,null,bB)}function mv(bB){var _B=bB.groups,xB=bB.parent;return _B&&1===_B.size?_B.get(Object.keys(_B.object)[0]):_B&&xB?_B.lookup(xB):null}function hv(bB){Rl.call(this,null,bB)}function yv(bB){for(var _B=bB.items,xB=_B.length,vB=0,SB={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null},kB,wB;vB<xB;++vB)if(kB=_B[vB],wB=kB.items,'group'===kB.marktype)switch(kB.role){case Ij:case $j:break;case Nj:_v(wB,SB.rowheaders);break;case Bj:_v(wB,SB.rowfooters);break;case Gj:_v(wB,SB.colheaders);break;case Wj:_v(wB,SB.colfooters);break;case Yj:SB.rowtitle=wB[0];break;case Hj:SB.coltitle=wB[0];break;default:_v(wB,SB.marks);}return SB}function _v(bB,_B){for(var xB=0,vB=bB.length;xB<vB;++xB)_B.push(bB[xB])}function xv(bB){return{x1:0,y1:0,x2:bB.width||0,y2:bB.height||0}}function vv(bB){return bB.bounds.clone().translate(-(bB.x||0),-(bB.y||0))}function kv(bB,_B){var xB={x1:bB.x,y1:bB.y,x2:bB.x+bB.width,y2:bB.y+bB.height};return xB[_B]}function wv(bB,_B){return bB.bounds[_B]}function Ev(bB,_B,xB){return(Ee(bB)?bB[_B]:bB)||xB||0}function Sv(bB,_B,xB){function vB(QB,eY){return Math.floor(Math.min(QB,eY))}function kB(QB,eY){return Math.ceil(Math.max(QB,eY))}var wB=yv(_B,xB),SB=wB.marks,CB='flush'===xB.bounds,zB=CB?xv:vv,TB=new Pa(0,0,0,0),RB=Ev(xB.align,'column'),PB=Ev(xB.align,'row'),AB=Ev(xB.padding,'column'),OB=Ev(xB.padding,'row'),MB=xB.offset,DB=xB.columns||SB.length,qB=0>DB?1:Math.ceil(SB.length/DB),UB=[],jB=[],$B=SB.length,NB,BB,YB,GB,WB,HB,XB,VB,JB,ZB,KB;for(BB=0;BB<$B;++BB)GB=zB(SB[BB]),HB=0===BB%DB?0:Math.ceil(zB(SB[BB-1]).x2),XB=BB<DB?0:Math.ceil(zB(SB[BB-DB]).y2),VB=(0>GB.x1?Math.ceil(-GB.x1):0)+HB,JB=(0>GB.y1?Math.ceil(-GB.y1):0)+XB,UB.push(VB+AB),jB.push(JB+OB);for(BB=0;BB<$B;++BB)0===BB%DB&&(UB[BB]=0),BB<DB&&(jB[BB]=0);if('each'===RB)for(YB=1;YB<DB;++YB){for(KB=0,BB=YB;BB<$B;BB+=DB)KB<UB[BB]&&(KB=UB[BB]);for(BB=YB;BB<$B;BB+=DB)UB[BB]=KB}else if('all'===RB){for(KB=0,BB=0;BB<$B;++BB)BB%DB&&KB<UB[BB]&&(KB=UB[BB]);for(BB=0;BB<$B;++BB)BB%DB&&(UB[BB]=KB)}if('each'===PB)for(YB=1;YB<qB;++YB){for(KB=0,BB=YB*DB,NB=BB+DB;BB<NB;++BB)KB<jB[BB]&&(KB=jB[BB]);for(BB=YB*DB;BB<NB;++BB)jB[BB]=KB}else if('all'===PB){for(KB=0,BB=DB;BB<$B;++BB)KB<jB[BB]&&(KB=jB[BB]);for(BB=DB;BB<$B;++BB)jB[BB]=KB}for(VB=0,BB=0;BB<$B;++BB)WB=SB[BB],HB=WB.x||0,WB.x=VB=UB[BB]+(BB%DB?VB:0),WB.bounds.translate(VB-HB,0);for(YB=0;YB<DB;++YB)for(JB=0,BB=YB;BB<$B;BB+=DB)WB=SB[BB],XB=WB.y||0,WB.y=JB+=jB[BB],WB.bounds.translate(0,JB-XB);for(bB.enqueue(SB),BB=0;BB<$B;++BB)SB[BB].mark.bounds.clear();for(BB=0;BB<$B;++BB)WB=SB[BB],TB.union(WB.mark.bounds.union(WB.bounds));zB=CB?kv:wv,VB=Cv(bB,wB.rowheaders,SB,DB,qB,-Ev(MB,'rowHeader'),vB,0,zB,'x1',0,DB,1),JB=Cv(bB,wB.colheaders,SB,DB,DB,-Ev(MB,'columnHeader'),vB,1,zB,'y1',0,1,DB),Cv(bB,wB.rowfooters,SB,DB,qB,Ev(MB,'rowFooter'),kB,0,zB,'x2',DB-1,DB,1),Cv(bB,wB.colfooters,SB,DB,DB,Ev(MB,'columnFooter'),kB,1,zB,'y2',qB*DB-DB,1,DB),wB.rowtitle&&(KB=VB-Ev(MB,'rowTitle'),ZB=Ev(xB.titleBand,'row',0.5),zv(bB,wB.rowtitle,KB,0,TB,ZB)),wB.coltitle&&(KB=JB-Ev(MB,'columnTitle'),ZB=Ev(xB.titleBand,'column',0.5),zv(bB,wB.coltitle,KB,1,TB,ZB))}function Cv(bB,_B,xB,vB,kB,wB,SB,CB,zB,TB,RB,PB,AB){var OB=xB.length,MB=0,DB=0,qB,LB,UB,FB,jB,IB,$B,NB,BB;for(qB=RB;qB<OB;qB+=PB)xB[qB]&&(MB=SB(MB,zB(xB[qB],TB)));if(!_B.length)return MB;for(_B.length>kB&&(bB.warn('Grid headers exceed limit: '+kB),_B=_B.slice(0,kB)),MB+=wB,(LB=0,FB=_B.length);LB<FB;++LB)_B[LB].mark.bounds.clear();for(qB=RB,LB=0,FB=_B.length;LB<FB;++LB,qB+=PB){for(IB=_B[LB],jB=IB.mark.bounds,UB=qB;null==($B=xB[UB]);UB-=AB);CB?(NB=$B.x,BB=MB):(NB=MB,BB=$B.y),jB.union(IB.bounds.translate(NB-(IB.x||0),BB-(IB.y||0))),IB.x=NB,IB.y=BB,DB=SB(DB,jB[TB])}return bB.enqueue(_B),DB}function zv(bB,_B,xB,vB,kB,wB){if(_B){var SB=xB,CB=xB;vB?SB=Math.round(kB.x1+wB*kB.width()):CB=Math.round(kB.y1+wB*kB.height()),_B.bounds.translate(SB-(_B.x||0),CB-(_B.y||0)),_B.mark.bounds.clear().union(_B.bounds),_B.x=SB,_B.y=CB,bB.enqueue(_B.mark.items)}}function Tv(bB){Rl.call(this,null,bB)}function Rv(bB,_B,xB){var vB=_B.items,kB=Math.max(0,_B.width||0),wB=Math.max(0,_B.height||0),SB=new Pa().set(0,0,kB,wB),CB=SB.clone(),zB=SB.clone(),TB=[],RB,PB,AB,OB,MB,DB;for(MB=0,DB=vB.length;MB<DB;++MB)switch(PB=vB[MB],PB.role){case Zj:CB.union(OB=Mv(bB,PB,kB,wB)),Av(PB)&&zB.union(OB);break;case Kj:RB=PB;break;case eI:TB.push(PB);break;case Qj:case tI:case nI:case aI:case iI:case dI:zB.union(PB.bounds);break;default:SB.union(PB.bounds);}if(RB&&(CB.union(OB=Dv(bB,RB,CB)),Av(RB)&&zB.union(OB)),TB.length)for(AB={left:0,right:0,margin:xB.legendMargin||8},MB=0,DB=TB.length;MB<DB;++MB)OB=qv(bB,TB[MB],AB,zB,kB,wB),xB.autosize&&xB.autosize.type===Xj?SB.add(OB.x1,0).add(OB.x2,0):SB.union(OB);Lv(bB,_B,SB.union(zB).union(CB),xB)}function Pv(bB,_B,xB){return bB[_B]===xB?0:(bB[_B]=xB,1)}function Av(bB){var _B=bB.items[0].datum.orient;return'left'===_B||'right'===_B}function Ov(bB){var _B=+bB.grid;return[bB.ticks?_B++:-1,bB.labels?_B++:-1,_B+ +bB.domain]}function Mv(bB,_B,xB,vB){var kB=_B.items[0],wB=kB.datum,SB=wB.orient,CB=Ov(wB),zB=kB.range,TB=kB.offset,RB=kB.position,PB=kB.minExtent,AB=kB.maxExtent,OB=wB.title&&kB.items[CB[2]].items[0],MB=kB.titlePadding,DB=OB?OB.fontSize+MB:0,qB=kB.bounds,LB=0,UB=0,FB,jB;return qB.clear(),-1<(FB=CB[0])&&qB.union(kB.items[FB].bounds),-1<(FB=CB[1])&&qB.union(kB.items[FB].bounds),'top'===SB?(LB=RB||0,UB=-TB,jB=Math.max(PB,Math.min(AB,-qB.y1)),OB&&(OB.auto?(OB.y=-(MB+jB),jB+=DB):qB.union(OB.bounds)),qB.add(0,-jB).add(zB,0)):'left'===SB?(LB=-TB,UB=RB||0,jB=Math.max(PB,Math.min(AB,-qB.x1)),OB&&(OB.auto?(OB.x=-(MB+jB),jB+=DB):qB.union(OB.bounds)),qB.add(-jB,0).add(0,zB)):'right'===SB?(LB=xB+TB,UB=RB||0,jB=Math.max(PB,Math.min(AB,qB.x2)),OB&&(OB.auto?(OB.x=MB+jB,jB+=DB):qB.union(OB.bounds)),qB.add(0,0).add(jB,zB)):'bottom'===SB?(LB=RB||0,UB=vB+TB,jB=Math.max(PB,Math.min(AB,qB.y2)),OB&&(OB.auto?(OB.y=MB+jB,jB+=DB):qB.union(OB.bounds)),qB.add(0,0).add(zB,jB)):(LB=kB.x,UB=kB.y),(Pv(kB,'x',LB+0.5)|Pv(kB,'y',UB+0.5)&&bB.enqueue([kB]),qd(qB.translate(LB,UB),kB),kB.mark.bounds.clear().union(qB))}function Dv(bB,_B,xB){var vB=_B.items[0],kB=vB.datum,wB=kB.orient,SB=vB.offset,CB=vB.bounds,zB=0,TB=0;return'top'===wB?(zB=vB.x,TB=xB.y1-SB):'left'===wB?(zB=xB.x1-SB,TB=vB.y):'right'===wB?(zB=xB.x2+SB,TB=vB.y):'bottom'===wB?(zB=vB.x,TB=xB.y2+SB):(zB=vB.x,TB=vB.y),CB.translate(zB-vB.x,TB-vB.y),Pv(vB,'x',zB)|Pv(vB,'y',TB)&&bB.enqueue([vB]),_B.bounds.clear().union(CB)}function qv(bB,_B,xB,vB,kB,wB){var SB=_B.items[0],CB=SB.datum,zB=CB.orient,TB=SB.offset,RB=SB.bounds.clear(),PB=0,AB=xB[zB]||0,OB,MB;return SB.items.forEach(function(DB){RB.union(DB.bounds)}),OB=Math.round(RB.width())+2*SB.padding-1,MB=Math.round(RB.height())+2*SB.padding-1,'left'===zB?(PB-=OB+TB-Math.floor(vB.x1),xB.left+=MB+xB.margin):'right'===zB?(PB+=TB+Math.ceil(vB.x2),xB.right+=MB+xB.margin):'top-left'===zB?(PB+=TB,AB+=TB):'top-right'===zB?(PB+=kB-OB-TB,AB+=TB):'bottom-left'===zB?(PB+=TB,AB+=wB-MB-TB):'bottom-right'===zB?(PB+=kB-OB-TB,AB+=wB-MB-TB):(PB=SB.x,AB=SB.y),(Pv(SB,'x',PB)|Pv(SB,'width',OB)|Pv(SB,'y',AB)|Pv(SB,'height',MB)&&bB.enqueue([SB]),qd(RB.set(PB,AB,PB+OB,AB+MB),SB),SB.mark.bounds.clear().union(RB))}function Lv(bB,_B,xB,vB){var kB=vB.autosize&&vB.autosize.type,wB=vB.autosize&&vB.autosize.resize,SB=bB._width,CB=bB._height;if(!(1>bB._autosize)&&kB){var zB=Math.max(0,_B.width||0),TB=Math.max(0,Math.ceil(-xB.x1)),RB=Math.max(0,Math.ceil(xB.x2-zB)),PB=Math.max(0,_B.height||0),AB=Math.max(0,Math.ceil(-xB.y1)),OB=Math.max(0,Math.ceil(xB.y2-PB));kB===Jj?(SB=zB,CB=PB,TB=0,AB=0):kB===Xj?(zB=Math.max(0,SB-TB-RB),PB=Math.max(0,CB-AB-OB)):kB===Vj&&(SB=zB+TB+RB,CB=PB+AB+OB),bB.autosize(SB,CB,zB,PB,[TB,AB],wB)}}function Uv(bB){var _B=bB._signals.cursor;_B||(bB._signals.cursor=_B=bB.add({user:oI,item:null})),bB.on(bB.events('view','mousemove'),_B,function(xB,vB){var kB=_B.value,wB=kB?Se(kB)?kB:kB.user:oI,SB=vB.item&&vB.item.cursor||null;return kB&&wB===kB.user&&SB==kB.item?kB:{user:wB,item:SB}}),bB.add(null,function(xB){var vB=xB.cursor,kB=this.value;return Se(vB)||(kB=vB.item,vB=vB.user),Fv(vB&&vB!==oI?vB:kB||vB),kB},{cursor:_B})}function Fv(bB){'undefined'!==typeof document&&document.body&&(document.body.style.cursor=bB)}function jv(bB,_B){var xB=bB._runtime.data;return xB.hasOwnProperty(_B)||bB.error('Unrecognized data set: '+_B),xB[_B]}function $v(bB,_B){Yo(_B)||this.error('Second argument to changes must be a changeset.');var xB=jv(this,bB);return xB.modified=!0,this.pulse(xB.input,_B)}function Yv(bB){var _B=bB.padding();return Math.max(0,bB._width+_B.left+_B.right)}function Gv(bB){var _B=bB.padding();return Math.max(0,bB._height+_B.top+_B.bottom)}function Wv(bB){var _B=bB.padding(),xB=bB._origin;return[_B.left+xB[0],_B.top+xB[1]]}function Hv(bB){var _B=Wv(bB);bB._renderer.background(bB._background),bB._renderer.resize(Yv(bB),Gv(bB),_B),bB._handler.origin(_B)}function Xv(bB,_B,xB){var vB=bB._renderer.element(),kB,wB,SB;return vB&&(SB=Wv(bB),wB=_B.changedTouches?_B.changedTouches[0]:_B,kB=oo(wB,vB),kB[0]-=SB[0],kB[1]-=SB[1]),_B.vega=Vv(bB,xB,kB),_B.item=xB,_B}function Vv(bB,_B,xB){function vB(SB){var CB=wB,zB;if(SB)for(zB=_B;zB;zB=zB.mark.group)if(zB.mark.name===SB){CB=zB;break}return CB&&CB.mark&&CB.mark.interactive?CB:{}}function kB(SB){if(!SB)return xB;Se(SB)&&(SB=vB(SB));for(var CB=xB.slice();SB;)CB[0]-=SB.x||0,CB[1]-=SB.y||0,SB=SB.mark&&SB.mark.group;return CB}var wB=_B?'group'===_B.mark.marktype?_B:_B.mark.group:null;return{view:Me(bB),item:Me(_B||{}),group:vB,xy:kB,x:function(CB){return kB(CB)[0]},y:function(CB){return kB(CB)[1]}}}function Zv(bB){return bB.item}function Kv(bB){var _B=bB.item.mark.source;return _B.source||_B}function Qv(bB){return function(_B,xB){return xB.vega.view().changeset().encode(xB.item,bB)}}function nk(bB,_B,xB){var vB=document.createElement(bB);for(var kB in _B)vB.setAttribute(kB,_B[kB]);return null!=xB&&(vB.textContent=xB),vB}function ak(bB,_B,xB){var vB=xB.param,kB=xB.state||(xB.state={elements:null,set:null,update:function(SB){kB.source=!0,bB.signal(vB.signal,SB).run()},active:!1});return Se(_B)&&(_B=document.querySelector(_B)),ik(kB,_B,vB,bB.signal(vB.signal)),kB.active||(bB.on(bB._signals[vB.signal],null,function(){kB.source?kB.source=!1:kB.set(bB.signal(vB.signal))}),kB.active=!0),kB}function ik(bB,_B,xB,vB){var kB=nk('div',{class:fI});kB.appendChild(nk('span',{class:cI},xB.name||xB.signal)),_B.appendChild(kB);var wB=dk;switch(xB.input){case'checkbox':wB=rk;break;case'select':wB=ok;break;case'radio':wB=lk;break;case'range':wB=fk;}wB(bB,kB,xB,vB)}function dk(bB,_B,xB,vB){var kB=nk('input');for(var wB in xB)'signal'!==wB&&'element'!==wB&&kB.setAttribute('input'===wB?'type':wB,xB[wB]);kB.setAttribute('name',xB.signal),kB.value=vB,_B.appendChild(kB),kB.addEventListener('input',function(){bB.update(kB.value)}),bB.elements=[kB],bB.set=function(SB){kB.value=SB}}function rk(bB,_B,xB,vB){var kB={type:'checkbox',name:xB.signal};vB&&(kB.checked=!0);var wB=nk('input',kB);_B.appendChild(wB),wB.addEventListener('change',function(){bB.update(wB.checked)}),bB.elements=[wB],bB.set=function(SB){wB.checked=!!SB||null}}function ok(bB,_B,xB,vB){var kB=nk('select',{name:xB.signal});xB.options.forEach(function(wB){var SB={value:wB};ck(wB,vB)&&(SB.selected=!0),kB.appendChild(nk('option',SB,wB+''))}),_B.appendChild(kB),kB.addEventListener('change',function(){bB.update(xB.options[kB.selectedIndex])}),bB.elements=[kB],bB.set=function(wB){for(var SB=0,CB=xB.options.length;SB<CB;++SB)if(ck(xB.options[SB],wB))return void(kB.selectedIndex=SB)}}function lk(bB,_B,xB,vB){var kB=nk('span',{class:uI});_B.appendChild(kB),bB.elements=xB.options.map(function(wB){var SB=pI+xB.signal+'-'+wB,CB={id:SB,type:'radio',name:xB.signal,value:wB};ck(wB,vB)&&(CB.checked=!0);var zB=nk('input',CB);return zB.addEventListener('change',function(){bB.update(wB)}),kB.appendChild(zB),kB.appendChild(nk('label',{for:SB},wB+'')),zB}),bB.set=function(wB){for(var SB=bB.elements,CB=0,zB=SB.length;CB<zB;++CB)ck(SB[CB].value,wB)&&(SB[CB].checked=!0)}}function fk(bB,_B,xB,vB){function kB(){TB.textContent=zB.value,bB.update(+zB.value)}vB=vB===void 0?(+xB.max+ +xB.min)/2:vB;var wB=xB.min||Math.min(0,+vB)||0,SB=xB.max||Math.max(100,+vB)||100,CB=xB.step||ee(wB,SB,100),zB=nk('input',{type:'range',name:xB.signal,min:wB,max:SB,step:CB});zB.value=vB;var TB=nk('label',{},+vB);_B.appendChild(zB),_B.appendChild(TB),zB.addEventListener('input',kB),zB.addEventListener('change',kB),bB.elements=[zB],bB.set=function(RB){zB.value=RB,TB.textContent=RB}}function ck(bB,_B){return bB===_B||bB+''===_B+''}function uk(bB,_B,xB,vB){return _B=_B||new vB(bB.loader()),_B.initialize(xB,Yv(bB),Gv(bB),Wv(bB)).background(bB._background)}function pk(bB,_B,xB,vB){var kB=new vB().scene(bB.scenegraph().root).initialize(xB,Wv(bB),bB);return _B&&(kB.handleTooltip=_B.handleTooltip,_B.handlers().forEach(function(wB){kB.on(wB.type,wB.handler)})),kB}function mk(bB,_B){return'string'===typeof _B&&(_B='undefined'===typeof document?bB.error('DOM document instance not found.'):document.querySelector(_B)),_B.innerHTML='',_B}function hk(bB,_B){var xB=Mo(_B);return xB&&xB.headless?bB.runAsync().then(function(){return uk(bB,null,null,xB.headless).renderAsync(bB._scenegraph.root)}):Promise.reject('Unrecognized renderer type: '+_B)}function _k(bB,_B){var xB=new Blob([bB],{type:_B});return window.URL.createObjectURL(xB)}function wk(bB,_B){return bB=bB||_B.autosize,Ee(bB)?bB:(bB=bB||'pad',{type:bB})}function Ek(bB,_B){return bB=bB||_B.padding,Ee(bB)?bB:(bB=+bB||0,{top:bB,bottom:bB,left:bB,right:bB})}function Sk(bB,_B){ke(bB+' for "outer" push: '+Ce(_B))}function Ck(bB,_B){var xB=bB.name;if(bB.push===gI)_B.signals[xB]||Sk('No prior signal definition',xB),mI.forEach(function(kB){void 0!==bB[kB]&&Sk('Invalid property ',kB)});else{var vB=_B.addSignal(xB,bB.value);!1===bB.react&&(vB.react=!1),bB.bind&&_B.addBinding(xB,bB.bind)}}function zk(bB){this.type=bB}function Tk(bB){switch(bB.type){case'ArrayExpression':return bB.elements;case'BinaryExpression':case'LogicalExpression':return[bB.left,bB.right];case'CallExpression':var _B=bB.arguments.slice();return _B.unshift(bB.callee),_B;case'ConditionalExpression':return[bB.test,bB.consequent,bB.alternate];case'MemberExpression':return[bB.object,bB.property];case'ObjectExpression':return bB.properties;case'Property':return[bB.key,bB.value];case'UnaryExpression':return[bB.argument];case'Identifier':case'Literal':case'RawCode':default:return[];}}function Rk(bB,_B){if(!bB)throw new Error('ASSERT: '+_B)}function Pk(bB){return 48<=bB&&57>=bB}function Ak(bB){return 0<='0123456789abcdefABCDEF'.indexOf(bB)}function Ok(bB){return 0<='01234567'.indexOf(bB)}function Mk(bB){return 32===bB||9===bB||11===bB||12===bB||160===bB||5760<=bB&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(bB)}function Dk(bB){return 10===bB||13===bB||8232===bB||8233===bB}function qk(bB){return 36===bB||95===bB||65<=bB&&90>=bB||97<=bB&&122>=bB||92===bB||128<=bB&&ZI.test(String.fromCharCode(bB))}function Lk(bB){return 36===bB||95===bB||65<=bB&&90>=bB||97<=bB&&122>=bB||48<=bB&&57>=bB||92===bB||128<=bB&&KI.test(String.fromCharCode(bB))}function Uk(){for(var bB;yI<bI&&(bB=hI.charCodeAt(yI),Mk(bB)||Dk(bB));)++yI}function Fk(bB){var kB=0,_B,xB,vB;for(xB='u'===bB?4:2,_B=0;_B<xB;++_B)yI<bI&&Ak(hI[yI])?(vB=hI[yI++],kB=16*kB+'0123456789abcdef'.indexOf(vB.toLowerCase())):mw({},jI,VI);return String.fromCharCode(kB)}function jk(){var bB,_B,xB,vB;for(bB=hI[yI],_B=0,'}'===bB&&mw({},jI,VI);yI<bI&&(bB=hI[yI++],!!Ak(bB));)_B=16*_B+'0123456789abcdef'.indexOf(bB.toLowerCase());return((1114111<_B||'}'!==bB)&&mw({},jI,VI),65535>=_B)?String.fromCharCode(_B):(xB=(_B-65536>>10)+55296,vB=(1023&_B-65536)+56320,String.fromCharCode(xB,vB))}function Ik(){var bB,_B;for(bB=hI.charCodeAt(yI++),_B=String.fromCharCode(bB),92===bB&&(117!==hI.charCodeAt(yI)&&mw({},jI,VI),++yI,bB=Fk('u'),(!bB||'\\'===bB||!qk(bB.charCodeAt(0)))&&mw({},jI,VI),_B=bB);yI<bI&&(bB=hI.charCodeAt(yI),!!Lk(bB));)++yI,_B+=String.fromCharCode(bB),92===bB&&(_B=_B.substr(0,_B.length-1),117!==hI.charCodeAt(yI)&&mw({},jI,VI),++yI,bB=Fk('u'),(!bB||'\\'===bB||!Lk(bB.charCodeAt(0)))&&mw({},jI,VI),_B+=bB);return _B}function $k(){var bB,_B;for(bB=yI++;yI<bI;){if(_B=hI.charCodeAt(yI),92===_B)return yI=bB,Ik();if(Lk(_B))++yI;else break}return hI.slice(bB,yI)}function Nk(){var bB,_B,xB;return bB=yI,_B=92===hI.charCodeAt(yI)?Ik():$k(),xB=1===_B.length?kI:QI.hasOwnProperty(_B)?wI:'null'===_B?EI:'true'===_B||'false'===_B?xI:kI,{type:xB,value:_B,start:bB,end:yI}}function Bk(){var bB=yI,_B=hI.charCodeAt(yI),vB=hI[yI],xB,kB,wB,SB;switch(_B){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++yI,{type:CI,value:String.fromCharCode(_B),start:bB,end:yI};default:if(xB=hI.charCodeAt(yI+1),61===xB)switch(_B){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return yI+=2,{type:CI,value:String.fromCharCode(_B)+String.fromCharCode(xB),start:bB,end:yI};case 33:case 61:return yI+=2,61===hI.charCodeAt(yI)&&++yI,{type:CI,value:hI.slice(bB,yI),start:bB,end:yI};}}return(SB=hI.substr(yI,4),'>>>='===SB)?(yI+=4,{type:CI,value:SB,start:bB,end:yI}):(wB=SB.substr(0,3),'>>>'===wB||'<<='===wB||'>>='===wB)?(yI+=3,{type:CI,value:wB,start:bB,end:yI}):(kB=wB.substr(0,2),vB===kB[1]&&0<='+-<>&|'.indexOf(vB)||'=>'===kB?(yI+=2,{type:CI,value:kB,start:bB,end:yI}):0<='<>=!+-*%&|^/'.indexOf(vB)?(++yI,{type:CI,value:vB,start:bB,end:yI}):void mw({},jI,VI))}function Yk(bB){for(var _B='';yI<bI&&!!Ak(hI[yI]);)_B+=hI[yI++];return 0===_B.length&&mw({},jI,VI),qk(hI.charCodeAt(yI))&&mw({},jI,VI),{type:SI,value:parseInt('0x'+_B,16),start:bB,end:yI}}function Gk(bB){for(var _B='0'+hI[yI++];yI<bI&&!!Ok(hI[yI]);)_B+=hI[yI++];return(qk(hI.charCodeAt(yI))||Pk(hI.charCodeAt(yI)))&&mw({},jI,VI),{type:SI,value:parseInt(_B,8),octal:!0,start:bB,end:yI}}function Wk(){var bB,_B,xB;if(xB=hI[yI],Rk(Pk(xB.charCodeAt(0))||'.'===xB,'Numeric literal must start with a decimal digit or a decimal point'),_B=yI,bB='','.'!==xB){if(bB=hI[yI++],xB=hI[yI],'0'===bB){if('x'===xB||'X'===xB)return++yI,Yk(_B);if(Ok(xB))return Gk(_B);xB&&Pk(xB.charCodeAt(0))&&mw({},jI,VI)}for(;Pk(hI.charCodeAt(yI));)bB+=hI[yI++];xB=hI[yI]}if('.'===xB){for(bB+=hI[yI++];Pk(hI.charCodeAt(yI));)bB+=hI[yI++];xB=hI[yI]}if('e'===xB||'E'===xB)if(bB+=hI[yI++],xB=hI[yI],('+'===xB||'-'===xB)&&(bB+=hI[yI++]),Pk(hI.charCodeAt(yI)))for(;Pk(hI.charCodeAt(yI));)bB+=hI[yI++];else mw({},jI,VI);return qk(hI.charCodeAt(yI))&&mw({},jI,VI),{type:SI,value:parseFloat(bB),start:_B,end:yI}}function Hk(){var bB='',wB=!1,_B,xB,vB,kB;for(_B=hI[yI],Rk('\''===_B||'"'===_B,'String literal must starts with a quote'),xB=yI,++yI;yI<bI;)if(vB=hI[yI++],vB===_B){_B='';break}else if('\\'===vB)vB=hI[yI++],vB&&Dk(vB.charCodeAt(0))?'\r'===vB&&'\n'===hI[yI]&&++yI:'u'===vB||'x'===vB?'{'===hI[yI]?(++yI,bB+=jk()):bB+=Fk(vB):'n'===vB?bB+='\n':'r'===vB?bB+='\r':'t'===vB?bB+='\t':'b'===vB?bB+='\b':'f'===vB?bB+='\f':'v'===vB?bB+='\x0B':Ok(vB)?(kB='01234567'.indexOf(vB),0!==kB&&(wB=!0),yI<bI&&Ok(hI[yI])&&(wB=!0,kB=8*kB+'01234567'.indexOf(hI[yI++]),0<='0123'.indexOf(vB)&&yI<bI&&Ok(hI[yI])&&(kB=8*kB+'01234567'.indexOf(hI[yI++]))),bB+=String.fromCharCode(kB)):bB+=vB;else if(Dk(vB.charCodeAt(0)))break;else bB+=vB;return''!==_B&&mw({},jI,VI),{type:zI,value:bB,octal:wB,start:xB,end:yI}}function Xk(bB,_B){var xB=bB;0<=_B.indexOf('u')&&(xB=xB.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(vB,kB){return 1114111>=parseInt(kB,16)?'x':void mw({},GI)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,'x'));try{new RegExp(xB)}catch(vB){mw({},GI)}try{return new RegExp(bB,_B)}catch(vB){return null}}function Vk(){var bB,_B,xB,vB,kB;for(bB=hI[yI],Rk('/'===bB,'Regular expression literal must start with a slash'),_B=hI[yI++],xB=!1,vB=!1;yI<bI;)if(bB=hI[yI++],_B+=bB,'\\'===bB)bB=hI[yI++],Dk(bB.charCodeAt(0))&&mw({},WI),_B+=bB;else if(Dk(bB.charCodeAt(0)))mw({},WI);else if(xB)']'===bB&&(xB=!1);else if('/'===bB){vB=!0;break}else'['===bB&&(xB=!0);return vB||mw({},WI),kB=_B.substr(1,_B.length-2),{value:kB,literal:_B}}function Jk(){var bB,_B,xB;for(_B='',xB='';yI<bI&&(bB=hI[yI],!!Lk(bB.charCodeAt(0)));)++yI,'\\'===bB&&yI<bI?mw({},jI,VI):(xB+=bB,_B+=bB);return 0<=xB.search(/[^gimuy]/g)&&mw({},GI,xB),{value:xB,literal:_B}}function Zk(){var bB,_B,xB,vB;return _I=null,Uk(),bB=yI,_B=Vk(),xB=Jk(),vB=Xk(_B.value,xB.value),{literal:_B.literal+xB.literal,value:vB,regex:{pattern:_B.value,flags:xB.value},start:bB,end:yI}}function Kk(bB){return bB.type===kI||bB.type===wI||bB.type===xI||bB.type===EI}function Qk(){var bB;return(Uk(),yI>=bI)?{type:vI,start:yI,end:yI}:(bB=hI.charCodeAt(yI),qk(bB)?Nk():40===bB||41===bB||59===bB?Bk():39===bB||34===bB?Hk():46===bB?Pk(hI.charCodeAt(yI+1))?Wk():Bk():Pk(bB)?Wk():Bk())}function ew(){var bB;return bB=_I,yI=bB.end,_I=Qk(),yI=bB.end,bB}function tw(){var bB;bB=yI,_I=Qk(),yI=bB}function nw(bB){var _B=new zk(TI);return _B.elements=bB,_B}function aw(bB,_B,xB){var vB=new zk('||'===bB||'&&'===bB?DI:RI);return vB.operator=bB,vB.left=_B,vB.right=xB,vB}function iw(bB,_B){var xB=new zk(PI);return xB.callee=bB,xB.arguments=_B,xB}function dw(bB,_B,xB){var vB=new zk(AI);return vB.test=bB,vB.consequent=_B,vB.alternate=xB,vB}function rw(bB){var _B=new zk(OI);return _B.name=bB,_B}function ow(bB){var _B=new zk(MI);return _B.value=bB.value,_B.raw=hI.slice(bB.start,bB.end),bB.regex&&('//'===_B.raw&&(_B.raw='/(?:)/'),_B.regex=bB.regex),_B}function fw(bB,_B,xB){var vB=new zk(qI);return vB.computed='['===bB,vB.object=_B,vB.property=xB,vB.computed||(xB.member=!0),vB}function uw(bB){var _B=new zk(LI);return _B.properties=bB,_B}function pw(bB,_B,xB){var vB=new zk(UI);return vB.key=_B,vB.value=xB,vB.kind=bB,vB}function gw(bB,_B){var xB=new zk(FI);return xB.operator=bB,xB.argument=_B,xB.prefix=!0,xB}function mw(bB,_B){var vB=Array.prototype.slice.call(arguments,2),kB=_B.replace(/%(\d)/g,function(wB,SB){return Rk(SB<vB.length,'Message reference must be in range'),vB[SB]}),xB;throw xB=new Error(kB),xB.index=yI,xB.description=kB,xB}function hw(bB){bB.type===vI&&mw(bB,YI),bB.type===SI&&mw(bB,II),bB.type===zI&&mw(bB,$I),bB.type===kI&&mw(bB,NI),bB.type===wI&&mw(bB,BI),mw(bB,jI,bB.value)}function yw(bB){var _B=ew();(_B.type!==CI||_B.value!==bB)&&hw(_B)}function bw(bB){return _I.type===CI&&_I.value===bB}function _w(bB){return _I.type===wI&&_I.value===bB}function vw(){var bB=[];for(yI=_I.start,yw('[');!bw(']');)bw(',')?(ew(),bB.push(null)):(bB.push(Lw()),bw(']')||yw(','));return ew(),nw(bB)}function kw(){var bB;return yI=_I.start,bB=ew(),bB.type===zI||bB.type===SI?(bB.octal&&mw(bB,HI),ow(bB)):rw(bB.value)}function ww(){var bB,_B,xB,vB;return yI=_I.start,bB=_I,bB.type===kI?(xB=kw(),yw(':'),vB=Lw(),pw('init',xB,vB)):bB.type===vI||bB.type===CI?void hw(bB):(_B=kw(),yw(':'),vB=Lw(),pw('init',_B,vB))}function Ew(){var bB=[],kB={},wB=String,_B,xB,vB;for(yI=_I.start,yw('{');!bw('}');)_B=ww(),xB=_B.key.type===OI?_B.key.name:wB(_B.key.value),vB='$'+xB,Object.prototype.hasOwnProperty.call(kB,vB)?mw({},XI):kB[vB]=!0,bB.push(_B),bw('}')||yw(',');return yw('}'),uw(bB)}function Sw(){var bB;return yw('('),bB=Uw(),yw(')'),bB}function Cw(){var bB,_B,xB;if(bw('('))return Sw();if(bw('['))return vw();if(bw('{'))return Ew();if(bB=_I.type,yI=_I.start,bB===kI||e$[_I.value])xB=rw(ew().value);else if(bB===zI||bB===SI)_I.octal&&mw(_I,HI),xB=ow(ew());else if(bB===wI)throw new Error(JI);else bB===xI?(_B=ew(),_B.value='true'===_B.value,xB=ow(_B)):bB===EI?(_B=ew(),_B.value=null,xB=ow(_B)):bw('/')||bw('/=')?(xB=ow(Zk()),tw()):hw(ew());return xB}function zw(){var bB=[];if(yw('('),!bw(')'))for(;yI<bI&&(bB.push(Lw()),!bw(')'));)yw(',');return yw(')'),bB}function Tw(){var bB;return yI=_I.start,bB=ew(),Kk(bB)||hw(bB),rw(bB.value)}function Rw(){return yw('.'),Tw()}function Pw(){var bB;return yw('['),bB=Uw(),yw(']'),bB}function Aw(){var bB,_B,xB;for(bB=Cw();;)if(bw('.'))xB=Rw(),bB=fw('.',bB,xB);else if(bw('('))_B=zw(),bB=iw(bB,_B);else if(bw('['))xB=Pw(),bB=fw('[',bB,xB);else break;return bB}function Ow(){var bB=Aw();if(_I.type===CI&&(bw('++')||bw('--')))throw new Error(JI);return bB}function Mw(){var bB,_B;if(_I.type!==CI&&_I.type!==wI)_B=Ow();else if(bw('++')||bw('--'))throw new Error(JI);else if(bw('+')||bw('-')||bw('~')||bw('!'))bB=ew(),_B=Mw(),_B=gw(bB.value,_B);else if(_w('delete')||_w('void')||_w('typeof'))throw new Error(JI);else _B=Ow();return _B}function Dw(bB){var _B=0;if(bB.type!==CI&&bB.type!==wI)return 0;switch(bB.value){case'||':_B=1;break;case'&&':_B=2;break;case'|':_B=3;break;case'^':_B=4;break;case'&':_B=5;break;case'==':case'!=':case'===':case'!==':_B=6;break;case'<':case'>':case'<=':case'>=':case'instanceof':case'in':_B=7;break;case'<<':case'>>':case'>>>':_B=8;break;case'+':case'-':_B=9;break;case'*':case'/':case'%':_B=11;break;default:}return _B}function qw(){var bB,_B,xB,vB,kB,wB,SB,CB,zB,TB;if(bB=_I,zB=Mw(),vB=_I,kB=Dw(vB),0===kB)return zB;for(vB.prec=kB,ew(),_B=[bB,_I],SB=Mw(),wB=[zB,vB,SB];0<(kB=Dw(_I));){for(;2<wB.length&&kB<=wB[wB.length-2].prec;)SB=wB.pop(),CB=wB.pop().value,zB=wB.pop(),_B.pop(),xB=aw(CB,zB,SB),wB.push(xB);vB=ew(),vB.prec=kB,wB.push(vB),_B.push(_I),xB=Mw(),wB.push(xB)}for(TB=wB.length-1,xB=wB[TB],_B.pop();1<TB;)_B.pop(),xB=aw(wB[TB-1].value,wB[TB-2],xB),TB-=2;return xB}function Lw(){var bB,_B,xB;return bB=qw(),bw('?')&&(ew(),_B=Lw(),yw(':'),xB=Lw(),bB=dw(bB,_B,xB)),bB}function Uw(){var bB=Lw();if(bw(','))throw new Error(JI);return bB}function Fw(bB){hI=bB,yI=0,bI=hI.length,_I=null,tw();var _B=Uw();if(_I.type!==vI)throw new Error('Unexpect token after expression.');return _B}function jw(bB){function _B(SB,CB,zB,TB){var RB=bB(CB[0]);return zB&&(RB=zB+'('+RB+')',0===zB.lastIndexOf('new ',0)&&(RB='('+RB+')')),RB+'.'+SB+(0>TB?'':0===TB?'()':'('+CB.slice(1).map(bB).join(',')+')')}function xB(SB,CB,zB){return function(TB){return _B(SB,TB,CB,zB)}}var vB='new Date',kB='String',wB='RegExp';return{isNaN:'isNaN',isFinite:'isFinite',abs:'Math.abs',acos:'Math.acos',asin:'Math.asin',atan:'Math.atan',atan2:'Math.atan2',ceil:'Math.ceil',cos:'Math.cos',exp:'Math.exp',floor:'Math.floor',log:'Math.log',max:'Math.max',min:'Math.min',pow:'Math.pow',random:'Math.random',round:'Math.round',sin:'Math.sin',sqrt:'Math.sqrt',tan:'Math.tan',clamp:function(CB){3>CB.length&&ke('Missing arguments to clamp function.'),3<CB.length&&ke('Too many arguments to clamp function.');var zB=CB.map(bB);return'Math.max('+zB[1]+', Math.min('+zB[2]+','+zB[0]+'))'},now:'Date.now',utc:'Date.UTC',datetime:vB,date:xB('getDate',vB,0),day:xB('getDay',vB,0),year:xB('getFullYear',vB,0),month:xB('getMonth',vB,0),hours:xB('getHours',vB,0),minutes:xB('getMinutes',vB,0),seconds:xB('getSeconds',vB,0),milliseconds:xB('getMilliseconds',vB,0),time:xB('getTime',vB,0),timezoneoffset:xB('getTimezoneOffset',vB,0),utcdate:xB('getUTCDate',vB,0),utcday:xB('getUTCDay',vB,0),utcyear:xB('getUTCFullYear',vB,0),utcmonth:xB('getUTCMonth',vB,0),utchours:xB('getUTCHours',vB,0),utcminutes:xB('getUTCMinutes',vB,0),utcseconds:xB('getUTCSeconds',vB,0),utcmilliseconds:xB('getUTCMilliseconds',vB,0),length:xB('length',null,-1),indexof:xB('indexOf',null),lastindexof:xB('lastIndexOf',null),slice:xB('slice',null),parseFloat:'parseFloat',parseInt:'parseInt',upper:xB('toUpperCase',kB,0),lower:xB('toLowerCase',kB,0),substring:xB('substring',kB),replace:xB('replace',kB),regexp:wB,test:xB('test',wB),if:function(CB){3>CB.length&&ke('Missing arguments to if function.'),3<CB.length&&ke('Too many arguments to if function.');var zB=CB.map(bB);return'('+zB[0]+'?'+zB[1]+':'+zB[2]+')'}}}function $w(bB){var _B={};return function(xB,vB){var kB=_B[vB]||(_B[vB]=bB(vB));return kB(xB)}}function Nw(bB,_B,xB){return o$.setMonth(bB),o$.setDate(_B),i$(o$,xB)}function Vw(bB,_B,xB){try{bB[_B].apply(bB,['EXPRESSION'].concat([].slice.call(xB)))}catch(vB){bB.warn(vB)}return xB[xB.length-1]}function oE(bB,_B){var xB;return Oe(bB)?bB:Se(bB)?(xB=_B.scales[bB])&&xB.value:void 0}function lE(bB,_B,xB){var vB=u$+xB;if(!_B.hasOwnProperty(vB))try{_B[vB]=bB.scaleRef(xB)}catch(kB){}}function sE(bB,_B,xB,vB){if(_B[0].type===s$)lE(xB,vB,_B[0].value);else if(_B[0].type===f$)for(bB in xB.scales)lE(xB,vB,bB)}function bE(bB){return function(_B,xB,vB){var kB=oE(_B,(vB||this).context);return kB&&kB.path[bB](xB)}}function _E(bB){var _B=this.context.data[bB];return _B?_B.values.value:[]}function xE(bB,_B,xB,vB){_B[0].type!==s$&&ke('First argument to data functions must be a string literal.');var kB=_B[0].value,wB=p$+kB;vB.hasOwnProperty(wB)||(vB[wB]=xB.getData(kB).tuplesRef())}function wE(bB){return bB.data}function EE(bB,_B){var xB=_E.call(_B,bB);return xB.root&&xB.root.lookup||y$}function zE(bB,_B){var xB=_B[0],vB=_B[_B.length-1],kB;return xB>vB&&(kB=xB,xB=vB,vB=kB),xB<=bB&&bB<=vB}function RE(bB){return function(_B){for(var xB in bB)if('_id'!==xB&&_B[xB]!==bB[xB])return!1;return!0}}function AE(bB,_B){for(var xB=_B.fields,vB=_B.values,kB=_B.getter||(_B.getter=[]),wB=xB.length,SB=0;SB<wB;++SB)if(kB[SB]=kB[SB]||ze(xB[SB]),kB[SB](bB)!==vB[SB])return!1;return!0}function OE(bB,_B){for(var xB=_B.intervals,vB=xB.length,kB=0,wB;kB<vB;++kB){if(wB=xB[kB].getter||(xB[kB].getter=ze(xB[kB].field)),xB[kB].extent[0]===xB[kB].extent[1])return!0;if(!zE(wB(bB),xB[kB].extent))return!1}return!0}function ME(bB,_B,xB,vB,kB,wB){for(var SB=this.context.data[bB],CB=SB?SB.values.value:[],zB=vB!==b$,TB=CB.length,RB=0,PB,AB;RB<TB;++RB)if(PB=CB[RB],AB=_B===PB.unit,(kB!==x$||!AB)&&(kB!==_$||AB)&&(AB=wB(xB,PB),zB^AB))return AB;return!TB||zB}function FE(bB,_B,xB){return bB[0]>_B&&(bB[0]=_B),bB[1]<xB&&(bB[1]=xB),bB}function jE(bB,_B,xB){return xB<bB[0]||bB[1]<_B?[]:(bB[0]<_B&&(bB[0]=_B),bB[1]>xB&&(bB[1]=xB),bB)}function IE(bB,_B,xB){return 1===arguments.length?v$[bB]:(v$[bB]=_B,xB&&(S$[bB]=xB),z$&&(z$.functions[bB]=E$+bB),this)}function NE(bB,_B,xB){var vB={},kB,wB;try{kB=Fw(bB)}catch(SB){ke('Expression parse error: '+Ce(bB))}return kB.visit(function(CB){if('CallExpression'===CB.type){var zB=CB.callee.name,TB=C$.visitors[zB];TB&&TB(zB,CB.arguments,_B,vB)}}),wB=z$(kB),wB.globals.forEach(function(SB){var CB=T$+SB;!vB.hasOwnProperty(CB)&&_B.getSignal(SB)&&(vB[CB]=_B.signalRef(SB))}),{$expr:xB?xB+'return('+wB.code+');':wB.code,$fields:wB.fields,$params:vB}}function BE(bB,_B){return bB.signal?_B.getSignal(bB.signal).id:GE(bB,_B)}function YE(bB){return bB===P$?R$:bB||R$}function GE(bB,_B){var xB=bB.merge?WE:bB.stream?HE:bB.type?XE:ke('Invalid stream specification: '+Ce(bB));return xB(bB,_B)}function WE(bB,_B){var xB=bB.merge.map(function(kB){return GE(kB,_B)}),vB=VE({merge:xB},bB,_B);return _B.addStream(vB).id}function HE(bB,_B){var xB=GE(bB.stream,_B),vB=VE({stream:xB},bB,_B);return _B.addStream(vB).id}function XE(bB,_B){var xB=_B.event(YE(bB.source),bB.type),vB=VE({stream:xB},bB,_B);return 1===Object.keys(vB).length?xB:_B.addStream(vB).id}function VE(bB,_B,xB){var vB=_B.between;return vB&&(2!==vB.length&&ke('Stream "between" parameter must have 2 entries: '+Ce(_B)),bB.between=[GE(vB[0],xB),GE(vB[1],xB)]),vB=_B.filter?Pe(_B.filter):[],(_B.marktype||_B.markname||_B.markrole)&&vB.push(JE(_B.marktype,_B.markname,_B.markrole)),_B.source===P$&&vB.push('inScope(event.item)'),vB.length&&(bB.filter=NE('('+vB.join(')&&(')+')').$expr),null!=(vB=_B.throttle)&&(bB.throttle=+vB),null!=(vB=_B.debounce)&&(bB.debounce=+vB),_B.consume&&(bB.consume=!0),bB}function JE(bB,_B,xB){var vB='event.item';return vB+(bB&&'*'!==bB?'&&'+vB+'.mark.marktype===\''+bB+'\'':'')+(xB?'&&'+vB+'.mark.role===\''+xB+'\'':'')+(_B?'&&'+vB+'.mark.name===\''+_B+'\'':'')}function ZE(bB,_B,xB){return $$=_B||A$,N$=xB||B$,eS(bB.trim()).map(tS)}function KE(bB){return N$.hasOwnProperty(bB)}function QE(bB,_B,xB,vB,kB){for(var wB=0,SB=bB.length,CB;_B<SB;++_B){if(CB=bB[_B],!wB&&CB===xB)return _B;kB&&0<=kB.indexOf(CB)?--wB:vB&&0<=vB.indexOf(CB)&&++wB}return _B}function eS(bB){for(var _B=[],xB=0,vB=bB.length,kB=0;kB<vB;)kB=QE(bB,kB,U$,O$+D$,M$+q$),_B.push(bB.substring(xB,kB).trim()),xB=++kB;if(0===_B.length)throw'Empty event selector: '+bB;return _B}function tS(bB){return'['===bB[0]?nS(bB):aS(bB)}function nS(bB){var _B=bB.length,xB=1,vB,kB;if(xB=QE(bB,xB,M$,O$,M$),xB===_B)throw'Empty between selector: '+bB;if(vB=eS(bB.substring(1,xB)),2!==vB.length)throw'Between selector must have two elements: '+bB;if(bB=bB.slice(xB+1).trim(),bB[0]!==j$)throw'Expected \'>\' after between selector: '+bB;return(vB=vB.map(tS),kB=tS(bB.slice(1).trim()),kB.between)?{between:vB,stream:kB}:(kB.between=vB,kB)}function aS(bB){var _B={source:$$},xB=[],vB=[0,0],kB=0,wB=0,SB=bB.length,CB=0,zB,TB;if(bB[SB-1]===q$){if(CB=bB.lastIndexOf(D$),0<=CB){try{vB=iS(bB.substring(CB+1,SB-1))}catch(RB){throw'Invalid throttle specification: '+bB}bB=bB.slice(0,CB).trim(),SB=bB.length}else throw'Unmatched right brace: '+bB;CB=0}if(!SB)throw bB;if(bB[0]===F$&&(kB=++CB),zB=QE(bB,CB,L$),zB<SB&&(xB.push(bB.substring(wB,zB).trim()),wB=CB=++zB),CB=QE(bB,CB,O$),CB===SB)xB.push(bB.substring(wB,SB).trim());else if(xB.push(bB.substring(wB,CB).trim()),TB=[],wB=++CB,wB===SB)throw'Unmatched left bracket: '+bB;for(;CB<SB;){if(CB=QE(bB,CB,M$),CB===SB)throw'Unmatched left bracket: '+bB;if(TB.push(bB.substring(wB,CB).trim()),CB<SB-1&&bB[++CB]!==O$)throw'Expected left bracket: '+bB;wB=++CB}if(!(SB=xB.length)||I$.test(xB[SB-1]))throw'Invalid event selector: '+bB;return 1<SB?(_B.type=xB[1],kB?_B.markname=xB[0].slice(1):KE(xB[0])?_B.marktype=xB[0]:_B.source=xB[0]):_B.type=xB[0],'!'===_B.type.slice(-1)&&(_B.consume=!0,_B.type=_B.type.slice(0,-1)),null!=TB&&(_B.filter=TB),vB[0]&&(_B.throttle=vB[0]),vB[1]&&(_B.debounce=vB[1]),_B}function iS(bB){var _B=bB.split(U$);if(!bB.length||2<_B.length)throw bB;return _B.map(function(xB){var vB=+xB;if(vB!==vB)throw bB;return vB})}function dS(bB,_B,xB){var vB=bB.events,kB=bB.update,wB=bB.encode,SB=[],CB='',zB;vB||ke('Signal update missing events specification.'),Se(vB)&&(vB=ZE(vB)),vB=Pe(vB).filter(function(TB){return TB.signal?(SB.push(TB),0):1}),vB.length&&SB.push(1<vB.length?{merge:vB}:vB[0]),null!=wB&&(kB&&ke('Signal encode and update are mutually exclusive.'),kB='encode(item(),'+Ce(wB)+')'),CB=Se(kB)?NE(kB,_B,Y$):null==kB.expr?null==kB.value?null==kB.signal?ke('Invalid signal update specification.'):{$expr:'_.value',$params:{value:_B.signalRef(kB.signal)}}:kB.value:NE(kB.expr,_B,Y$),zB={target:xB,update:CB},bB.force&&(zB.options={force:!0}),SB.forEach(function(TB){TB={source:BE(TB,_B)},_B.addUpdate(De(TB,zB))})}function rS(bB,_B){var xB=_B.getSignal(bB.name);if(bB.update){var vB=NE(bB.update,_B);xB.update=vB.$expr,xB.params=vB.$params}bB.on&&bB.on.forEach(function(kB){dS(kB,_B,xB.id)})}function oS(bB,_B){var xB={};for(var vB in bB)'name'!==vB&&(xB[vB]=lS(bB[vB],_B));_B.addProjection(bB.name,xB)}function lS(bB,_B){return Qz(bB)?bB.map(function(xB){return lS(xB,_B)}):Ee(bB)?bB.signal?_B.signalRef(bB.signal):ke('Unsupported parameter object: '+Ce(bB)):bB}function sS(bB,_B){var xB='';return G$[_B]?xB:(bB.x2&&(bB.x?(W$[_B]&&(xB+='if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;'),xB+='o.width=o.x2-o.x;'):bB.width?xB+='o.x=o.x2-o.width;':xB+='o.x=o.x2;'),bB.xc&&(bB.width?xB+='o.x=o.xc-o.width/2;':xB+='o.x=o.xc;'),bB.y2&&(bB.y?(W$[_B]&&(xB+='if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;'),xB+='o.height=o.y2-o.y;'):bB.height?xB+='o.y=o.y2-o.height;':xB+='o.y=o.y2;'),bB.yc&&(bB.height?xB+='o.y=o.yc-o.height/2;':xB+='o.y=o.yc;'),xB)}function fS(bB,_B,xB,vB){function kB(wB,SB,CB,zB){var TB=_S(null,SB,_B,xB,vB),RB=_S(null,CB,_B,xB,vB),PB=_S(null,zB,_B,xB,vB);return'this.'+wB+'('+[TB,RB,PB].join(',')+').toString()'}return bB.c?kB('hcl',bB.h,bB.c,bB.l):bB.h||bB.s?kB('hsl',bB.h,bB.s,bB.l):bB.l||bB.a?kB('lab',bB.l,bB.a,bB.b):bB.r||bB.g||bB.b?kB('rgb',bB.r,bB.g,bB.b):null}function cS(bB,_B,xB,vB){var kB=NE(bB,_B);return kB.$fields.forEach(function(wB){vB[wB]=1}),De(xB,kB.$params),kB.$expr}function uS(bB,_B,xB,vB){return pS(Ee(bB)?bB:{datum:bB},_B,xB,vB)}function pS(bB,_B,xB,vB){var kB,wB,SB;if(bB.signal)kB='datum',SB=cS(bB.signal,_B,xB,vB);else if(bB.group||bB.parent){for(wB=Math.max(1,bB.level||1),kB='item';0<wB--;)kB+='.mark.group';bB.parent?(SB=bB.parent,kB+='.datum'):SB=bB.group}else bB.datum?(kB='datum',SB=bB.datum):ke('Invalid field reference: '+Ce(bB));return bB.signal||(Se(SB)?(vB[SB]=1,SB=we(SB).map(Ce).join('][')):SB=pS(SB,_B,xB,vB)),kB+'['+SB+']'}function gS(bB,_B,xB,vB,kB){var wB=hS(bB.scale,xB,vB,kB),SB,CB,zB;return null==bB.range?(void 0!==_B&&(_B=wB+'('+_B+')'),bB.band&&(zB=mS(bB.scale,xB))&&(CB=wB+'.bandwidth',SB=+bB.band,SB=CB+'()'+(1===SB?'':'*'+SB),0>zB&&(SB='('+CB+'?'+SB+':0)'),_B=(_B?_B+'+':'')+SB,bB.extra&&(_B='(datum.extra?'+wB+'(datum.extra.value):'+_B+')')),null==_B&&(_B='0')):(SB=+bB.range,CB=wB+'.range()',_B=0===SB?CB+'[0]':'($='+CB+','+(1===SB?'$[$.length-1]':'$[0]+'+SB+'*($[$.length-1]-$[0])')+')'),_B}function mS(bB,_B){if(!Se(bB))return-1;var xB=_B.scaleType(bB);return'band'===xB||'point'===xB?1:0}function hS(bB,_B,xB,vB){if(Se(bB))kB=u$+bB,xB.hasOwnProperty(kB)||(xB[kB]=_B.scaleRef(bB)),kB=Ce(kB);else{for(var kB in _B.scales)xB[u$+kB]=_B.scaleRef(kB);kB=Ce(u$)+'+'+(bB.signal?'('+cS(bB.signal,_B,xB,vB)+')':uS(bB,_B,xB,vB))}return'_['+kB+']'}function yS(bB,_B,xB,vB){return'this.gradient('+hS(bB.gradient,_B,xB,vB)+','+Ce(bB.start)+','+Ce(bB.stop)+','+Ce(bB.count)+')'}function bS(bB,_B,xB,vB){return Ee(bB)?'('+_S(null,bB,_B,xB,vB)+')':bB}function _S(bB,_B,xB,vB,kB){if(null!=_B.gradient)return yS(_B,xB,vB,kB);var wB=_B.signal?cS(_B.signal,xB,vB,kB):_B.color?fS(_B.color,xB,vB,kB):null==_B.field?void 0===_B.value?void 0:Ce(_B.value):uS(_B.field,xB,vB,kB);return null!=_B.scale&&(wB=gS(_B,wB,xB,vB,kB)),void 0===wB&&(wB=null),null!=_B.exponent&&(wB='Math.pow('+wB+','+bS(_B.exponent,xB,vB,kB)+')'),null!=_B.mult&&(wB+='*'+bS(_B.mult,xB,vB,kB)),null!=_B.offset&&(wB+='+'+bS(_B.offset,xB,vB,kB)),_B.round&&(wB='Math.round('+wB+')'),wB}function xS(bB,_B,xB){return bB+'['+Ce(_B)+']='+xB+';'}function vS(bB,_B,xB,vB,kB){var wB='';return _B.forEach(function(SB){var CB=_S(bB,SB,xB,vB,kB);wB+=SB.test?cS(SB.test,xB,vB,kB)+'?'+CB+':':CB}),xS('o',bB,wB)}function kS(bB,_B,xB,vB){var kB={},wB='var o=item,datum=o.datum,$;',SB,CB,zB;for(SB in bB)CB=bB[SB],Qz(CB)?wB+=vS(SB,CB,vB,xB,kB):(zB=_S(SB,CB,vB,xB,kB),wB+=xS('o',SB,zB));return wB+=sS(bB,_B),wB+='return 1;',{$expr:wB,$fields:Object.keys(kB),$output:Object.keys(bB)}}function wS(bB){return Ee(bB)?bB:{value:bB}}function ES(bB,_B,xB){return null==xB?0:(bB[_B]={value:xB},1)}function SS(bB,_B,xB){for(var vB in _B)xB&&xB.hasOwnProperty(vB)||(bB[vB]=De(bB[vB]||{},_B[vB]));return bB}function CS(bB,_B,xB,vB,kB){var wB,SB;for(SB in kB=kB||{},kB.encoders={$encode:wB={}},bB=zS(bB,_B,xB,vB.config),bB)wB[SB]=kS(bB[SB],_B,kB,vB);return kB}function zS(bB,_B,xB,vB){var kB,wB,SB;for(wB in('legend'==xB||0===(xB+'').indexOf('axis'))&&(xB=null),vB=xB===X$?vB.group:xB===H$||vB[_B=xB]?De({},vB.mark,vB[_B]):{},kB={},vB)SB=TS(wB,bB)||('fill'===wB||'stroke'===wB)&&(TS('fill',bB)||TS('stroke',bB)),SB||(kB[wB]={value:vB[wB]});return bB=De({},bB),bB.enter=De(kB,bB.enter),bB}function TS(bB,_B){return _B.enter&&_B.enter[bB]||_B.update&&_B.update[bB]}function RS(bB,_B,xB,vB,kB,wB){return{type:bB,name:wB?wB.name:void 0,role:_B,key:xB,from:vB,interactive:!!(wB&&wB.interactive),encode:SS(kB,wB,sN)}}function PS(bB,_B,xB){var vB={value:0},kB={},wB,SB;return kB.enter=wB={opacity:vB,x:vB,y:vB},ES(wB,'width',_B.gradientWidth),ES(wB,'height',_B.gradientHeight),ES(wB,'stroke',_B.gradientStrokeColor),ES(wB,'strokeWidth',_B.gradientStrokeWidth),kB.exit={opacity:vB},kB.update=SB={x:vB,y:vB,fill:{gradient:bB},opacity:{value:1}},ES(SB,'width',_B.gradientWidth),ES(SB,'height',_B.gradientHeight),RS(cN,iN,void 0,void 0,kB,xB)}function AS(bB,_B,xB,vB){var kB={value:0},wB={},SB,CB;return wB.enter=SB={opacity:kB,text:{field:xN}},ES(SB,'fill',_B.labelColor),ES(SB,'font',_B.labelFont),ES(SB,'fontSize',_B.labelFontSize),ES(SB,'baseline',_B.gradientLabelBaseline),ES(SB,'limit',_B.gradientLabelLimit),wB.exit={opacity:kB},wB.update=CB={opacity:{value:1}},SB.x=CB.x={field:kN,mult:_B.gradientWidth},SB.y=CB.y={value:_B.gradientHeight,offset:_B.gradientLabelOffset},SB.align=CB.align={signal:zN},RS(gN,dN,kN,vB,wB,xB)}function OS(bB,_B,xB,vB){var kB={value:0},wB={},SB,CB;return wB.enter=SB={opacity:kB,text:{field:xN}},ES(SB,'align',_B.labelAlign),ES(SB,'baseline',_B.labelBaseline),ES(SB,'fill',_B.labelColor),ES(SB,'font',_B.labelFont),ES(SB,'fontSize',_B.labelFontSize),ES(SB,'limit',_B.labelLimit),wB.exit={opacity:kB},wB.update=CB={opacity:{value:1}},SB.x=CB.x={field:vN,offset:_B.labelOffset},SB.y=CB.y={field:wN,mult:0.5,offset:{field:EN,offset:{field:{group:'entryPadding'},mult:{field:_N}}}},RS(gN,dN,SN,vB,wB,xB)}function MS(bB,_B,xB,vB){var kB={value:0},wB={},SB,CB;return wB.enter=SB={opacity:kB},ES(SB,'shape',_B.symbolType),ES(SB,'size',_B.symbolSize),ES(SB,'strokeWidth',_B.symbolStrokeWidth),bB.fill||ES(SB,'stroke',_B.symbolColor),wB.exit={opacity:kB},wB.update=CB={opacity:{value:1}},SB.x=CB.x={field:vN,mult:0.5},SB.y=CB.y={field:wN,mult:0.5,offset:{field:EN,offset:{field:{group:'entryPadding'},mult:{field:_N}}}},CN.forEach(function(zB){bB[zB]&&(CB[zB]=SB[zB]={scale:bB[zB],field:SN})}),RS(pN,rN,SN,vB,wB,xB)}function DS(bB,_B,xB,vB){var kB={value:0},wB=bB.title,SB={},CB;return SB.enter=CB={x:{field:{group:'padding'}},y:{field:{group:'padding'}},opacity:kB},ES(CB,'align',_B.titleAlign),ES(CB,'baseline',_B.titleBaseline),ES(CB,'fill',_B.titleColor),ES(CB,'font',_B.titleFont),ES(CB,'fontSize',_B.titleFontSize),ES(CB,'fontWeight',_B.titleFontWeight),ES(CB,'limit',_B.titleLimit),SB.exit={opacity:kB},SB.update={opacity:{value:1},text:wB&&wB.signal?{signal:wB.signal}:{value:wB+''}},RS(gN,oN,null,vB,SB,xB)}function qS(bB,_B,xB,vB,kB,wB){return{type:fN,name:_B,role:bB,from:xB,interactive:vB,encode:kB,marks:wB}}function LS(bB){var _B=bB.role||'';return _B.indexOf('axis')&&_B.indexOf('legend')?bB.type===fN?V$:_B||H$:_B}function US(bB){return{clip:bB.clip||!1,interactive:!1!==bB.interactive,marktype:bB.type,name:bB.name||void 0,role:bB.role||LS(bB),zindex:+bB.zindex||void 0}}function FS(bB){return bB}function jS(bB,_B,xB,vB){this.id=-1,this.type=bB,this.value=_B,this.params=xB,vB&&(this.parent=vB)}function IS(bB,_B,xB,vB){return new jS(bB,_B,xB,vB)}function $S(bB,_B){return IS('Operator',bB,_B)}function NS(bB){var _B={$ref:bB.id};return 0>bB.id&&(bB.refs=bB.refs||[]).push(_B),_B}function BS(bB,_B){return _B?{$field:bB,$name:_B}:{$field:bB}}function YS(bB,_B){return{$compare:bB,$order:_B}}function GS(bB){return{$key:bB}}function WS(bB){return Ee(bB)?(bB.order===PN?'-':'+')+HS(bB.op,bB.field):''}function HS(bB,_B){return(bB&&bB.signal?'$'+bB.signal:bB||'')+(bB&&_B?'_':'')+(_B&&_B.signal?'$'+_B.signal:_B||'')}function XS(bB){return bB&&bB.signal}function VS(bB){return function(_B,xB,vB){return IS(bB,xB,_B||void 0,vB)}}function JS(bB,_B){var xB=Al(bB.type);xB||ke('Unrecognized transform type: '+Ce(bB.type));var vB=IS(xB.type,null,ZS(xB,bB,_B));return bB.signal&&_B.addSignal(bB.signal,_B.proxy(vB)),vB.metadata=xB.metadata||{},vB}function ZS(bB,_B,xB){var vB={},kB,wB,SB;for(wB=0,SB=bB.params.length;wB<SB;++wB)kB=bB.params[wB],vB[kB.name]=KS(kB,_B,xB);return vB}function KS(bB,_B,xB){var vB=bB.type,kB=_B[bB.name];if('index'===vB)return eC(bB,_B,xB);return void 0===kB?void(bB.required&&ke('Missing required '+Ce(_B.type)+' parameter: '+Ce(bB.name))):'param'===vB?tC(bB,_B,xB):'projection'===vB?xB.projectionRef(_B[bB.name]):bB.array&&!XS(kB)?kB.map(function(wB){return QS(bB,wB,xB)}):QS(bB,kB,xB)}function QS(bB,_B,xB){var vB=bB.type;if(XS(_B))return rC(vB)?ke('Expression references can not be signals.'):oC(vB)?xB.fieldRef(_B):lC(vB)?xB.compareRef(_B):xB.signalRef(_B.signal);var kB=bB.expr||oC(vB);return kB&&aC(_B)?NE(_B.expr,xB):kB&&iC(_B)?BS(_B.field):rC(vB)?NE(_B,xB):dC(vB)?NS(xB.getData(_B).values):oC(vB)?BS(_B):lC(vB)?xB.compareRef(_B):_B}function eC(bB,_B,xB){return Se(_B.from)||ke('Lookup "from" parameter must be a string literal.'),xB.getData(_B.from).lookupRef(xB,_B.key)}function tC(bB,_B,xB){var vB=_B[bB.name];return bB.array?(Qz(vB)||ke('Expected an array of sub-parameters. Instead: '+Ce(vB)),vB.map(function(kB){return nC(bB,kB,xB)})):nC(bB,vB,xB)}function nC(bB,_B,xB){var vB,kB,wB,SB,CB;for(SB=0,CB=bB.params.length;SB<CB;++SB){for(wB in kB=bB.params[SB],kB.key)if(kB.key[wB]!==_B[wB]){kB=null;break}if(kB)break}return kB||ke('Unsupported parameter: '+Ce(_B)),vB=De(ZS(kB,_B,xB),kB.key),NS(xB.add(GN(vB)))}function aC(bB){return bB&&bB.expr}function iC(bB){return bB&&bB.field}function dC(bB){return'data'===bB}function rC(bB){return'expr'===bB}function oC(bB){return'field'===bB}function lC(bB){return'compare'===bB}function sC(bB,_B,xB){var vB,kB,wB,SB,CB;return bB?(vB=bB.facet)&&(!_B&&ke('Only group marks can be faceted.'),null==vB.field?(kB=xB.keyRef(vB.groupby),bB.data?CB=NS(xB.getData(bB.data).aggregate):(wB=JS(De({type:'aggregate',groupby:Pe(vB.groupby)},vB.aggregate)),wB.params.key=kB,wB.params.pulse=NS(xB.getData(vB.data).output),SB=CB=NS(xB.add(wB)))):SB=CB=NS(xB.getData(vB.data).output)):SB=NS(xB.add(DN(null,[{}]))),SB||(SB=bB.$ref?bB:bB.mark?NS(xB.getData(FS(bB.mark)).output):NS(xB.getData(bB.data).output)),{key:kB,pulse:SB,parent:CB}}function fC(bB,_B,xB,vB,kB){this.scope=bB,this.input=_B,this.output=xB,this.values=vB,this.aggregate=kB,this.index={}}function cC(bB){return Se(bB)?bB:null}function uC(bB,_B,xB){var vB=HS(xB.op,xB.field),kB;if(_B.ops){for(var wB=0,SB=_B.as.length;wB<SB;++wB)if(_B.as[wB]===vB)return;}else _B.ops=['count'],_B.fields=[null],_B.as=['count'];xB.op&&(_B.ops.push((kB=xB.op.signal)?bB.signalRef(kB):xB.op),_B.fields.push(bB.fieldRef(xB.field)),_B.as.push(vB))}function pC(bB,_B,xB,vB,kB,wB,SB){var CB=_B[xB]||(_B[xB]={}),zB=WS(wB),TB=cC(kB),RB,PB;if(null!=TB&&(bB=_B.scope,TB+=zB?'|'+zB:'',RB=CB[TB]),!RB){var AB=wB?{field:TN,pulse:_B.countsRef(bB,kB,wB)}:{field:bB.fieldRef(kB),pulse:NS(_B.output)};zB&&(AB.sort=bB.sortRef(wB)),PB=bB.add(IS(vB,void 0,AB)),SB&&(_B.index[kB]=PB),RB=NS(PB),null!=TB&&(CB[TB]=RB)}return RB}function gC(bB,_B,xB){var vB=bB.from.facet,kB=vB.name,wB=NS(_B.getData(vB.data).output),SB,CB,zB,TB;vB.name||ke('Facet must have a name: '+Ce(vB)),vB.data||ke('Facet must reference a data set: '+Ce(vB)),vB.field?TB=_B.add(WN({field:_B.fieldRef(vB.field),pulse:wB})):vB.groupby?TB=_B.add(FN({key:_B.keyRef(vB.groupby),group:NS(_B.proxy(xB.parent)),pulse:wB})):ke('Facet must specify groupby or field: '+Ce(vB)),SB=_B.fork(),CB=SB.add(DN()),zB=SB.add(KN({pulse:NS(CB)})),SB.addData(kB,new fC(SB,CB,CB,zB)),SB.addSignal('parent',null),TB.params.subflow={$subflow:KC(bB,SB).toRuntime()}}function mC(bB,_B,xB){var vB=_B.add(WN({pulse:xB.pulse})),kB=_B.fork();kB.add(KN()),kB.addSignal('parent',null),vB.params.subflow={$subflow:KC(bB,kB).toRuntime()}}function hC(bB,_B,xB){var vB=bB.remove,kB=bB.insert,wB=bB.toggle,SB=bB.modify,CB=bB.values,zB=_B.add($S()),TB,RB;TB='if('+bB.trigger+',modify("'+xB+'",'+[kB,vB,wB,SB,CB].map(function(PB){return null==PB?'null':PB}).join(',')+'),0)',RB=NE(TB,_B),zB.update=RB.$expr,zB.params=RB.$params}function yC(bB,_B){var xB=LS(bB),vB=bB.type===fN,kB=bB.from&&bB.from.facet,wB=bB.layout||xB===V$||xB===X$,SB=xB===H$||wB||kB,CB,zB,TB,RB,PB,AB,OB,MB,DB,qB,LB,UB,FB;TB=sC(bB.from,vB,_B),zB=_B.add(LN({key:TB.key||(bB.key?BS(bB.key):void 0),pulse:TB.pulse,clean:!vB})),DB=NS(zB),zB=RB=_B.add(DN({pulse:DB})),zB=_B.add(NN({markdef:US(bB),context:{$context:!0},groups:_B.lookup(),parent:_B.signals.parent?_B.signalRef('parent'):null,index:_B.markpath(),pulse:NS(zB)})),qB=NS(zB),zB=_B.add(UN(CS(bB.encode,bB.type,xB,_B,{pulse:qB}))),zB.params.parent=_B.encode(),bB.transform&&bB.transform.forEach(function(jB){var IB=JS(jB,_B);(IB.metadata.generates||IB.metadata.changes)&&ke('Mark transforms should not generate new data.'),IB.params.pulse=NS(zB),_B.add(zB=IB)}),bB.sort&&(zB=_B.add(QN({sort:_B.compareRef(bB.sort),pulse:NS(zB)}))),LB=NS(zB),(kB||wB)&&(wB=_B.add(eB({layout:_B.objectProperty(bB.layout),legendMargin:_B.config.legendMargin,mark:qB,pulse:LB})),UB=NS(wB)),PB=_B.add(MN({mark:qB,pulse:UB||LB})),FB=NS(PB),vB&&(SB&&(CB=_B.operators,CB.pop(),wB&&CB.pop()),_B.pushState(LB,UB||FB,DB),kB?gC(bB,_B,TB):SB?mC(bB,_B,TB):KC(bB,_B),_B.popState(),SB&&(wB&&CB.push(wB),CB.push(PB))),AB=_B.add(JN({pulse:FB})),OB=_B.add(KN({pulse:FB},void 0,_B.parent())),null!=bB.name&&(MB=FS(bB.name),_B.addData(MB,new fC(_B,RB,AB,OB)),bB.on&&bB.on.forEach(function(jB){(jB.insert||jB.remove||jB.toggle)&&ke('Marks only support modify triggers.'),hC(jB,_B,MB)}))}function bC(bB,_B){var xB=bB.type||'symbol',vB=_B.config.legend,kB=bB.name||void 0,wB=bB.encode||{},SB=!!bB.interactive,DB=bB.size||bB.shape||bB.fill||bB.stroke||bB.strokeDash||bB.opacity,CB,zB,TB,RB,PB,AB,OB,MB;return DB||ke('Missing valid scale for legend.'),CB={orient:_C(bB.orient,vB.orient),title:null!=bB.title},zB=NS(_B.add(DN(null,[CB]))),AB=SS({enter:vC(vB),update:{offset:wS(_C(bB.offset,vB.offset)),padding:wS(_C(bB.padding,vB.padding)),titlePadding:wS(_C(bB.titlePadding,vB.titlePadding))}},wB.legend),OB={update:{x:{field:{group:'padding'}},y:{field:{group:'padding'}},entryPadding:wS(_C(bB.entryPadding,vB.entryPadding))}},'gradient'===xB?(TB=NS(_B.add($N({type:'gradient',scale:_B.scaleRef(DB),count:_B.property(bB.tickCount),values:_B.property(bB.values),formatSpecifier:_B.property(bB.format)}))),MB=[PS(DB,vB,wB.gradient),AS(bB,vB,wB.labels,TB)]):(TB=NS(_B.add($N({size:xC(bB,vB,wB.labels),scale:_B.scaleRef(DB),count:_B.property(bB.tickCount),values:_B.property(bB.values),formatSpecifier:_B.property(bB.format)}))),MB=[MS(bB,vB,wB.symbols,TB),OS(bB,vB,wB.labels,TB)]),MB=[qS(aN,null,zB,SB,OB,MB)],CB.title&&(PB=DS(bB,vB,wB.title,zB),OB.update.y.offset={field:{group:'titlePadding'},offset:PB.encode.update.fontSize||PB.encode.enter.fontSize},MB.push(PB)),RB=qS(nN,kB,zB,SB,AB,MB),bB.zindex&&(RB.zindex=bB.zindex),yC(RB,_B)}function _C(bB,_B){return null==bB?_B:bB}function xC(bB,_B,xB){var vB=+_B.symbolSize,kB;return kB=xB&&xB.update&&xB.update.fontSize,kB||(kB=xB&&xB.enter&&xB.enter.fontSize),kB&&(kB=kB.value),kB||(kB=+_B.labelFontSize),bB.size?{$expr:'Math.max(Math.ceil(Math.sqrt(_.scale(datum))),'+kB+')'}:Math.max(Math.ceil(Math.sqrt(vB)),kB)}function vC(bB){var _B={},xB=ES(_B,'fill',bB.fillColor)+ES(_B,'stroke',bB.strokeColor)+ES(_B,'strokeWidth',bB.strokeWidth)+ES(_B,'strokeDash',bB.strokeDash)+ES(_B,'cornerRadius',bB.cornerRadius);return xB?_B:void 0}function kC(bB){return rB.hasOwnProperty(bB)}function wC(bB){return'quantile'===bB}function EC(bB,_B){var xB=bB.type||'linear',vB,kB;for(kB in dB.hasOwnProperty(xB)||ke('Unrecognized scale type: '+Ce(xB)),vB={type:xB,domain:TC(bB.domain,bB,_B)},null!=bB.range&&(vB.range=FC(bB,_B,vB)),null!=bB.interpolate&&UC(bB.interpolate,vB),bB)vB.hasOwnProperty(kB)||'name'===kB||(vB[kB]=SC(bB[kB],_B));_B.addScale(bB.name,vB)}function SC(bB,_B){return Ee(bB)?bB.signal?_B.signalRef(bB.signal):ke('Unsupported object: '+Ce(bB)):bB}function CC(bB,_B){return bB.signal?_B.signalRef(bB.signal):bB.map(function(xB){return SC(xB,_B)})}function zC(bB){ke('Can not find data set: '+Ce(bB))}function TC(bB,_B,xB){return bB?bB.signal?xB.signalRef(bB.signal):(Qz(bB)?RC:bB.fields?AC:PC)(bB,_B,xB):void((null!=_B.domainMin||null!=_B.domainMax)&&ke('No scale domain defined for domainMin/domainMax to override.'))}function RC(bB,_B,xB){return bB.map(function(vB){return SC(vB,xB)})}function PC(bB,_B,xB){var vB=xB.getData(bB.data);return vB||zC(bB.data),kC(_B.type)?vB.valuesRef(xB,bB.field,DC(bB.sort,!1)):wC(_B.type)?vB.domainRef(xB,bB.field):vB.extentRef(xB,bB.field)}function AC(bB,_B,xB){var vB=bB.data,kB=bB.fields.reduce(function(wB,SB){return SB=Se(SB)?{data:vB,field:SB}:Qz(SB)||SB.signal?OC(SB,xB):SB,wB.push(SB),wB},[]);return(kC(_B.type)?MC:wC(_B.type)?qC:LC)(bB,xB,kB)}function OC(bB,_B){var xB='_:vega:_'+aB++,vB=DN({});return Qz(bB)?vB.value={$ingest:bB}:bB.signal&&_B.signalRef('modify('+Ce(xB)+','+bB.signal+', true)'),_B.addDataPipeline(xB,[vB,KN({})]),{data:xB,field:'data'}}function MC(bB,_B,xB){var vB,kB,wB,SB;return vB=xB.map(function(CB){var zB=_B.getData(CB.data);return zB||zC(CB.data),zB.countsRef(_B,CB.field)}),kB=_B.add(AN({groupby:TN,ops:['sum'],fields:[_B.fieldRef('count')],as:['count'],pulse:vB})),wB=_B.add(DN({pulse:NS(kB)})),SB=_B.add(tB({field:TN,sort:_B.sortRef(DC(bB.sort,!0)),pulse:NS(wB)})),NS(SB)}function DC(bB,_B){return bB&&(bB.field||bB.op?bB.field||'count'===bB.op?_B&&bB.field?ke('Multiple domain scales can not sort by field.'):_B&&bB.op&&'count'!==bB.op&&ke('Multiple domain scales support op count only.'):ke('No field provided for sort aggregate op: '+bB.op):Ee(bB)?bB.field='key':bB={field:'key'}),bB}function qC(bB,_B,xB){var vB=xB.map(function(kB){var wB=_B.getData(kB.data);return wB||zC(kB.data),wB.domainRef(_B,kB.field)});return NS(_B.add(YN({values:vB})))}function LC(bB,_B,xB){var vB=xB.map(function(kB){var wB=_B.getData(kB.data);return wB||zC(kB.data),wB.extentRef(_B,kB.field)});return NS(_B.add(BN({extents:vB})))}function UC(bB,_B){_B.interpolate=SC(bB.type||bB),null!=bB.gamma&&(_B.interpolateGamma=SC(bB.gamma))}function FC(bB,_B,xB){var vB=bB.range,kB=_B.config.range;if(vB.signal)return _B.signalRef(vB.signal);if(Se(vB)){if(kB&&kB.hasOwnProperty(vB))return bB=De({},bB,{range:kB[vB]}),FC(bB,_B,xB);'width'===vB?vB=[0,{signal:'width'}]:'height'===vB?vB=kC(bB.type)?[0,{signal:'height'}]:[{signal:'height'},0]:ke('Unrecognized scale range value: '+Ce(vB))}else{if(vB.scheme)return xB.scheme=SC(vB.scheme,_B),vB.extent&&(xB.schemeExtent=CC(vB.extent,_B)),void(vB.count&&(xB.schemeCount=SC(vB.count,_B)));if(vB.step)return void(xB.rangeStep=SC(vB.step,_B));if(kC(bB.type)&&!Qz(vB))return TC(vB,bB,_B);Qz(vB)||ke('Unsupported range type: '+Ce(vB))}return vB.map(function(wB){return SC(wB,_B)})}function jC(bB,_B){bB=Se(bB)?{text:bB}:bB;var xB=_B.config.title,vB=De({},bB.encode),kB,wB,SB;return kB={orient:null==bB.orient?xB.orient:bB.orient},wB=NS(_B.add(DN(null,[kB]))),vB.name=bB.name,vB.interactive=bB.interactive,SB=IC(bB,xB,vB,wB),bB.zindex&&(SB.zindex=bB.zindex),yC(SB,_B)}function IC(bB,_B,xB,vB){var kB=bB.text,wB=bB.orient||_B.orient,SB=bB.anchor||_B.anchor,CB=wB===hN||wB===mN?-1:1,zB=wB===mN||wB===bN,TB={group:zB?'width':'height'},RB={},PB,AB,OB,MB,DB,qB;return RB.enter=PB={opacity:{value:0}},ES(PB,'fill',_B.color),ES(PB,'font',_B.font),ES(PB,'fontSize',_B.fontSize),ES(PB,'fontWeight',_B.fontWeight),RB.exit={opacity:{value:0}},RB.update=AB={opacity:{value:1},text:Ee(kB)?kB:{value:kB+''},offset:wS(bB.offset||0)},'start'===SB?(DB=0,qB='left'):'end'===SB?(DB=1,qB='right'):(DB=0.5,qB='center'),OB={field:TB,mult:DB},MB=0>CB?{value:0}:zB?{field:{group:'height'}}:{field:{group:'width'}},zB?(AB.x=OB,AB.y=MB,AB.angle={value:0},AB.baseline={value:wB===mN?'bottom':'top'}):(AB.x=MB,AB.y=OB,AB.angle={value:90*CB},AB.baseline={value:'bottom'}),AB.align={value:qB},AB.limit={field:TB},ES(AB,'angle',_B.angle),ES(AB,'baseline',_B.baseline),ES(AB,'limit',_B.limit),RS(gN,lN,null,vB,RB,xB)}function $C(bB,_B){var xB=[];bB.transform&&bB.transform.forEach(function(vB){xB.push(JS(vB,_B))}),bB.on&&bB.on.forEach(function(vB){hC(vB,_B,bB.name)}),_B.addDataPipeline(bB.name,NC(bB,_B,xB))}function NC(bB,_B,xB){var vB=[],kB=null,wB=!1,SB=!1,CB,zB,TB,RB,PB;for(bB.values?vB.push(kB=BC({$ingest:bB.values,$format:bB.format})):bB.url?vB.push(kB=BC({$request:bB.url,$format:bB.format})):bB.source&&(CB=_B.getData(bB.source),kB=CB.output,vB.push(null)),zB=0,TB=xB.length;zB<TB;++zB)RB=xB[zB],PB=RB.metadata,kB||PB.source||vB.push(kB=BC()),vB.push(RB),PB.generates&&(SB=!0),PB.modifies&&!SB&&(wB=!0),PB.source?kB=RB:PB.changes&&(kB=null);return CB&&(vB[0]=VN({derive:wB,pulse:NS(CB.output)}),wB&&vB.splice(1,0,BC())),kB||vB.push(BC()),vB.push(KN({})),vB}function BC(bB){var _B=DN({},bB);return _B.metadata={source:!0},_B}function YC(bB,_B){var xB=_B.config,vB=bB.orient,kB=vB===mN||vB===bN?xB.axisX:xB.axisY,wB=xB['axis'+vB[0].toUpperCase()+vB.slice(1)],SB='band'===_B.scaleType(bB.scale)&&xB.axisBand;return kB||wB||SB?De({},xB.axis,kB,wB,SB):xB.axis}function GC(bB,_B,xB,vB){var kB=bB.orient,wB={value:0},SB={},CB,zB,TB,RB,PB;return SB.enter=CB={opacity:wB},ES(CB,'stroke',_B.tickColor),ES(CB,'strokeWidth',_B.tickWidth),SB.exit={opacity:wB},SB.update=zB={opacity:{value:1}},kB===mN||kB===bN?(TB='x',PB='y'):(TB='y',PB='x'),RB=TB+'2',CB[PB]=wB,zB[TB]=CB[TB]=WC(bB,0),zB[RB]=CB[RB]=WC(bB,1),RS(uN,Z$,null,vB,SB,xB)}function WC(bB,_B){return{scale:bB.scale,range:_B}}function HC(bB,_B,xB,vB){var kB=bB.orient,wB=bB.gridScale,SB=kB===hN||kB===mN?1:-1,CB=SB*bB.offset||0,zB={value:0},TB={},RB,PB,AB,OB,MB,DB,qB,LB;return TB.enter=RB={opacity:zB},ES(RB,'stroke',_B.gridColor),ES(RB,'strokeWidth',_B.gridWidth),ES(RB,'strokeDash',_B.gridDash),TB.exit=PB={opacity:zB},TB.update=AB={},ES(AB,'opacity',_B.gridOpacity),OB={scale:bB.scale,field:SN,band:_B.bandPosition,round:_B.tickRound,extra:_B.tickExtra},kB===mN||kB===bN?(MB='x',DB='y',LB='height'):(MB='y',DB='x',LB='width'),qB=DB+'2',AB[MB]=RB[MB]=PB[MB]=OB,wB?(RB[DB]={scale:wB,range:0,mult:SB,offset:CB},AB[qB]=RB[qB]={scale:wB,range:1,mult:SB,offset:CB}):(RB[DB]={value:CB},AB[qB]=RB[qB]={signal:LB,mult:SB,offset:CB}),RS(uN,K$,SN,vB,TB,xB)}function XC(bB,_B,xB,vB,kB){var wB=bB.orient,SB=wB===hN||wB===mN?-1:1,CB={value:0},zB={},TB,RB,PB,AB,OB;return zB.enter=TB={opacity:CB},ES(TB,'stroke',_B.tickColor),ES(TB,'strokeWidth',_B.tickWidth),zB.exit=RB={opacity:CB},zB.update=PB={opacity:{value:1}},AB=wS(kB),AB.mult=SB,OB={scale:bB.scale,field:SN,band:_B.bandPosition,round:_B.tickRound,extra:_B.tickExtra},wB===mN||wB===bN?(PB.y=TB.y=CB,PB.y2=TB.y2=AB,PB.x=TB.x=RB.x=OB):(PB.x=TB.x=CB,PB.x2=TB.x2=AB,PB.y=TB.y=RB.y=OB),RS(uN,eN,SN,vB,zB,xB)}function VC(bB,_B,xB,vB,kB){var wB=bB.orient,SB=wB===hN||wB===mN?-1:1,CB=null==bB.labelPadding?_B.labelPadding:bB.labelPadding,zB={value:0},TB={},RB,PB,AB,OB,MB;return TB.enter=RB={opacity:zB},ES(RB,'angle',_B.labelAngle),ES(RB,'fill',_B.labelColor),ES(RB,'font',_B.labelFont),ES(RB,'fontSize',_B.labelFontSize),ES(RB,'limit',_B.labelLimit),TB.exit=PB={opacity:zB},TB.update=AB={opacity:{value:1},text:{field:xN}},OB=wS(kB),OB.mult=SB,OB.offset=wS(CB),OB.offset.mult=SB,MB={scale:bB.scale,field:SN,band:0.5},wB===mN||wB===bN?(AB.y=RB.y=OB,AB.x=RB.x=PB.x=MB,ES(AB,'align','center'),ES(AB,'baseline',wB===mN?'bottom':'top')):(AB.x=RB.x=OB,AB.y=RB.y=PB.y=MB,ES(AB,'align',wB===yN?'left':'right'),ES(AB,'baseline','middle')),RS(gN,Q$,SN,vB,TB,xB)}function JC(bB,_B,xB,vB){var kB=bB.orient,wB=bB.title,SB=kB===hN||kB===mN?-1:1,CB=kB===mN||kB===bN,zB={},TB,RB,PB;return zB.enter=TB={opacity:{value:0}},ES(TB,'align',_B.titleAlign),ES(TB,'fill',_B.titleColor),ES(TB,'font',_B.titleFont),ES(TB,'fontSize',_B.titleFontSize),ES(TB,'fontWeight',_B.titleFontWeight),ES(TB,'limit',_B.titleLimit),zB.exit={opacity:{value:0}},zB.update=RB={opacity:{value:1},text:wB&&wB.signal?{signal:wB.signal}:{value:wB+''}},PB={scale:bB.scale,range:0.5},CB?(RB.x=PB,RB.angle={value:0},RB.baseline={value:kB===mN?'bottom':'top'}):(RB.y=PB,RB.angle={value:90*SB},RB.baseline={value:'bottom'}),ES(RB,'angle',_B.titleAngle),ES(RB,'baseline',_B.titleBaseline),ES(RB,'x',_B.titleX)||!CB||TS(xB,'x')||(zB.enter.auto={value:!0}),ES(RB,'y',_B.titleY)||CB||TS(xB,'y')||(zB.enter.auto={value:!0}),RS(gN,tN,null,vB,zB,xB)}function ZC(bB,_B){var xB=YC(bB,_B),vB=bB.name||void 0,kB=bB.encode||{},wB=!!bB.interactive,SB,CB,zB,TB,RB,PB,AB;return SB={orient:bB.orient,ticks:null==bB.ticks?xB.ticks:!!bB.ticks,labels:null==bB.labels?xB.labels:!!bB.labels,grid:null==bB.grid?xB.grid:!!bB.grid,domain:null==bB.domain?xB.domain:!!bB.domain,title:null!=bB.title},CB=NS(_B.add(DN({},[SB]))),PB=SS({update:{range:{signal:'abs(span(range("'+bB.scale+'")))'},offset:wS(bB.offset||0),position:wS(bB.position||0),titlePadding:wS(bB.titlePadding||xB.titlePadding),minExtent:wS(bB.minExtent||xB.minExtent),maxExtent:wS(bB.maxExtent||xB.maxExtent)}},kB.axis),zB=NS(_B.add(ON({scale:_B.scaleRef(bB.scale),extra:xB.tickExtra,count:_B.property(bB.tickCount),values:_B.property(bB.values),formatSpecifier:_B.property(bB.format)}))),AB=[],SB.grid&&AB.push(HC(bB,xB,kB.grid,zB)),SB.ticks&&(TB=null==bB.tickSize?xB.tickSize:bB.tickSize,AB.push(XC(bB,xB,kB.ticks,zB,TB))),SB.labels&&(TB=SB.ticks?TB:0,AB.push(VC(bB,xB,kB.labels,zB,TB))),SB.domain&&AB.push(GC(bB,xB,kB.domain,CB)),SB.title&&AB.push(JC(bB,xB,kB.title,CB)),RB=qS(J$,vB,CB,wB,PB,AB),bB.zindex&&(RB.zindex=bB.zindex),yC(RB,_B)}function KC(bB,_B,xB){var vB=Pe(bB.signals);return xB||vB.forEach(function(kB){Ck(kB,_B)}),Pe(bB.projections).forEach(function(kB){oS(kB,_B)}),Pe(bB.data).forEach(function(kB){$C(kB,_B)}),Pe(bB.scales).forEach(function(kB){EC(kB,_B)}),vB.forEach(function(kB){rS(kB,_B)}),Pe(bB.axes).forEach(function(kB){ZC(kB,_B)}),Pe(bB.marks).forEach(function(kB){yC(kB,_B)}),Pe(bB.legends).forEach(function(kB){bC(kB,_B)}),bB.title&&jC(bB.title,_B),(_B.parseLambdas(),_B)}function QC(bB,_B){var xB=_B.config,vB,kB,wB,SB,CB;return _B.background=bB.background||xB.background,CB=NS(_B.root=_B.add($S())),_B.addSignal('width',bB.width||-1),_B.addSignal('height',bB.height||-1),_B.addSignal('padding',Ek(bB.padding,xB)),Pe(bB.signals).forEach(function(zB){oB[zB.name]||Ck(zB,_B)}),kB=_B.add(DN()),wB=SS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:'width'},height:{signal:'height'}}},bB.encode),wB=_B.add(UN(CS(wB,fN,X$,_B,{pulse:NS(kB)}))),SB=_B.add(eB({layout:_B.objectProperty(bB.layout),legendMargin:xB.legendMargin,autosize:wk(bB.autosize,xB),mark:CB,pulse:NS(wB)})),_B.operators.pop(),_B.pushState(NS(wB),NS(SB),null),KC(bB,_B,!0),_B.operators.push(SB),vB=_B.add(MN({mark:CB,pulse:NS(SB)})),vB=_B.add(JN({pulse:NS(vB)})),vB=_B.add(KN({pulse:NS(vB)})),_B.addData('root',new fC(_B,kB,kB,vB)),_B}function ez(bB){this.config=bB,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function nz(bB){this.config=bB.config,this.field=Object.create(bB.field),this.signals=Object.create(bB.signals),this.lambdas=Object.create(bB.lambdas),this.scales=Object.create(bB.scales),this.events=Object.create(bB.events),this.data=Object.create(bB.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++bB._nextsub[0],this._nextsub=bB._nextsub,this._parent=bB._parent.slice(),this._encode=bB._encode.slice(),this._lookup=bB._lookup.slice(),this._markpath=bB._markpath}function az(bB){var _B='{',xB=0,vB,kB;for(vB in bB)kB=bB[vB],_B+=(1<++xB?',':'')+Ce(vB)+':'+(Ee(kB)?kB.signal||az(kB):Ce(kB));return _B+'}'}function iz(bB){var _B=rz(),xB;for(xB in bB)_B[xB]=Ee(_B[xB])?De(_B[xB],bB[xB]):_B[xB]=bB[xB];return _B}function rz(){return{padding:0,autosize:'pad',background:null,group:null,mark:null,arc:{fill:cB},area:{fill:cB},image:null,line:{stroke:cB,strokeWidth:fB},path:{stroke:cB},rect:{fill:cB},rule:{stroke:uB},shape:{stroke:cB},symbol:{fill:cB,size:64},text:{fill:uB,font:'sans-serif',fontSize:11},point:{size:sB,strokeWidth:fB,shape:'circle'},circle:{size:sB,strokeWidth:fB},square:{size:sB,strokeWidth:fB},axis:{minExtent:0,maxExtent:200,bandPosition:0.5,domain:!0,domainWidth:1,domainColor:uB,grid:!1,gridWidth:1,gridColor:gB,gridDash:[],gridOpacity:1,labels:!0,labelAngle:0,labelColor:uB,labelFont:'sans-serif',labelFontSize:10,labelPadding:2,labelLimit:180,ticks:!0,tickRound:!0,tickSize:5,tickWidth:1,tickColor:uB,titleAlign:'center',titlePadding:2,titleColor:uB,titleFont:'sans-serif',titleFontSize:11,titleFontWeight:'bold'},legend:{orient:'right',offset:18,padding:0,entryPadding:5,titlePadding:5,gradientWidth:100,gradientHeight:20,gradientStrokeColor:gB,gradientStrokeWidth:0,gradientLabelBaseline:'top',gradientLabelOffset:2,labelColor:uB,labelFontSize:10,labelFont:'sans-serif',labelAlign:'left',labelBaseline:'middle',labelOffset:8,labelLimit:160,symbolType:'circle',symbolSize:100,symbolColor:pB,symbolStrokeWidth:1.5,titleColor:uB,titleFont:'sans-serif',titleFontSize:11,titleFontWeight:'bold',titleAlign:'left',titleBaseline:'top',titleLimit:180},title:{orient:'top',anchor:'middle',offset:2,color:uB,font:'sans-serif',fontSize:13,fontWeight:'bold'},range:{category:{scheme:'tableau10'},ordinal:{scheme:'blues',extent:[0.2,1]},heatmap:{scheme:'viridis'},ramp:{scheme:'blues',extent:[0.2,1]},diverging:{scheme:'blueorange'},symbol:['circle','square','triangle-up','cross','diamond','triangle-right','triangle-down','triangle-left']}}}function lz(bB,_B,xB){';'!==_B[_B.length-1]&&(_B='return('+_B+');');var vB=Function.apply(null,bB.concat(_B));return xB&&xB.functions?vB.bind(xB.functions):vB}function sz(bB,_B){return lz(['_'],bB,_B)}function fz(bB,_B){return lz(['datum','_'],bB,_B)}function uz(bB,_B){return lz(['event'],bB,_B)}function pz(bB,_B){return lz(['_','event'],bB,_B)}function gz(bB,_B){return lz(['item','_'],bB,_B)}function mz(bB,_B,xB){xB=xB||{};var vB,kB;for(vB in bB)kB=bB[vB],kB&&kB.$expr&&kB.$params&&mz(kB.$params,_B,xB),xB[vB]=Qz(kB)?kB.map(function(wB){return hz(wB,_B)}):hz(kB,_B);return xB}function hz(bB,_B){if(!bB||!Ee(bB))return bB;for(var xB=0,vB=mB.length,kB;xB<vB;++xB)if(kB=mB[xB],bB.hasOwnProperty(kB.key))return kB.parse(bB,_B);return bB}function zz(bB,_B){'Operator'!==bB.type&&bB.type?_B.transform(bB,bB.type):_B.operator(bB,bB.update?sz(bB.update,_B):null)}function Tz(bB,_B){var xB,vB;bB.params&&(!(xB=_B.get(bB.id))&&ke('Invalid operator id: '+bB.id),vB=mz(bB.params,_B),_B.dataflow.connect(xB,xB.parameters(vB)))}function Rz(bB,_B){var xB=null==bB.filter?void 0:uz(bB.filter,_B),vB=null==bB.stream?void 0:_B.get(bB.stream),kB;bB.source?vB=_B.events(bB.source,bB.type,xB):bB.merge&&(kB=bB.merge.map(_B.get.bind(_B)),vB=kB[0].merge.apply(kB[0],kB.slice(1))),bB.between&&(kB=bB.between.map(_B.get.bind(_B)),vB=vB.between(kB[0],kB[1])),bB.filter&&(vB=vB.filter(xB)),null!=bB.throttle&&(vB=vB.throttle(+bB.throttle)),null!=bB.debounce&&(vB=vB.debounce(+bB.debounce)),null==vB&&ke('Invalid stream definition: '+JSON.stringify(bB)),bB.consume&&vB.consume(!0),_B.stream(bB,vB)}function Pz(bB,_B){var xB=_B.get(bB.source),vB=null,kB=bB.update,wB;xB||ke('Source not defined: '+bB.source),vB=bB.target&&bB.target.$expr?uz(bB.target.$expr,_B):_B.get(bB.target),kB&&kB.$expr&&(kB.$params&&(wB=mz(kB.$params,_B)),kB=pz(kB.$expr,_B)),_B.update(bB,xB,vB,kB,wB)}function Az(bB,_B){var xB=bB.operators||[];return bB.background&&(_B.background=bB.background),xB.forEach(function(vB){zz(vB,_B)}),xB.forEach(function(vB){Tz(vB,_B)}),(bB.streams||[]).forEach(function(vB){Rz(vB,_B)}),(bB.updates||[]).forEach(function(vB){Pz(vB,_B)}),_B.resolve()}function Dz(bB,_B,xB){return new qz(bB,_B,xB)}function qz(bB,_B,xB){this.dataflow=bB,this.transforms=_B,this.events=bB.events.bind(bB),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},xB&&(this.functions=Object.create(xB),this.functions.context=this)}function Lz(bB){this.dataflow=bB.dataflow,this.transforms=bB.transforms,this.functions=bB.functions,this.events=bB.events,this.signals=Object.create(bB.signals),this.scales=Object.create(bB.scales),this.nodes=Object.create(bB.nodes),this.data=Object.create(bB.data),this.fn=Object.create(bB.fn),bB.functions&&(this.functions=Object.create(bB.functions),this.functions.context=this)}function Uz(bB,_B,xB){return Az(_B,Dz(bB,AA,xB||v$))}function Fz(bB,_B){var xB=bB.add(null,function(vB){bB['_'+_B]=vB.size,bB._autosize=bB._resize=1},{size:bB._signals[_B]});return xB.rank=0,xB}function $z(bB,_B){return _B.modified&&Qz(_B.input.value)&&bB.indexOf('_:vega:_')}function Nz(bB,_B){return!('parent'===bB||_B instanceof AA.Proxy)}function Yz(bB,_B){_B=_B||{},zl.call(this),this.loader(_B.loader||this._loader),this.logLevel(_B.logLevel||0),this._el=null,this._renderType=_B.renderer||QP.Canvas,this._scenegraph=new no;var xB=this._scenegraph.root;this._renderer=null,this._queue=null,this._handler=new so().scene(xB),this._eventListeners=[],this._preventDefault=!0;var vB=Uz(this,bB,_B.functions);this._runtime=vB,this._signals=vB.signals,this._bind=(bB.bindings||[]).map(function(kB){return{state:null,param:De({},kB)}}),vB.root&&vB.root.set(xB),xB.source=vB.data.root.input,this.pulse(vB.data.root.input,this.changeset().insert(xB.items)),this._background=vB.background||null,this._width=this.width(),this._height=this.height(),this._origin=[0,0],this._resize=0,this._autosize=1,this._resizeWidth=Fz(this,'width'),this._resizeHeight=Fz(this,'height'),Uv(this)}function Gz(bB,_B){return bB._signals.hasOwnProperty(_B)?bB._signals[_B]:bB.error('Unrecognized signal name: '+Ce(_B))}var Hz=F(U),Xz=Hz.right,Vz=Hz.left,Jz=Math.sqrt(50),Zz=Math.sqrt(10),Kz=Math.sqrt(2),Qz=Array.isArray,eT=[],tT=ze('id'),nT=_e(function(bB){return bB},eT,'identity'),aT=_e(function(){return 0},eT,'zero'),iT=_e(function(){return 1},eT,'one'),dT=_e(function(){return!0},eT,'true'),rT=_e(function(){return!1},eT,'false'),oT=0,lT=1,sT=2,fT=3,cT={},uT='$';et.prototype=tt.prototype={constructor:et,has:function(_B){return uT+_B in this},get:function(_B){return this[uT+_B]},set:function(_B,xB){return this[uT+_B]=xB,this},remove:function(_B){var xB=uT+_B;return xB in this&&delete this[xB]},clear:function(){for(var _B in this)_B[0]===uT&&delete this[_B]},keys:function(){var bB=[];for(var _B in this)_B[0]===uT&&bB.push(_B.slice(1));return bB},values:function(){var bB=[];for(var _B in this)_B[0]===uT&&bB.push(this[_B]);return bB},entries:function(){var bB=[];for(var _B in this)_B[0]===uT&&bB.push({key:_B.slice(1),value:this[_B]});return bB},size:function(){var bB=0;for(var _B in this)_B[0]===uT&&++bB;return bB},empty:function(){for(var _B in this)if(_B[0]===uT)return!1;return!0},each:function(_B){for(var xB in this)xB[0]===uT&&_B(this[xB],xB.slice(1),this)}};var pT=tt.prototype,gT={value:function(){}};ct.prototype=st.prototype={constructor:ct,on:function(_B,xB){var vB=this._,kB=ut(_B+'',vB),SB=-1,CB=kB.length,wB;if(2>arguments.length){for(;++SB<CB;)if((wB=(_B=kB[SB]).type)&&(wB=pt(vB[wB],_B.name)))return wB;return}if(null!=xB&&'function'!==typeof xB)throw new Error('invalid callback: '+xB);for(;++SB<CB;)if(wB=(_B=kB[SB]).type)vB[wB]=mt(vB[wB],_B.name,xB);else if(null==xB)for(wB in vB)vB[wB]=mt(vB[wB],_B.name,null);return this},copy:function(){var bB={},_B=this._;for(var xB in _B)bB[xB]=_B[xB].slice();return new ct(bB)},call:function(_B,xB){if(0<(wB=arguments.length-2))for(var vB=Array(wB),kB=0,wB,SB;kB<wB;++kB)vB[kB]=arguments[kB+2];if(!this._.hasOwnProperty(_B))throw new Error('unknown type: '+_B);for(SB=this._[_B],kB=0,wB=SB.length;kB<wB;++kB)SB[kB].value.apply(xB,vB)},apply:function(_B,xB,vB){if(!this._.hasOwnProperty(_B))throw new Error('unknown type: '+_B);for(var kB=this._[_B],wB=0,SB=kB.length;wB<SB;++wB)kB[wB].value.apply(xB,vB)}};var mT=Et(','),hT=Et('\t'),yT=/^([A-Za-z]+:)?\/\//,bT='file://',_T=['mimeType','responseType','user','password'],xT={boolean:He,integer:Ve,number:Ve,date:Xe,string:Je},vT=[function(bB){return'true'===bB||'false'===bB||!0===bB||!1===bB},function(bB){return Ft(bB)&&(bB=+bB)===~~bB},Ft,function(bB){return!isNaN(Date.parse(bB))}],kT=['boolean','integer','number','date'],wT={dsv:$t,csv:It(','),tsv:It('\t'),json:Bt,topojson:function(bB,_B){var xB,vB;return(bB=Bt(bB,_B),_B&&(vB=_B.feature))?(xB=bB.objects[vB])?Xt(bB,xB).features:ke('Invalid TopoJSON object: '+vB):_B&&(vB=_B.mesh)?(xB=bB.objects[vB])?[Kt(bB,xB)]:ke('Invalid TopoJSON object: '+vB):void ke('Missing TopoJSON feature or mesh parameter.')}},ET=new Date,ST=new Date,CT=nn(function(){},function(bB,_B){bB.setTime(+bB+_B)},function(bB,_B){return _B-bB});CT.every=function(bB){return bB=Math.floor(bB),isFinite(bB)&&0<bB?1<bB?nn(function(_B){_B.setTime(Math.floor(_B/bB)*bB)},function(_B,xB){_B.setTime(+_B+xB*bB)},function(_B,xB){return(xB-_B)/bB}):CT:null};var zT=1e3,TT=6e4,RT=36e5,PT=864e5,AT=6048e5,OT=nn(function(bB){bB.setTime(Math.floor(bB/zT)*zT)},function(bB,_B){bB.setTime(+bB+_B*zT)},function(bB,_B){return(_B-bB)/zT},function(bB){return bB.getUTCSeconds()}),MT=nn(function(bB){bB.setTime(Math.floor(bB/TT)*TT)},function(bB,_B){bB.setTime(+bB+_B*TT)},function(bB,_B){return(_B-bB)/TT},function(bB){return bB.getMinutes()}),DT=nn(function(bB){var _B=bB.getTimezoneOffset()*TT%RT;0>_B&&(_B+=RT),bB.setTime(Math.floor((+bB-_B)/RT)*RT+_B)},function(bB,_B){bB.setTime(+bB+_B*RT)},function(bB,_B){return(_B-bB)/RT},function(bB){return bB.getHours()}),qT=nn(function(bB){bB.setHours(0,0,0,0)},function(bB,_B){bB.setDate(bB.getDate()+_B)},function(bB,_B){return(_B-bB-(_B.getTimezoneOffset()-bB.getTimezoneOffset())*TT)/PT},function(bB){return bB.getDate()-1}),LT=an(0),UT=an(1),FT=nn(function(bB){bB.setDate(1),bB.setHours(0,0,0,0)},function(bB,_B){bB.setMonth(bB.getMonth()+_B)},function(bB,_B){return _B.getMonth()-bB.getMonth()+12*(_B.getFullYear()-bB.getFullYear())},function(bB){return bB.getMonth()}),jT=nn(function(bB){bB.setMonth(0,1),bB.setHours(0,0,0,0)},function(bB,_B){bB.setFullYear(bB.getFullYear()+_B)},function(bB,_B){return _B.getFullYear()-bB.getFullYear()},function(bB){return bB.getFullYear()});jT.every=function(bB){return isFinite(bB=Math.floor(bB))&&0<bB?nn(function(_B){_B.setFullYear(Math.floor(_B.getFullYear()/bB)*bB),_B.setMonth(0,1),_B.setHours(0,0,0,0)},function(_B,xB){_B.setFullYear(_B.getFullYear()+xB*bB)}):null};var IT=nn(function(bB){bB.setUTCSeconds(0,0)},function(bB,_B){bB.setTime(+bB+_B*TT)},function(bB,_B){return(_B-bB)/TT},function(bB){return bB.getUTCMinutes()}),$T=nn(function(bB){bB.setUTCMinutes(0,0,0)},function(bB,_B){bB.setTime(+bB+_B*RT)},function(bB,_B){return(_B-bB)/RT},function(bB){return bB.getUTCHours()}),NT=nn(function(bB){bB.setUTCHours(0,0,0,0)},function(bB,_B){bB.setUTCDate(bB.getUTCDate()+_B)},function(bB,_B){return(_B-bB)/PT},function(bB){return bB.getUTCDate()-1}),BT=dn(0),YT=dn(1),WT=nn(function(bB){bB.setUTCDate(1),bB.setUTCHours(0,0,0,0)},function(bB,_B){bB.setUTCMonth(bB.getUTCMonth()+_B)},function(bB,_B){return _B.getUTCMonth()-bB.getUTCMonth()+12*(_B.getUTCFullYear()-bB.getUTCFullYear())},function(bB){return bB.getUTCMonth()}),HT=nn(function(bB){bB.setUTCMonth(0,1),bB.setUTCHours(0,0,0,0)},function(bB,_B){bB.setUTCFullYear(bB.getUTCFullYear()+_B)},function(bB,_B){return _B.getUTCFullYear()-bB.getUTCFullYear()},function(bB){return bB.getUTCFullYear()});HT.every=function(bB){return isFinite(bB=Math.floor(bB))&&0<bB?nn(function(_B){_B.setUTCFullYear(Math.floor(_B.getUTCFullYear()/bB)*bB),_B.setUTCMonth(0,1),_B.setUTCHours(0,0,0,0)},function(_B,xB){_B.setUTCFullYear(_B.getUTCFullYear()+xB*bB)}):null};var XT={0:'0',"-":'',_:' '},VT=/^\s*\d+/,JT=/^%/,ZT=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,KT,QT,eR,tR,nR;Sa({dateTime:'%x, %X',date:'%-m/%-d/%Y',time:'%-I:%M:%S %p',periods:['AM','PM'],days:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],shortDays:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],months:['January','February','March','April','May','June','July','August','September','October','November','December'],shortMonths:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']});var aR='%Y-%m-%dT%H:%M:%S.%LZ',iR=Date.prototype.toISOString?function(bB){return bB.toISOString()}:tR(aR),dR=+new Date('2000-01-01T00:00:00.000Z')?function(bB){var _B=new Date(bB);return isNaN(_B)?null:_B}:nR(aR),rR=Pa.prototype;rR.clone=function(){return new Pa(this)},rR.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},rR.set=function(bB,_B,xB,vB){return xB<bB?(this.x2=bB,this.x1=xB):(this.x1=bB,this.x2=xB),vB<_B?(this.y2=_B,this.y1=vB):(this.y1=_B,this.y2=vB),this},rR.add=function(bB,_B){return bB<this.x1&&(this.x1=bB),_B<this.y1&&(this.y1=_B),bB>this.x2&&(this.x2=bB),_B>this.y2&&(this.y2=_B),this},rR.expand=function(bB){return this.x1-=bB,this.y1-=bB,this.x2+=bB,this.y2+=bB,this},rR.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},rR.translate=function(bB,_B){return this.x1+=bB,this.x2+=bB,this.y1+=_B,this.y2+=_B,this},rR.rotate=function(bB,_B,xB){var vB=Math.cos(bB),kB=Math.sin(bB),wB=_B-_B*vB+xB*kB,SB=xB-_B*kB-xB*vB,CB=this.x1,zB=this.x2,TB=this.y1,RB=this.y2;return this.clear().add(vB*CB-kB*TB+wB,kB*CB+vB*TB+SB).add(vB*CB-kB*RB+wB,kB*CB+vB*RB+SB).add(vB*zB-kB*TB+wB,kB*zB+vB*TB+SB).add(vB*zB-kB*RB+wB,kB*zB+vB*RB+SB)},rR.union=function(bB){return bB.x1<this.x1&&(this.x1=bB.x1),bB.y1<this.y1&&(this.y1=bB.y1),bB.x2>this.x2&&(this.x2=bB.x2),bB.y2>this.y2&&(this.y2=bB.y2),this},rR.intersect=function(bB){return bB.x1>this.x1&&(this.x1=bB.x1),bB.y1>this.y1&&(this.y1=bB.y1),bB.x2<this.x2&&(this.x2=bB.x2),bB.y2<this.y2&&(this.y2=bB.y2),this},rR.encloses=function(bB){return bB&&this.x1<=bB.x1&&this.x2>=bB.x2&&this.y1<=bB.y1&&this.y2>=bB.y2},rR.alignsWith=function(bB){return bB&&(this.x1==bB.x1||this.x2==bB.x2||this.y1==bB.y1||this.y2==bB.y2)},rR.intersects=function(bB){return bB&&!(this.x2<bB.x1||this.x1>bB.x2||this.y2<bB.y1||this.y1>bB.y2)},rR.contains=function(bB,_B){return!(bB<this.x1||bB>this.x2||_B<this.y1||_B>this.y2)},rR.width=function(){return this.x2-this.x1},rR.height=function(){return this.y2-this.y1};var oR=0;Ue(Ma,Oa);var lR;try{lR=require('canvas')}catch(bB){lR=null}var sR='undefined'===typeof Image?lR&&lR.Image||null:Image,fR=Ia.prototype;fR.pending=function(){return this._pending},fR.sanitizeURL=function(bB){var _B=this;return $a(_B),_B._loader.sanitize(bB,{context:'href'}).then(function(xB){return Na(_B),xB}).catch(function(){return Na(_B),null})},fR.loadImage=function(bB){var _B=this;return $a(_B),_B._loader.sanitize(bB,{context:'image'}).then(function(xB){var vB=xB.href;if(!vB||!sR)throw'Image unsupported.';var kB=new sR;return kB.onload=function(){Na(_B),kB.loaded=!0},kB.onerror=function(){Na(_B),kB.loaded=!1},kB.src=vB,kB}).catch(function(){return Na(_B),{loaded:!1,width:0,height:0}})},fR.ready=function(){var bB=this;return new Promise(function(_B){function xB(vB){bB.pending()?setTimeout(function(){xB(!0)},10):_B(vB)}xB(!1)})};var cR=Math.PI,uR=2*cR,pR=1e-6;Ba.prototype=Ya.prototype={constructor:Ba,moveTo:function(_B,xB){this._+='M'+(this._x0=this._x1=+_B)+','+(this._y0=this._y1=+xB)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+='Z')},lineTo:function(_B,xB){this._+='L'+(this._x1=+_B)+','+(this._y1=+xB)},quadraticCurveTo:function(_B,xB,vB,kB){this._+='Q'+ +_B+','+ +xB+','+(this._x1=+vB)+','+(this._y1=+kB)},bezierCurveTo:function(_B,xB,vB,kB,wB,SB){this._+='C'+ +_B+','+ +xB+','+ +vB+','+ +kB+','+(this._x1=+wB)+','+(this._y1=+SB)},arcTo:function(_B,xB,vB,kB,wB){_B=+_B,xB=+xB,vB=+vB,kB=+kB,wB=+wB;var SB=this._x1,CB=this._y1,zB=vB-_B,TB=kB-xB,RB=SB-_B,PB=CB-xB,AB=RB*RB+PB*PB;if(0>wB)throw new Error('negative radius: '+wB);if(null===this._x1)this._+='M'+(this._x1=_B)+','+(this._y1=xB);else if(!(AB>pR));else if(!(Math.abs(PB*zB-TB*RB)>pR)||!wB)this._+='L'+(this._x1=_B)+','+(this._y1=xB);else{var OB=vB-SB,MB=kB-CB,DB=zB*zB+TB*TB,LB=Math.sqrt(DB),UB=Math.sqrt(AB),FB=wB*Math.tan((cR-Math.acos((DB+AB-(OB*OB+MB*MB))/(2*LB*UB)))/2),jB=FB/UB,IB=FB/LB;Math.abs(jB-1)>pR&&(this._+='L'+(_B+jB*RB)+','+(xB+jB*PB)),this._+='A'+wB+','+wB+',0,0,'+ +(PB*OB>RB*MB)+','+(this._x1=_B+IB*zB)+','+(this._y1=xB+IB*TB)}},arc:function(_B,xB,vB,kB,wB,SB){_B=+_B,xB=+xB,vB=+vB;var CB=vB*Math.cos(kB),zB=vB*Math.sin(kB),TB=_B+CB,RB=xB+zB,PB=1^SB,AB=SB?kB-wB:wB-kB;if(0>vB)throw new Error('negative radius: '+vB);null===this._x1?this._+='M'+TB+','+RB:(Math.abs(this._x1-TB)>pR||Math.abs(this._y1-RB)>pR)&&(this._+='L'+TB+','+RB);vB&&(0>AB&&(AB=AB%uR+uR),AB>uR-pR?this._+='A'+vB+','+vB+',0,1,'+PB+','+(_B-CB)+','+(xB-zB)+'A'+vB+','+vB+',0,1,'+PB+','+(this._x1=TB)+','+(this._y1=RB):AB>pR&&(this._+='A'+vB+','+vB+',0,'+ +(AB>=cR)+','+PB+','+(this._x1=_B+vB*Math.cos(wB))+','+(this._y1=xB+vB*Math.sin(wB))))},rect:function(_B,xB,vB,kB){this._+='M'+(this._x0=this._x1=+_B)+','+(this._y0=this._y1=+xB)+'h'+ +vB+'v'+ +kB+'h'+-vB+'Z'},toString:function(){return this._}};var mR=Math.abs,hR=Math.atan2,yR=Math.cos,bR=Math.max,_R=Math.min,xR=Math.sin,vR=Math.sqrt,kR=1e-12,wR=Math.PI,ER=wR/2,SR=2*wR;ni.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_B,xB){switch(_B=+_B,xB=+xB,this._point){case 0:this._point=1,this._line?this._context.lineTo(_B,xB):this._context.moveTo(_B,xB);break;case 1:this._point=2;default:this._context.lineTo(_B,xB);}}};var CR={draw:function(_B,xB){var vB=Math.sqrt(xB/wR);_B.moveTo(vB,0),_B.arc(0,0,vB,0,SR)}},zR=Math.sin(wR/10)/Math.sin(7*wR/10),TR=Math.sin(SR/10)*zR,RR=-Math.cos(SR/10)*zR;gi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ui(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_B,xB){switch(_B=+_B,xB=+xB,this._point){case 0:this._point=1,this._line?this._context.lineTo(_B,xB):this._context.moveTo(_B,xB);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ui(this,_B,xB);}this._x0=this._x1,this._x1=_B,this._y0=this._y1,this._y1=xB}},_i.prototype={areaStart:ci,areaEnd:ci,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(_B,xB){switch(_B=+_B,xB=+xB,this._point){case 0:this._point=1,this._x2=_B,this._y2=xB;break;case 1:this._point=2,this._x3=_B,this._y3=xB;break;case 2:this._point=3,this._x4=_B,this._y4=xB,this._context.moveTo((this._x0+4*this._x1+_B)/6,(this._y0+4*this._y1+xB)/6);break;default:ui(this,_B,xB);}this._x0=this._x1,this._x1=_B,this._y0=this._y1,this._y1=xB}},ki.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_B,xB){switch(_B=+_B,xB=+xB,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var vB=(this._x0+4*this._x1+_B)/6,kB=(this._y0+4*this._y1+xB)/6;this._line?this._context.lineTo(vB,kB):this._context.moveTo(vB,kB);break;case 3:this._point=4;default:ui(this,_B,xB);}this._x0=this._x1,this._x1=_B,this._y0=this._y1,this._y1=xB}},Ei.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var _B=this._x,xB=this._y,vB=_B.length-1;if(0<vB)for(var kB=_B[0],wB=xB[0],SB=_B[vB]-kB,CB=xB[vB]-wB,zB=-1,TB;++zB<=vB;)TB=zB/vB,this._basis.point(this._beta*_B[zB]+(1-this._beta)*(kB+TB*SB),this._beta*xB[zB]+(1-this._beta)*(wB+TB*CB));this._x=this._y=null,this._basis.lineEnd()},point:function(_B,xB){this._x.push(+_B),this._y.push(+xB)}};var PR=function bB(_B){function xB(vB){return 1===_B?new gi(vB):new Ei(vB,_B)}return xB.beta=function(vB){return bB(+vB)},xB}(0.85);Ci.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Si(this,this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_B,xB){switch(_B=+_B,xB=+xB,this._point){case 0:this._point=1,this._line?this._context.lineTo(_B,xB):this._context.moveTo(_B,xB);break;case 1:this._point=2,this._x1=_B,this._y1=xB;break;case 2:this._point=3;default:Si(this,_B,xB);}this._x0=this._x1,this._x1=this._x2,this._x2=_B,this._y0=this._y1,this._y1=this._y2,this._y2=xB}};var AR=function bB(_B){function xB(vB){return new Ci(vB,_B)}return xB.tension=function(vB){return bB(+vB)},xB}(0);zi.prototype={areaStart:ci,areaEnd:ci,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(_B,xB){switch(_B=+_B,xB=+xB,this._point){case 0:this._point=1,this._x3=_B,this._y3=xB;break;case 1:this._point=2,this._context.moveTo(this._x4=_B,this._y4=xB);break;case 2:this._point=3,this._x5=_B,this._y5=xB;break;default:Si(this,_B,xB);}this._x0=this._x1,this._x1=this._x2,this._x2=_B,this._y0=this._y1,this._y1=this._y2,this._y2=xB}};var OR=function bB(_B){function xB(vB){return new zi(vB,_B)}return xB.tension=function(vB){return bB(+vB)},xB}(0);Ti.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_B,xB){switch(_B=+_B,xB=+xB,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Si(this,_B,xB);}this._x0=this._x1,this._x1=this._x2,this._x2=_B,this._y0=this._y1,this._y1=this._y2,this._y2=xB}};var MR=function bB(_B){function xB(vB){return new Ti(vB,_B)}return xB.tension=function(vB){return bB(+vB)},xB}(0);Pi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_B,xB){if(_B=+_B,xB=+xB,this._point){var vB=this._x2-_B,kB=this._y2-xB;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(vB*vB+kB*kB,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(_B,xB):this._context.moveTo(_B,xB);break;case 1:this._point=2;break;case 2:this._point=3;default:Ri(this,_B,xB);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=_B,this._y0=this._y1,this._y1=this._y2,this._y2=xB}};var DR=function bB(_B){function xB(vB){return _B?new Pi(vB,_B):new Ci(vB,0)}return xB.alpha=function(vB){return bB(+vB)},xB}(0.5);Ai.prototype={areaStart:ci,areaEnd:ci,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(_B,xB){if(_B=+_B,xB=+xB,this._point){var vB=this._x2-_B,kB=this._y2-xB;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(vB*vB+kB*kB,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=_B,this._y3=xB;break;case 1:this._point=2,this._context.moveTo(this._x4=_B,this._y4=xB);break;case 2:this._point=3,this._x5=_B,this._y5=xB;break;default:Ri(this,_B,xB);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=_B,this._y0=this._y1,this._y1=this._y2,this._y2=xB}};var qR=function bB(_B){function xB(vB){return _B?new Ai(vB,_B):new zi(vB,0)}return xB.alpha=function(vB){return bB(+vB)},xB}(0.5);Oi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_B,xB){if(_B=+_B,xB=+xB,this._point){var vB=this._x2-_B,kB=this._y2-xB;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(vB*vB+kB*kB,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ri(this,_B,xB);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=_B,this._y0=this._y1,this._y1=this._y2,this._y2=xB}};var LR=function bB(_B){function xB(vB){return _B?new Oi(vB,_B):new Ti(vB,0)}return xB.alpha=function(vB){return bB(+vB)},xB}(0.5);Mi.prototype={areaStart:ci,areaEnd:ci,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(_B,xB){_B=+_B,xB=+xB,this._point?this._context.lineTo(_B,xB):(this._point=1,this._context.moveTo(_B,xB))}},ji.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Fi(this,this._t0,Ui(this,this._t0));}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(_B,xB){var vB=NaN;if(_B=+_B,xB=+xB,_B!==this._x1||xB!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(_B,xB):this._context.moveTo(_B,xB);break;case 1:this._point=2;break;case 2:this._point=3,Fi(this,Ui(this,vB=Li(this,_B,xB)),vB);break;default:Fi(this,this._t0,vB=Li(this,_B,xB));}this._x0=this._x1,this._x1=_B,this._y0=this._y1,this._y1=xB,this._t0=vB}}},(Ii.prototype=Object.create(ji.prototype)).point=function(bB,_B){ji.prototype.point.call(this,_B,bB)},$i.prototype={moveTo:function(_B,xB){this._context.moveTo(xB,_B)},closePath:function(){this._context.closePath()},lineTo:function(_B,xB){this._context.lineTo(xB,_B)},bezierCurveTo:function(_B,xB,vB,kB,wB,SB){this._context.bezierCurveTo(xB,_B,kB,vB,SB,wB)}},Yi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var _B=this._x,xB=this._y,vB=_B.length;if(vB)if(this._line?this._context.lineTo(_B[0],xB[0]):this._context.moveTo(_B[0],xB[0]),2===vB)this._context.lineTo(_B[1],xB[1]);else for(var kB=Gi(_B),wB=Gi(xB),SB=0,CB=1;CB<vB;++SB,++CB)this._context.bezierCurveTo(kB[0][SB],wB[0][SB],kB[1][SB],wB[1][SB],_B[CB],xB[CB]);(this._line||0!==this._line&&1===vB)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(_B,xB){this._x.push(+_B),this._y.push(+xB)}},Hi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(_B,xB){switch(_B=+_B,xB=+xB,this._point){case 0:this._point=1,this._line?this._context.lineTo(_B,xB):this._context.moveTo(_B,xB);break;case 1:this._point=2;default:{if(0>=this._t)this._context.lineTo(this._x,xB),this._context.lineTo(_B,xB);else{var vB=this._x*(1-this._t)+_B*this._t;this._context.lineTo(vB,this._y),this._context.lineTo(vB,xB)}break}}this._x=_B,this._y=xB}};var UR={basis:{curve:function(bB){return new gi(bB)}},"basis-closed":{curve:function(bB){return new _i(bB)}},"basis-open":{curve:function(bB){return new ki(bB)}},bundle:{curve:PR,tension:'beta',value:0.85},cardinal:{curve:AR,tension:'tension',value:0},"cardinal-open":{curve:MR,tension:'tension',value:0},"cardinal-closed":{curve:OR,tension:'tension',value:0},"catmull-rom":{curve:DR,tension:'alpha',value:0.5},"catmull-rom-closed":{curve:qR,tension:'alpha',value:0.5},"catmull-rom-open":{curve:LR,tension:'alpha',value:0.5},linear:{curve:ai},"linear-closed":{curve:function(bB){return new Mi(bB)}},monotone:{horizontal:function(bB){return new Ii(bB)},vertical:function(bB){return new ji(bB)}},natural:{curve:function(bB){return new Yi(bB)}},step:{curve:function(bB){return new Hi(bB,0.5)}},"step-after":{curve:function(bB){return new Hi(bB,1)}},"step-before":{curve:function(bB){return new Hi(bB,0)}}},FR={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},jR=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],IR={},$R={},NR=[].join,BR=['l',0,0,0,0,0,0,0],YR=2*Math.PI,GR=Math.sqrt(3)/2,WR={circle:{draw:function(_B,xB){var vB=Math.sqrt(xB)/2;_B.moveTo(vB,0),_B.arc(0,0,vB,0,YR)}},cross:{draw:function(_B,xB){var vB=Math.sqrt(xB)/2,kB=vB/2.5;_B.moveTo(-vB,-kB),_B.lineTo(-vB,kB),_B.lineTo(-kB,kB),_B.lineTo(-kB,vB),_B.lineTo(kB,vB),_B.lineTo(kB,kB),_B.lineTo(vB,kB),_B.lineTo(vB,-kB),_B.lineTo(kB,-kB),_B.lineTo(kB,-vB),_B.lineTo(-kB,-vB),_B.lineTo(-kB,-kB),_B.closePath()}},diamond:{draw:function(_B,xB){var vB=Math.sqrt(xB)/2;_B.moveTo(-vB,0),_B.lineTo(0,-vB),_B.lineTo(vB,0),_B.lineTo(0,vB),_B.closePath()}},square:{draw:function(_B,xB){var vB=Math.sqrt(xB),kB=-vB/2;_B.rect(kB,kB,vB,vB)}},"triangle-up":{draw:function(_B,xB){var vB=Math.sqrt(xB)/2,kB=GR*vB;_B.moveTo(0,-kB),_B.lineTo(-vB,kB),_B.lineTo(vB,kB),_B.closePath()}},"triangle-down":{draw:function(_B,xB){var vB=Math.sqrt(xB)/2,kB=GR*vB;_B.moveTo(0,kB),_B.lineTo(-vB,-kB),_B.lineTo(vB,-kB),_B.closePath()}},"triangle-right":{draw:function(_B,xB){var vB=Math.sqrt(xB)/2,kB=GR*vB;_B.moveTo(kB,0),_B.lineTo(-kB,-vB),_B.lineTo(-kB,vB),_B.closePath()}},"triangle-left":{draw:function(_B,xB){var vB=Math.sqrt(xB)/2,kB=GR*vB;_B.moveTo(-kB,0),_B.lineTo(kB,-vB),_B.lineTo(kB,vB),_B.closePath()}}},HR={},XR=Math.PI,VR=function(){function bB(){var PB=+_B.apply(this,arguments),AB=+xB.apply(this,arguments),OB=wB.apply(this,arguments)-ER,MB=SB.apply(this,arguments)-ER,DB=mR(MB-OB),qB=MB>OB,TB,RB;if(zB||(zB=TB=Ya()),AB<PB&&(RB=AB,AB=PB,PB=RB),!(AB>kR))zB.moveTo(0,0);else if(DB>SR-kR)zB.moveTo(AB*yR(OB),AB*xR(OB)),zB.arc(0,0,AB,OB,MB,!qB),PB>kR&&(zB.moveTo(PB*yR(MB),PB*xR(MB)),zB.arc(0,0,PB,MB,OB,qB));else{var LB=OB,UB=MB,FB=OB,jB=MB,IB=DB,$B=DB,NB=CB.apply(this,arguments)/2,BB=NB>kR&&(kB?+kB.apply(this,arguments):vR(PB*PB+AB*AB)),YB=_R(mR(AB-PB)/2,+vB.apply(this,arguments)),GB=YB,WB=YB,HB,XB;if(BB>kR){var VB=Ha(BB/PB*xR(NB)),JB=Ha(BB/AB*xR(NB));(IB-=2*VB)>kR?(VB*=qB?1:-1,FB+=VB,jB-=VB):(IB=0,FB=jB=(OB+MB)/2),($B-=2*JB)>kR?(JB*=qB?1:-1,LB+=JB,UB-=JB):($B=0,LB=UB=(OB+MB)/2)}var ZB=AB*yR(LB),KB=AB*xR(LB),QB=PB*yR(jB),eY=PB*xR(jB);if(YB>kR){var tY=AB*yR(UB),nY=AB*xR(UB),aY=PB*yR(FB),iY=PB*xR(FB);if(DB<wR){var dY=IB>kR?Qa(ZB,KB,aY,iY,tY,nY,QB,eY):[QB,eY],rY=ZB-dY[0],oY=KB-dY[1],lY=tY-dY[0],sY=nY-dY[1],fY=1/xR(Wa((rY*lY+oY*sY)/(vR(rY*rY+oY*oY)*vR(lY*lY+sY*sY)))/2),cY=vR(dY[0]*dY[0]+dY[1]*dY[1]);GB=_R(YB,(PB-cY)/(fY-1)),WB=_R(YB,(AB-cY)/(fY+1))}}$B>kR?WB>kR?(HB=ei(aY,iY,ZB,KB,AB,WB,qB),XB=ei(tY,nY,QB,eY,AB,WB,qB),zB.moveTo(HB.cx+HB.x01,HB.cy+HB.y01),WB<YB?zB.arc(HB.cx,HB.cy,WB,hR(HB.y01,HB.x01),hR(XB.y01,XB.x01),!qB):(zB.arc(HB.cx,HB.cy,WB,hR(HB.y01,HB.x01),hR(HB.y11,HB.x11),!qB),zB.arc(0,0,AB,hR(HB.cy+HB.y11,HB.cx+HB.x11),hR(XB.cy+XB.y11,XB.cx+XB.x11),!qB),zB.arc(XB.cx,XB.cy,WB,hR(XB.y11,XB.x11),hR(XB.y01,XB.x01),!qB))):(zB.moveTo(ZB,KB),zB.arc(0,0,AB,LB,UB,!qB)):zB.moveTo(ZB,KB),PB>kR&&IB>kR?GB>kR?(HB=ei(QB,eY,tY,nY,PB,-GB,qB),XB=ei(ZB,KB,aY,iY,PB,-GB,qB),zB.lineTo(HB.cx+HB.x01,HB.cy+HB.y01),GB<YB?zB.arc(HB.cx,HB.cy,GB,hR(HB.y01,HB.x01),hR(XB.y01,XB.x01),!qB):(zB.arc(HB.cx,HB.cy,GB,hR(HB.y01,HB.x01),hR(HB.y11,HB.x11),!qB),zB.arc(0,0,PB,hR(HB.cy+HB.y11,HB.cx+HB.x11),hR(XB.cy+XB.y11,XB.cx+XB.x11),qB),zB.arc(XB.cx,XB.cy,GB,hR(XB.y11,XB.x11),hR(XB.y01,XB.x01),!qB))):zB.arc(0,0,PB,jB,FB,qB):zB.lineTo(QB,eY)}return(zB.closePath(),TB)?(zB=null,TB+''||null):void 0}var _B=Xa,xB=Va,vB=Ga(0),kB=null,wB=Ja,SB=Za,CB=Ka,zB=null;return bB.centroid=function(){var TB=(+_B.apply(this,arguments)+ +xB.apply(this,arguments))/2,RB=(+wB.apply(this,arguments)+ +SB.apply(this,arguments))/2-wR/2;return[yR(RB)*TB,xR(RB)*TB]},bB.innerRadius=function(TB){return arguments.length?(_B='function'===typeof TB?TB:Ga(+TB),bB):_B},bB.outerRadius=function(TB){return arguments.length?(xB='function'===typeof TB?TB:Ga(+TB),bB):xB},bB.cornerRadius=function(TB){return arguments.length?(vB='function'===typeof TB?TB:Ga(+TB),bB):vB},bB.padRadius=function(TB){return arguments.length?(kB=null==TB?null:'function'===typeof TB?TB:Ga(+TB),bB):kB},bB.startAngle=function(TB){return arguments.length?(wB='function'===typeof TB?TB:Ga(+TB),bB):wB},bB.endAngle=function(TB){return arguments.length?(SB='function'===typeof TB?TB:Ga(+TB),bB):SB},bB.padAngle=function(TB){return arguments.length?(CB='function'===typeof TB?TB:Ga(+TB),bB):CB},bB.context=function(TB){return arguments.length?(zB=null==TB?null:TB,bB):zB},bB}().cornerRadius(wd).padAngle(function(bB){return bB.padAngle||0}),JR=si().x(hd).y1(yd).y0(function(bB){return(bB.y||0)+(bB.height||0)}).defined(Sd),ZR=si().y(yd).x1(hd).x0(function(bB){return(bB.x||0)+(bB.width||0)}).defined(Sd),KR=li().x(hd).y(yd).defined(Sd),QR=gd().x(hd).y(yd).width(function(bB){return bB.width||0}).height(function(bB){return bB.height||0}).cornerRadius(wd),eP=function(){function bB(){var kB;if(vB||(vB=kB=Ya()),_B.apply(this,arguments).draw(vB,+xB.apply(this,arguments)),kB)return vB=null,kB+''||null}var _B=Ga(CR),xB=Ga(64),vB=null;return bB.type=function(kB){return arguments.length?(_B='function'===typeof kB?kB:Ga(kB),bB):_B},bB.size=function(kB){return arguments.length?(xB='function'===typeof kB?kB:Ga(+kB),bB):xB},bB.context=function(kB){return arguments.length?(vB=null==kB?null:kB,bB):vB},bB}().type(function(bB){return dd(bB.shape||'circle')}).size(function(bB){return null==bB.size?64:bB.size}),tP=md().x(hd).y(yd).defined(Sd).size(function(bB){return bB.size||1}),nP,aP=2*Math.PI,iP=aP/4;Ld.beginPath=Ud,Ld.closePath=Ud,Ld.moveTo=Fd,Ld.lineTo=Fd,Ld.rect=function(bB,_B,xB,vB){Fd(bB,_B),Fd(bB+xB,_B+vB)},Ld.quadraticCurveTo=function(bB,_B,xB,vB){Fd(bB,_B),Fd(xB,vB)},Ld.bezierCurveTo=function(bB,_B,xB,vB,kB,wB){Fd(bB,_B),Fd(xB,vB),Fd(kB,wB)},Ld.arc=function(bB,_B,xB,vB,kB,wB){function SB(DB){OB=xB*Math.cos(DB),MB=xB*Math.sin(DB),OB<CB&&(CB=OB),OB>zB&&(zB=OB),MB<TB&&(TB=MB),MB>RB&&(RB=MB)}if(Math.abs(kB-vB)>aP-1e-8)return Fd(bB-xB,_B-xB),void Fd(bB+xB,_B+xB);var CB=Infinity,zB=-Infinity,TB=Infinity,RB=-Infinity,PB,AB,OB,MB;if(SB(vB),SB(kB),kB!==vB)if(vB%=aP,0>vB&&(vB+=aP),kB%=aP,0>kB&&(kB+=aP),kB<vB&&(wB=!wB,PB=vB,vB=kB,kB=PB),wB)for(kB-=aP,PB=vB-vB%iP,AB=0;3>AB&&PB>kB;++AB,PB-=iP)SB(PB);else for(PB=vB-vB%iP+iP,AB=0;3>AB&&PB<kB;++AB,PB+=iP)SB(PB);Fd(bB+CB,_B+TB),Fd(bB+zB,_B+RB)};var rP=[],oP=function(){return!0},lP=nr('arc',function(bB,_B){return VR.context(bB)(_B)}),sP=ar('area',function(bB,_B){var xB=_B[0],vB=xB.interpolate||'linear';return('horizontal'===xB.orient?ZR:JR).curve(Zi(vB,xB.orient,xB.tension)).context(bB)(_B)}),cP={type:'image',tag:'image',nested:!1,attr:function(bB,_B,xB){var vB=br(_B,xB),kB=_B.x||0,wB=_B.y||0,SB=(null==_B.width?vB.width:_B.width)||0,CB=(null==_B.height?vB.height:_B.height)||0,zB=!1===_B.aspect?'none':'xMidYMid';kB-=_r(_B.align,SB),wB-=xr(_B.baseline,CB),bB('href',vB.src||'','http://www.w3.org/1999/xlink','xlink:href'),bB('transform',Qd(kB,wB)),bB('width',SB),bB('height',CB),bB('preserveAspectRatio',zB)},bound:function(bB,_B){var xB=_B.image,vB=_B.x||0,kB=_B.y||0,wB=(null==_B.width?xB&&xB.width:_B.width)||0,SB=(null==_B.height?xB&&xB.height:_B.height)||0;return vB-=_r(_B.align,wB),kB-=xr(_B.baseline,SB),bB.set(vB,kB,vB+wB,kB+SB)},draw:function(bB,_B,xB){var vB=this;Gd(_B,function(kB){if(!xB||xB.intersects(kB.bounds)){var wB=br(kB,vB),SB=kB.x||0,CB=kB.y||0,zB=(null==kB.width?wB.width:kB.width)||0,TB=(null==kB.height?wB.height:kB.height)||0,RB,PB,AB,OB;SB-=_r(kB.align,zB),CB-=xr(kB.baseline,TB),!1!==kB.aspect&&(PB=wB.width/wB.height,AB=kB.width/kB.height,PB===PB&&AB===AB&&PB!==AB&&(AB<PB?(OB=zB/PB,CB+=(TB-OB)/2,TB=OB):(OB=TB*PB,SB+=(zB-OB)/2,zB=OB))),wB.loaded&&(bB.globalAlpha=null==(RB=kB.opacity)?1:RB,bB.drawImage(wB,SB,CB,zB,TB))}})},pick:Jd(),get:br,xOffset:_r,yOffset:xr},uP=ar('line',function(bB,_B){var xB=_B[0],vB=xB.interpolate||'linear';return KR.curve(Zi(vB,xB.orient,xB.tension)).context(bB)(_B)}),pP={type:'path',tag:'path',nested:!1,attr:function(bB,_B){bB('transform',er(_B)),bB('d',_B.path)},bound:function(bB,_B){return Cr(Ld(bB),_B)?bB.set(0,0,0,0):qd(bB,_B)},draw:Hd(Cr),pick:Kd(Cr)},gP={type:'rect',tag:'path',nested:!1,attr:function(bB,_B){bB('d',Ad(null,_B))},bound:function(bB,_B){var xB,vB;return qd(bB.set(xB=_B.x||0,vB=_B.y||0,xB+_B.width||0,vB+_B.height||0),_B)},draw:Hd(Pr),pick:Kd(Pr)},mP={type:'rule',tag:'line',nested:!1,attr:function(bB,_B){bB('transform',er(_B)),bB('x2',null==_B.x2?0:_B.x2-(_B.x||0)),bB('y2',null==_B.y2?0:_B.y2-(_B.y||0))},bound:function(bB,_B){var xB,vB;return qd(bB.set(xB=_B.x||0,vB=_B.y||0,null==_B.x2?xB:_B.x2,null==_B.y2?vB:_B.y2),_B)},draw:function(bB,_B,xB){Gd(_B,function(vB){if(!xB||xB.intersects(vB.bounds)){var kB=null==vB.opacity?1:vB.opacity;kB&&Mr(bB,vB,kB)&&bB.stroke()}})},pick:Jd(function(bB,_B,xB,vB){return!!bB.isPointInStroke&&Mr(bB,_B,1)&&bB.isPointInStroke(xB,vB)})},hP=nr('shape',function(bB,_B){return(_B.mark.shape||_B.shape).context(bB)(_B)}),yP=nr('symbol',function(bB,_B){return eP.context(bB)(_B)}),bP,_P,xP={height:Ir,measureWidth:Fr,estimateWidth:Lr,width:Lr,canvas:$r};$r(!0);var vP={left:'start',center:'middle',right:'end'},kP=new Pa,wP={type:'text',tag:'text',nested:!1,attr:function(bB,_B){var xB=_B.dx||0,vB=(_B.dy||0)+Gr(_B),kB=_B.x||0,wB=_B.y||0,SB=_B.angle||0,CB=_B.radius||0,zB;CB&&(zB=(_B.theta||0)-Math.PI/2,kB+=CB*Math.cos(zB),wB+=CB*Math.sin(zB)),bB('text-anchor',vP[_B.align]||'start'),SB?(zB=Qd(kB,wB)+' rotate('+SB+')',(xB||vB)&&(zB+=' '+Qd(xB,vB))):zB=Qd(kB+xB,wB+vB),bB('transform',zB)},bound:Hr,draw:function(bB,_B,xB){Gd(_B,function(vB){var kB,wB,SB,CB,zB,TB;(!xB||xB.intersects(vB.bounds))&&(TB=Nr(vB))&&(kB=null==vB.opacity?1:vB.opacity,0===kB||(bB.font=Yr(vB),bB.textAlign=vB.align||'left',wB=vB.x||0,SB=vB.y||0,(CB=vB.radius)&&(zB=(vB.theta||0)-Math.PI/2,wB+=CB*Math.cos(zB),SB+=CB*Math.sin(zB)),vB.angle&&(bB.save(),bB.translate(wB,SB),bB.rotate(vB.angle*Math.PI/180),wB=SB=0),wB+=vB.dx||0,SB+=(vB.dy||0)+Gr(vB),vB.fill&&$d(bB,vB,kB)&&bB.fillText(TB,wB,SB),vB.stroke&&Nd(bB,vB,kB)&&bB.strokeText(TB,wB,SB),vB.angle&&bB.restore()))})},pick:Jd(function(bB,_B,xB,vB,kB,wB){if(0>=_B.fontSize)return!1;if(!_B.angle)return!0;var SB=Hr(kP,_B,!0),CB=-_B.angle*Math.PI/180,zB=Math.cos(CB),TB=Math.sin(CB),RB=_B.x,PB=_B.y;return SB.contains(zB*kB-TB*wB+(RB-RB*zB+PB*TB),TB*kB+zB*wB+(PB-RB*TB-PB*zB))})},EP=ar('trail',function(bB,_B){return tP.context(bB)(_B)}),SP={arc:lP,area:sP,group:{type:'group',tag:'g',nested:!1,attr:function(bB,_B){bB('transform',er(_B))},bound:function(bB,_B){if(!_B.clip&&_B.items)for(var xB=_B.items,vB=0,kB=xB.length;vB<kB;++vB)bB.union(xB[vB].bounds);return(_B.clip||_B.width||_B.height)&&qd(bB.add(0,0).add(_B.width||0,_B.height||0),_B),bB.translate(_B.x||0,_B.y||0)},draw:function(bB,_B,xB){var vB=this;Gd(_B,function(kB){var wB=kB.x||0,SB=kB.y||0,CB=kB.width||0,zB=kB.height||0,TB,RB;bB.save(),bB.translate(wB,SB),(kB.stroke||kB.fill)&&(RB=null==kB.opacity?1:kB.opacity,0<RB&&(bB.beginPath(),TB=kB.stroke?0.5:0,Ad(bB,kB,TB,TB),kB.fill&&$d(bB,kB,RB)&&bB.fill(),kB.stroke&&Nd(bB,kB,RB)&&bB.stroke())),kB.clip&&(bB.beginPath(),bB.rect(0,0,CB,zB),bB.clip()),xB&&xB.translate(-wB,-SB),Gd(kB,function(PB){vB.draw(bB,PB,xB)}),xB&&xB.translate(wB,SB),bB.restore()})},pick:function(bB,_B,xB,vB,kB,wB){if(_B.bounds&&!_B.bounds.contains(kB,wB)||!_B.items)return null;var SB=this;return Wd(_B,function(CB){var zB,TB,RB,PB;if(PB=CB.bounds,!PB||PB.contains(kB,wB))return(TB=CB.x||0,RB=CB.y||0,bB.save(),bB.translate(TB,RB),TB=kB-TB,RB=wB-RB,zB=Wd(CB,function(AB){return yr(AB,TB,RB)?SB.pick(AB,xB,vB,TB,RB):null}),bB.restore(),zB)?zB:(zB=!1!==_B.interactive&&(CB.fill||CB.stroke)&&0<=TB&&TB<=CB.width&&0<=RB&&RB<=CB.height,zB?CB:null)})},background:function(bB,_B){var xB=_B.stroke?0.5:0;bB('class','background'),bB('d',Ad(null,_B,xB,xB))},foreground:function(bB,_B,xB){var vB=_B.clip?ir(xB,_B,_B):null;bB('clip-path',vB)}},image:cP,line:uP,path:pP,rect:gP,rule:mP,shape:hP,symbol:yP,text:wP,trail:EP},CP={mark:null},zP=['marktype','name','role','interactive','clip','items','zindex','x','y','width','height','align','baseline','fill','fillOpacity','opacity','stroke','strokeOpacity','strokeWidth','strokeCap','strokeDash','strokeDashOffset','startAngle','endAngle','innerRadius','outerRadius','cornerRadius','padAngle','interpolate','tension','orient','defined','url','path','x2','y2','size','shape','text','angle','theta','radius','dx','dy','font','fontSize','fontWeight','fontStyle','fontVariant'],TP=no.prototype;TP.toJSON=function(bB){return Kr(this.root,bB||0)},TP.mark=function(bB,_B,xB){_B=_B||this.root.items[0];var vB=ao(bB,_B);return _B.items[xB]=vB,vB.zindex&&(vB.group.zdirty=!0),vB};var RP=io.prototype;RP.initialize=function(bB,_B,xB){return this._el=bB,this._obj=xB||null,this.origin(_B)},RP.element=function(){return this._el},RP.origin=function(bB){return this._origin=bB||[0,0],this},RP.scene=function(bB){return arguments.length?(this._scene=bB,this):this._scene},RP.on=function(){},RP.off=function(){},RP.handlers=function(){var bB=this._handlers,_B=[],xB;for(xB in bB)_B.push.apply(_B,bB[xB]);return _B},RP.eventName=function(bB){var _B=bB.indexOf('.');return 0>_B?bB:bB.slice(0,_B)},RP.handleHref=function(bB,_B,xB){this._loader.sanitize(xB,{context:'href'}).then(function(vB){var kB=new MouseEvent(bB.type,bB),wB=Da(null,'a');for(var SB in vB)wB.setAttribute(SB,vB[SB]);wB.dispatchEvent(kB)}).catch(function(){})},RP.handleTooltip=function(bB,_B,xB){this._el.setAttribute('title',xB||'')};var PP=ro.prototype;PP.initialize=function(bB,_B,xB,vB){return this._el=bB,this.resize(_B,xB,vB)},PP.element=function(){return this._el},PP.scene=function(){return this._el&&this._el.firstChild},PP.background=function(bB){return 0===arguments.length?this._bgcolor:(this._bgcolor=bB,this)},PP.resize=function(bB,_B,xB){return this._width=bB,this._height=_B,this._origin=xB||[0,0],this},PP.render=function(bB,_B){var xB=this;return xB._call=function(){xB._render(bB,_B)},xB._call(),xB._call=null,xB},PP._render=function(){},PP.renderAsync=function(bB,_B){var xB=this.render(bB,_B);return this._ready?this._ready.then(function(){return xB}):Promise.resolve(xB)},PP._load=function(bB,_B){var xB=this,vB=xB._loader[bB](_B);if(!xB._ready){var kB=xB._call;xB._ready=xB._loader.ready().then(function(wB){wB&&kB(),xB._ready=null})}return vB},PP.sanitizeURL=function(bB){return this._load('sanitizeURL',bB)},PP.loadImage=function(bB){return this._load('loadImage',bB)};var AP=Ue(so,io);AP.initialize=function(bB,_B,xB){var vB=this._canvas=bB&&qa(bB,'canvas');if(vB){var kB=this;this.events.forEach(function(wB){vB.addEventListener(wB,function(SB){AP[wB]?AP[wB].call(kB,SB):kB.fire(wB,SB)})})}return io.prototype.initialize.call(this,bB,_B,xB)},AP.canvas=function(){return this._canvas},AP.context=function(){return this._canvas.getContext('2d')},AP.events=['keydown','keypress','keyup','dragenter','dragleave','dragover','mousedown','mouseup','mousemove','mouseout','mouseover','click','dblclick','wheel','mousewheel','touchstart','touchmove','touchend'],AP.DOMMouseScroll=function(bB){this.fire('mousewheel',bB)},AP.mousemove=fo('mousemove','mouseover','mouseout'),AP.dragover=fo('dragover','dragenter','dragleave'),AP.mouseout=co('mouseout'),AP.dragleave=co('dragleave'),AP.mousedown=function(bB){this._down=this._active,this.fire('mousedown',bB)},AP.click=function(bB){this._down===this._active&&(this.fire('click',bB),this._down=null)},AP.touchstart=function(bB){this._touch=this.pickEvent(bB.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire('touchstart',bB,!0)},AP.touchmove=function(bB){this.fire('touchmove',bB,!0)},AP.touchend=function(bB){this.fire('touchend',bB,!0),this._touch=null},AP.fire=function(bB,_B,xB){var vB=xB?this._touch:this._active,kB=this._handlers[bB],wB,SB;if('click'===bB&&vB&&vB.href?this.handleHref(_B,vB,vB.href):('mouseover'===bB||'mouseout'===bB)&&vB&&vB.tooltip&&this.handleTooltip(_B,vB,'mouseover'===bB?vB.tooltip:null),kB)for(_B.vegaType=bB,wB=0,SB=kB.length;wB<SB;++wB)kB[wB].handler.call(this._obj,_B,vB)},AP.on=function(bB,_B){var xB=this.eventName(bB),vB=this._handlers;return(vB[xB]||(vB[xB]=[])).push({type:bB,handler:_B}),this},AP.off=function(bB,_B){var xB=this.eventName(bB),vB=this._handlers[xB],kB;if(vB){for(kB=vB.length;0<=--kB;)vB[kB].type===bB&&(_B&&vB[kB].handler!==_B||vB.splice(kB,1));return this}},AP.pickEvent=function(bB){var _B=oo(bB,this._canvas),xB=this._origin;return this.pick(this._scene,_B[0],_B[1],_B[0]-xB[0],_B[1]-xB[1])},AP.pick=function(bB,_B,xB,vB,kB){var wB=this.context(),SB=SP[bB.marktype];return SB.pick.call(this,wB,bB,_B,xB,vB,kB)};var OP='undefined'===typeof window?1:window.devicePixelRatio||1,MP=Ue(go,ro),DP=ro.prototype,qP=new Pa;MP.initialize=function(bB,_B,xB,vB){return this._canvas=ja(1,1),bB&&(Ua(bB,0).appendChild(this._canvas),this._canvas.setAttribute('class','marks')),DP.initialize.call(this,bB,_B,xB,vB)},MP.resize=function(bB,_B,xB){return DP.resize.call(this,bB,_B,xB),po(this._canvas,this._width,this._height,this._origin),(this._redraw=!0,this)},MP.canvas=function(){return this._canvas},MP.context=function(){return this._canvas?this._canvas.getContext('2d'):null},MP._render=function(bB,_B){var xB=this.context(),vB=this._origin,kB=this._width,wB=this._height,SB;return xB.save(),SB=!_B||this._redraw?(this._redraw=!1,null):mo(xB,_B),this.clear(-vB[0],-vB[1],kB,wB),this.draw(xB,bB,SB),xB.restore(),this},MP.draw=function(bB,_B,xB){var vB=SP[_B.marktype];_B.clip&&uo(bB,_B),vB.draw.call(this,bB,_B,xB),_B.clip&&bB.restore()},MP.clear=function(bB,_B,xB,vB){var kB=this.context();kB.clearRect(bB,_B,xB,vB),null!=this._bgcolor&&(kB.fillStyle=this._bgcolor,kB.fillRect(bB,_B,xB,vB))};var LP=Ue(yo,io);LP.initialize=function(bB,_B,xB){var vB=this._svg;return vB&&(vB.removeEventListener('click',this._hrefHandler),vB.removeEventListener('mouseover',this._tooltipHandler),vB.removeEventListener('mouseout',this._tooltipHandler)),this._svg=vB=bB&&qa(bB,'svg'),vB&&(vB.addEventListener('click',this._hrefHandler),vB.addEventListener('mouseover',this._tooltipHandler),vB.addEventListener('mouseout',this._tooltipHandler)),io.prototype.initialize.call(this,bB,_B,xB)},LP.svg=function(){return this._svg},LP.on=function(bB,_B){var xB=this.eventName(bB),vB=this._handlers,kB={type:bB,handler:_B,listener:bo(this,_B)};return(vB[xB]||(vB[xB]=[])).push(kB),this._svg&&this._svg.addEventListener(xB,kB.listener),this},LP.off=function(bB,_B){var xB=this.eventName(bB),vB=this._svg,kB=this._handlers[xB],wB;if(kB){for(wB=kB.length;0<=--wB;)(kB[wB].type!==bB||_B)&&kB[wB].handler!==_B||(this._svg&&vB.removeEventListener(xB,kB[wB].listener),kB.splice(wB,1));return this}};var UP={version:'1.1',xmlns:'http://www.w3.org/2000/svg',"xmlns:xlink":'http://www.w3.org/1999/xlink'},FP={fill:'fill',fillOpacity:'fill-opacity',stroke:'stroke',strokeWidth:'stroke-width',strokeOpacity:'stroke-opacity',strokeCap:'stroke-linecap',strokeJoin:'stroke-linejoin',strokeDash:'stroke-dasharray',strokeDashOffset:'stroke-dashoffset',strokeMiterLimit:'stroke-miterlimit',opacity:'opacity'},jP=Object.keys(FP),IP=UP.xmlns,$P=Ue(vo,ro),NP=ro.prototype;$P.initialize=function(bB,_B,xB,vB){return bB&&(this._svg=La(bB,0,'svg',IP),this._svg.setAttribute('class','marks'),Ua(bB,1),this._root=La(this._svg,0,'g',IP),Ua(this._svg,1)),this._defs={clip_id:1,gradient:{},clipping:{}},this.background(this._bgcolor),NP.initialize.call(this,bB,_B,xB,vB)},$P.background=function(bB){return arguments.length&&this._svg&&this._svg.style.setProperty('background-color',bB),NP.background.apply(this,arguments)},$P.resize=function(bB,_B,xB){return NP.resize.call(this,bB,_B,xB),this._svg&&(this._svg.setAttribute('width',this._width),this._svg.setAttribute('height',this._height),this._svg.setAttribute('viewBox','0 0 '+this._width+' '+this._height),this._root.setAttribute('transform','translate('+this._origin+')')),this},$P.svg=function(){if(!this._svg)return null;var bB={class:'marks',width:this._width,height:this._height,viewBox:'0 0 '+this._width+' '+this._height};for(var _B in UP)bB[_B]=UP[_B];return _o('svg',bB)+this._svg.innerHTML+xo('svg')},$P._render=function(bB,_B){return this._dirtyCheck(_B)&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,bB),Ua(this._root,1)),this.updateDefs(),this},$P.updateDefs=function(){var bB=this._svg,_B=this._defs,xB=_B.el,vB=0,kB;for(kB in _B.gradient)xB||(_B.el=xB=La(bB,0,'defs',IP)),ko(xB,_B.gradient[kB],vB++);for(kB in _B.clipping)xB||(_B.el=xB=La(bB,0,'defs',IP)),wo(xB,_B.clipping[kB],vB++);xB&&(0===vB?(bB.removeChild(xB),_B.el=null):Ua(xB,vB))},$P._resetDefs=function(){var bB=this._defs;bB.clip_id=1,bB.gradient={},bB.clipping={}},$P.isDirty=function(bB){return this._dirtyAll||!bB._svg||bB.dirty===this._dirtyID},$P._dirtyCheck=function(bB){if(this._dirtyAll=!0,!bB)return!0;var _B=++this._dirtyID,xB,vB,kB,wB,SB,CB,zB;for(SB=0,CB=bB.length;SB<CB;++SB){if(xB=bB[SB],vB=xB.mark,vB.marktype!==kB&&(kB=vB.marktype,wB=SP[kB]),vB.zdirty&&vB.dirty!==_B&&(this._dirtyAll=!1,vB.dirty=_B,Eo(vB.group,_B)),xB.exit){wB.nested&&vB.items.length?(zB=vB.items[0],zB._svg&&this._update(wB,zB._svg,zB)):xB._svg&&xB._svg.parentNode.removeChild(xB._svg),xB._svg=null;continue}xB=wB.nested?vB.items[0]:xB,xB._update===_B||(xB._svg&&xB._svg.ownerSVGElement?this._update(wB,xB._svg,xB):(this._dirtyAll=!1,Eo(xB,_B)),xB._update=_B)}return!this._dirtyAll},$P.draw=function(bB,_B,xB){function vB(PB){var AB=kB.isDirty(PB),OB=Co(PB,RB,zB,wB.tag);AB&&(kB._update(wB,OB,PB),CB&&So(kB,OB,PB)),zB=OB,++TB}if(!this.isDirty(_B))return _B._svg;var kB=this,wB=SP[_B.marktype],SB=!1===_B.interactive?'none':null,CB='g'===wB.tag,zB=null,TB=0,RB;return RB=Co(_B,bB,xB,'g'),RB.setAttribute('class',Fa(_B)),!CB&&SB&&RB.style.setProperty('pointer-events',SB),_B.clip&&RB.setAttribute('clip-path',ir(kB,_B,_B.group)),wB.nested?_B.items.length&&vB(_B.items[0]):Gd(_B,vB),Ua(RB,TB),RB};var BP=null,YP=null,GP={group:function(_B,xB,vB){YP=xB.__values__,BP=xB.childNodes[1],_B.foreground(zo,vB,this),BP=xB.childNodes[0],_B.background(zo,vB,this);var kB=!1===vB.mark.interactive?'none':null;kB!==YP.events&&(BP.style.setProperty('pointer-events',kB),YP.events=kB)},text:function(_B,xB,vB){var kB=Nr(vB);kB!==YP.text&&(xB.textContent=kB,YP.text=kB),kB=Yr(vB),kB!==YP.font&&(xB.style.setProperty('font',kB),YP.font=kB)}};$P._update=function(bB,_B,xB){BP=_B,YP=_B.__values__,bB.attr(zo,xB,this);var vB=GP[bB.type];vB&&vB.call(this,bB,_B,xB),this.style(BP,xB)},$P.style=function(bB,_B){if(null!=_B){var xB,vB,kB,wB,SB;for(xB=0,vB=jP.length;xB<vB;++xB)kB=jP[xB],SB=_B[kB],SB===YP[kB]||(wB=FP[kB],null==SB?'fill'===wB?bB.style.setProperty(wB,'none'):bB.style.removeProperty(wB):(SB.id&&(this._defs.gradient[SB.id]=SB,SB='url('+To()+'#'+SB.id+')'),bB.style.setProperty(wB,SB+'')),YP[kB]=SB)}};var WP=Ue(Ro,ro),HP=ro.prototype;WP.resize=function(bB,_B,xB){HP.resize.call(this,bB,_B,xB);var vB=this._origin,kB=this._text,wB={class:'marks',width:this._width,height:this._height,viewBox:'0 0 '+this._width+' '+this._height};for(var SB in UP)wB[SB]=UP[SB];return kB.head=_o('svg',wB),kB.root=_o('g',{transform:'translate('+vB+')'}),kB.foot=xo('g')+xo('svg'),this},WP.svg=function(){var bB=this._text;return bB.head+bB.defs+bB.root+bB.body+bB.foot},WP._render=function(bB){return this._text.body=this.mark(bB),this._text.defs=this.buildDefs(),this},WP.reset=function(){return this._defs.clip_id=0,this},WP.buildDefs=function(){var bB=this._defs,_B='',xB,vB,kB,wB;for(vB in bB.gradient){for(kB=bB.gradient[vB],wB=kB.stops,_B+=_o('linearGradient',{id:vB,x1:kB.x1,x2:kB.x2,y1:kB.y1,y2:kB.y2}),xB=0;xB<wB.length;++xB)_B+=_o('stop',{offset:wB[xB].offset,"stop-color":wB[xB].color})+xo('stop');_B+=xo('linearGradient')}for(vB in bB.clipping)kB=bB.clipping[vB],_B+=_o('clipPath',{id:vB}),_B+=_o('rect',{x:0,y:0,width:kB.width,height:kB.height})+xo('rect'),_B+=xo('clipPath');return 0<_B.length?_o('defs')+_B+xo('defs'):''};var XP;WP.attributes=function(bB,_B){return XP={},bB(Po,_B,this),XP},WP.href=function(bB){var _B=this,xB=bB.href,vB;if(xB){if(vB=_B._hrefs&&_B._hrefs[xB])return vB;_B.sanitizeURL(xB).then(function(kB){kB['xlink:href']=kB.href,kB.href=null,(_B._hrefs||(_B._hrefs={}))[xB]=kB})}return null},WP.mark=function(bB){function _B(zB){var TB=xB.href(zB);TB&&(SB+=_o('a',TB)),CB='g'===kB?null:Ao(zB,bB,kB,wB),SB+=_o(kB,xB.attributes(vB.attr,zB),CB),'text'===kB?SB+=Oo(Nr(zB)):'g'===kB&&(SB+=_o('path',xB.attributes(vB.background,zB),Ao(zB,bB,'bgrect',wB))+xo('path'),SB+=_o('g',xB.attributes(vB.foreground,zB))+xB.markGroup(zB)+xo('g')),SB+=xo(kB),TB&&(SB+=xo('a'))}var xB=this,vB=SP[bB.marktype],kB=vB.tag,wB=this._defs,SB='',CB;return'g'!==kB&&!1===bB.interactive&&(CB='style="pointer-events: none;"'),SB+=_o('g',{class:Fa(bB),"clip-path":bB.clip?ir(xB,bB,bB.group):null},CB),vB.nested?bB.items&&bB.items.length&&_B(bB.items[0]):Gd(bB,_B),SB+xo('g')},WP.markGroup=function(bB){var _B=this,xB='';return Gd(bB,function(vB){xB+=_B.mark(vB)}),xB};var VP='canvas',JP='png',ZP='svg',KP='none',QP={Canvas:VP,PNG:JP,SVG:ZP,None:KP},eA={};eA[VP]=eA[JP]={renderer:go,headless:go,handler:so},eA[ZP]={renderer:vo,headless:Ro,handler:yo},eA[KP]={};var tA=1e-9,nA=1,aA='_:mod:_',iA=Wo.prototype;iA.set=function(bB,_B,xB,vB){var kB=this,wB=kB[bB],SB=kB[aA];return null!=_B&&0<=_B?(wB[_B]!==xB||vB)&&(wB[_B]=xB,SB[_B+':'+bB]=-1,SB[bB]=-1):(wB!==xB||vB)&&(kB[bB]=xB,SB[bB]=Qz(xB)?xB.length:-1),kB},iA.modified=function(bB,_B){var xB=this[aA],vB;if(!arguments.length){for(vB in xB)if(xB[vB])return!0;return!1}if(Qz(bB)){for(vB=0;vB<bB.length;++vB)if(xB[bB[vB]])return!0;return!1}return null!=_B&&0<=_B?_B<xB[bB]||!!xB[_B+':'+bB]:!!xB[bB]},iA.clear=function(){return this[aA]={},this};var dA=0,oA=new Wo,fA=Ho.prototype;fA.targets=function(){return this._targets||(this._targets=Uo(tT))},fA.set=function(bB){return this.value===bB?0:(this.value=bB,1)},fA.skip=Xo(1),fA.modified=Xo(2),fA.parameters=function(bB,_B){function xB(PB,AB,OB){OB instanceof Ho?(OB!==vB&&(_B&&OB.targets().add(vB),SB.push(OB)),wB.push({op:OB,name:PB,index:AB})):kB.set(PB,AB,OB)}_B=!1!==_B;var vB=this,kB=vB._argval=vB._argval||new Wo,wB=vB._argops=vB._argops||[],SB=[],CB,zB,TB,RB;for(CB in bB)if(zB=bB[CB],CB==='pulse')Pe(zB).forEach(function(PB){PB instanceof Ho?PB!==vB&&(PB.targets().add(vB),SB.push(PB)):ke('Pulse parameters must be operator instances.')}),vB.source=zB;else if(Qz(zB))for(kB.set(CB,-1,Array(TB=zB.length)),RB=0;RB<TB;++RB)xB(CB,RB,zB[RB]);else xB(CB,-1,zB);return this.marshall().clear(),SB},fA.marshall=function(bB){var _B=this._argval||oA,xB=this._argops,vB,kB,wB,SB,CB;if(xB&&(wB=xB.length))for(kB=0;kB<wB;++kB)vB=xB[kB],SB=vB.op,CB=SB.modified()&&SB.stamp===bB,_B.set(vB.name,vB.index,SB.value,CB);return _B},fA.evaluate=function(bB){if(this._update){var _B=this.marshall(bB.stamp),xB=this._update(_B,bB);if(_B.clear(),xB!==this.value)this.value=xB;else if(!this.modified())return bB.StopPropagation}},fA.run=function(bB){if(bB.stamp<=this.stamp)return bB.StopPropagation;var _B=this.skip()?(this.skip(!1),0):this.evaluate(bB);return this.stamp=bB.stamp,this.pulse=_B||bB};var cA=0,uA=Zo.prototype;uA._filter=dT,uA._apply=nT,uA.targets=function(){return this._targets||(this._targets=Uo(tT))},uA.consume=function(bB){return arguments.length?(this._consume=!!bB,this):!!this._consume},uA.receive=function(bB){if(this._filter(bB)){for(var _B=this.value=this._apply(bB),xB=this._targets,vB=xB?xB.length:0,kB=0;kB<vB;++kB)xB[kB].receive(_B);this._consume&&(bB.preventDefault(),bB.stopPropagation())}},uA.filter=function(bB){var _B=Ko(bB);return this.targets().add(_B),_B},uA.apply=function(bB){var _B=Ko(null,bB);return this.targets().add(_B),_B},uA.merge=function(){var bB=Ko();this.targets().add(bB);for(var _B=0,xB=arguments.length;_B<xB;++_B)arguments[_B].targets().add(bB);return bB},uA.throttle=function(bB){var _B=-1;return this.filter(function(){var xB=Date.now();return xB-_B>bB?(_B=xB,1):0})},uA.debounce=function(bB){function _B(){var wB=vB.dataflow;xB.receive(vB),vB=null,kB=null,wB&&wB.run&&wB.run()}var xB=Ko(),vB=null,kB=null;return this.targets().add(Ko(null,null,function(wB){vB=wB,kB&&clearTimeout(kB),kB=setTimeout(_B,bB)})),xB},uA.between=function(bB,_B){var xB=!1;return bB.targets().add(Ko(null,null,function(){xB=!0})),_B.targets().add(Ko(null,null,function(){xB=!1})),this.filter(function(){return xB})};var pA={skip:!0},gA={},mA=1,hA=2,yA=4,_A=mA|yA,xA=mA|hA|yA,vA=8,kA=16,wA=32,EA=64,SA=rl.prototype;SA.StopPropagation=gA,SA.ADD=mA,SA.REM=hA,SA.MOD=yA,SA.ADD_REM=mA|hA,SA.ADD_MOD=_A,SA.ALL=xA,SA.REFLOW=vA,SA.SOURCE=kA,SA.NO_SOURCE=wA,SA.NO_FIELDS=EA,SA.fork=function(bB){return new rl(this.dataflow).init(this,bB)},SA.addAll=function(){var bB=this;return this.source&&this.source.length!==this.add.length?(bB=new rl(this.dataflow).init(this),bB.add=bB.source,bB):bB},SA.init=function(bB,_B){var xB=this;return xB.stamp=bB.stamp,xB.encode=bB.encode,bB.fields&&!(_B&EA)&&(xB.fields=bB.fields),xB.add=_B&mA?(xB.addF=bB.addF,bB.add):(xB.addF=null,[]),xB.rem=_B&hA?(xB.remF=bB.remF,bB.rem):(xB.remF=null,[]),xB.mod=_B&yA?(xB.modF=bB.modF,bB.mod):(xB.modF=null,[]),xB.source=_B&wA?(xB.srcF=null,null):(xB.srcF=bB.srcF,bB.source),xB},SA.runAfter=function(bB){this.dataflow.runAfter(bB)},SA.changed=function(bB){var _B=bB||xA;return _B&mA&&this.add.length||_B&hA&&this.rem.length||_B&yA&&this.mod.length},SA.reflow=function(bB){if(bB)return this.fork(xA).reflow();var _B=this.add.length,xB=this.source&&this.source.length;return xB&&xB!==_B&&(this.mod=this.source,_B&&this.filter(yA,ll(this,mA))),this},SA.modifies=function(bB){var _B=Pe(bB),xB=this.fields||(this.fields={});return _B.forEach(function(vB){xB[vB]=!0}),this},SA.modified=function(bB){var _B=this.fields;return this.mod.length&&_B&&(arguments.length?Qz(bB)?bB.some(function(xB){return _B[xB]}):_B[bB]:!!_B)},SA.filter=function(bB,_B){var xB=this;return bB&mA&&(xB.addF=ol(xB.addF,_B)),bB&hA&&(xB.remF=ol(xB.remF,_B)),bB&yA&&(xB.modF=ol(xB.modF,_B)),bB&kA&&(xB.srcF=ol(xB.srcF,_B)),xB},SA.materialize=function(bB){bB=bB||xA;var _B=this;return bB&mA&&_B.addF&&(_B.add=_B.add.filter(_B.addF),_B.addF=null),bB&hA&&_B.remF&&(_B.rem=_B.rem.filter(_B.remF),_B.remF=null),bB&yA&&_B.modF&&(_B.mod=_B.mod.filter(_B.modF),_B.modF=null),bB&kA&&_B.srcF&&(_B.source=_B.source.filter(_B.srcF),_B.srcF=null),_B},SA.visit=function(bB,_B){var xB=_B,vB,kB;return bB&kA?(Qe(this.source,this.srcF,xB),this):(bB&mA&&Qe(this.add,this.addF,xB),bB&hA&&Qe(this.rem,this.remF,xB),bB&yA&&Qe(this.mod,this.modF,xB),bB&vA&&(vB=this.source)&&(kB=this.add.length+this.mod.length,kB===vB.length||(kB?Qe(vB,ll(this,_A),xB):Qe(vB,this.srcF,xB))),this)};var CA={skip:!1,force:!1},zA=Ue(yl,rl);zA.fork=function(){return arguments.length&&arguments[0]&rl.prototype.ALL&&ke('MultiPulse fork does not support tuple change sets.'),new rl(this.dataflow).init(this,0)},zA.changed=function(bB){return this.changes&bB},zA.modified=function(bB){var _B=this,xB=_B.fields;return xB&&_B.changes&_B.MOD?Qz(bB)?bB.some(function(vB){return xB[vB]}):xB[bB]:0},zA.filter=function(){ke('MultiPulse does not support filtering.')},zA.materialize=function(){ke('MultiPulse does not support materialization.')},zA.visit=function(bB,_B){var xB=this.pulses,vB,kB;for(vB=0,kB=xB.length;vB<kB;++vB)xB[vB].stamp===this.stamp&&xB[vB].visit(bB,_B);return this};var TA=El.prototype;TA.size=function(){return this.nodes.length},TA.clear=function(){return this.nodes=[],this},TA.peek=function(){return this.nodes[0]},TA.push=function(bB){var _B=this.nodes;return _B.push(bB),Sl(_B,0,_B.length-1,this.cmp)},TA.pop=function(){var bB=this.nodes,_B=bB.pop(),xB;return bB.length?(xB=bB[0],bB[0]=_B,Cl(bB,0,this.cmp)):xB=_B,xB},TA.replace=function(bB){var _B=this.nodes,xB=_B[0];return _B[0]=bB,Cl(_B,0,this.cmp),xB},TA.pushpop=function(bB){var _B=this.nodes,xB=_B[0];return _B.length&&0>this.cmp(xB,bB)&&(_B[0]=bB,bB=xB,Cl(_B,0,this.cmp)),bB};var RA=zl.prototype;RA.stamp=function(){return this._clock},RA.loader=function(bB){return arguments.length?(this._loader=bB,this):this._loader},RA.cleanThreshold=1e4,RA.add=function(bB,_B,xB,vB){var kB=1,wB=bB instanceof Ho?bB:bB&&bB.prototype instanceof Ho?new bB:Oe(bB)?new Ho(null,bB):(kB=0,new Ho(bB,_B));return this.rank(wB),kB&&(vB=xB,xB=_B),xB&&this.connect(wB,wB.parameters(xB,vB)),this.touch(wB),wB},RA.connect=function(bB,_B){var xB=bB.rank,vB,kB;for(vB=0,kB=_B.length;vB<kB;++vB)if(xB<_B[vB].rank)return void this.rerank(bB)},RA.rank=function(bB){bB.rank=++this._rank},RA.rerank=function(bB){for(var _B=[bB],xB,vB,kB;_B.length;)if(this.rank(xB=_B.pop()),vB=xB._targets)for(kB=vB.length;0<=--kB;)_B.push(vB[kB])},RA.pulse=function(bB,_B,xB){var vB=new rl(this,this._clock+(this._pulse?0:1));return vB.target=bB,this._pulses[bB.id]=_B.pulse(vB,bB.value),this.touch(bB,xB||CA)},RA.touch=function(bB,_B){return this._pulse?this._enqueue(bB):this._touched.add(bB),(_B||CA).skip&&bB.skip(!0),this},RA.update=function(bB,_B,xB){var vB=xB||CA;return(bB.set(_B)||vB.force)&&this.touch(bB,vB),this},RA.changeset=Go,RA.ingest=function(bB,_B,xB){return this.pulse(bB,this.changeset().insert(Ta(_B,xB)))},RA.request=function(bB,_B,xB){var vB=this,kB=vB._pending||gl(vB);kB.requests+=1,vB.loader().load(_B,{context:'dataflow'}).then(function(wB){vB.ingest(bB,wB,xB)},function(wB){vB.warn('Loading failed: '+_B,wB),kB.done()}).then(kB.done).catch(function(wB){vB.warn(wB)})},RA.events=function(bB,_B,xB,vB){var kB=this,wB=Ko(xB,vB),SB=function(PB){PB.dataflow=kB,wB.receive(PB),kB.run()},CB;CB='string'===typeof bB&&'undefined'!==typeof document?document.querySelectorAll(bB):Pe(bB);for(var zB=0,TB=CB.length;zB<TB;++zB)CB[zB].addEventListener(_B,SB);return wB},RA.on=function(bB,_B,xB,vB,kB){var wB=bB instanceof Ho?al:nl;return wB(this,bB,_B,xB,vB,kB),this},RA.run=function(bB){if(!this._touched.length)return 0;if(this._pending)return this.info('Awaiting requests, delaying dataflow run.'),0;var _B=this,xB=0,vB=_B.logLevel(),kB,wB,SB;_B._pulse=new rl(_B,++_B._clock,bB),vB>=sT&&(SB=Date.now(),_B.debug('-- START PROPAGATION ('+_B._clock+') -----')),_B._touched.forEach(function(zB){_B._enqueue(zB,!0)}),_B._touched=Uo(tT);try{for(;0<_B._heap.size();){if(kB=_B._heap.pop(),kB.rank!==kB.qrank){_B._enqueue(kB,!0);continue}wB=kB.run(_B._getPulse(kB,bB)),vB>=fT&&_B.debug(kB.id,wB===gA?'STOP':wB,kB),wB!==gA&&(_B._pulse=wB,kB._targets&&kB._targets.forEach(function(zB){_B._enqueue(zB)})),++xB}}catch(zB){_B.error(zB)}if(_B._pulses={},_B._pulse=null,vB>=sT&&(SB=Date.now()-SB,_B.info('> Pulse '+_B._clock+': '+xB+' operators; '+SB+'ms')),_B._postrun.length){var CB=_B._postrun;_B._postrun=[],CB.forEach(function(zB){try{zB(_B)}catch(TB){_B.error(TB)}})}return xB},RA.runAsync=function(){return this._pending||Promise.resolve(this.run())},RA.runAfter=function(bB){if(this._pulse)this._postrun.push(bB);else try{bB(this)}catch(_B){this.error(_B)}},RA._enqueue=function(bB,_B){var xB=!this._pulses[bB.id];xB&&(this._pulses[bB.id]=this._pulse),(xB||_B)&&(bB.qrank=bB.rank,this._heap.push(bB))},RA._getPulse=function(bB,_B){var xB=bB.source,vB=this._clock,kB;return xB&&Qz(xB)?(kB=xB.map(function(wB){return wB.pulse}),new yl(this,vB,kB,_B)):(xB=xB&&xB.pulse,kB=this._pulses[bB.id],xB&&xB!==gA&&(xB.stamp===vB&&kB.target!==bB?kB=xB:kB.source=xB.source),kB)},RA.warn=Tl('warn'),RA.info=Tl('info'),RA.debug=Tl('debug'),RA.logLevel=Tl('level'),RA.error=function(bB){throw bB};var PA=Ue(Rl,Ho);PA.evaluate=function(bB){var _B=this.marshall(bB.stamp),xB=this.transform(_B,bB);return _B.clear(),xB},PA.transform=function(){};var AA={},OA={},MA=Ml.prototype;MA.add=function(bB){this._add.push(bB)},MA.rem=function(bB){this._rem.push(bB)},MA.values=function(){if(this._get=null,0===this._rem.length)return this._add;var bB=this._add,_B=this._rem,xB=this._key,vB=bB.length,kB=_B.length,wB=Array(vB-kB),SB={},CB,zB,TB;for(CB=0;CB<kB;++CB)SB[_B[CB][xB]]=1;for(CB=0,zB=0;CB<vB;++CB)SB[(TB=bB[CB])[xB]]?SB[TB[xB]]=0:wB[zB++]=TB;return this._rem=[],this._add=wB},MA.distinct=function(bB){for(var _B=this.values(),xB=_B.length,vB={},kB=0,wB;0<=--xB;)wB=bB(_B[xB])+'',vB.hasOwnProperty(wB)||(vB[wB]=1,++kB);return kB},MA.extent=function(bB){if(this._get!==bB||!this._ext){var _B=this.values(),xB=qe(_B,bB);this._ext=[_B[xB[0]],_B[xB[1]]],this._get=bB}return this._ext},MA.argmin=function(bB){return this.extent(bB)[0]||{}},MA.argmax=function(bB){return this.extent(bB)[1]||{}},MA.min=function(bB){var _B=this.extent(bB)[0];return null==_B?+Infinity:bB(_B)},MA.max=function(bB){var _B=this.extent(bB)[1];return null==_B?-Infinity:bB(_B)},MA.quartile=function(bB){return this._get===bB&&this._q||(this._q=ge(this.values(),bB),this._get=bB),this._q},MA.q1=function(bB){return this.quartile(bB)[0]},MA.q2=function(bB){return this.quartile(bB)[1]},MA.q3=function(bB){return this.quartile(bB)[2]},MA.ci=function(bB){return this._get===bB&&this._ci||(this._ci=ce(this.values(),1e3,0.05,bB),this._get=bB),this._ci},MA.ci0=function(bB){return this.ci(bB)[0]},MA.ci1=function(bB){return this.ci(bB)[1]};var DA={values:ql({name:'values',init:'cell.store = true;',set:'cell.data.values()',idx:-1}),count:ql({name:'count',set:'cell.num'}),missing:ql({name:'missing',set:'this.missing'}),valid:ql({name:'valid',set:'this.valid'}),sum:ql({name:'sum',init:'this.sum = 0;',add:'this.sum += v;',rem:'this.sum -= v;',set:'this.sum'}),mean:ql({name:'mean',init:'this.mean = 0;',add:'var d = v - this.mean; this.mean += d / this.valid;',rem:'var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;',set:'this.mean'}),average:ql({name:'average',set:'this.mean',req:['mean'],idx:1}),variance:ql({name:'variance',init:'this.dev = 0;',add:'this.dev += d * (v - this.mean);',rem:'this.dev -= d * (v - this.mean);',set:'this.valid > 1 ? this.dev / (this.valid-1) : 0',req:['mean'],idx:1}),variancep:ql({name:'variancep',set:'this.valid > 1 ? this.dev / this.valid : 0',req:['variance'],idx:2}),stdev:ql({name:'stdev',set:'this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0',req:['variance'],idx:2}),stdevp:ql({name:'stdevp',set:'this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0',req:['variance'],idx:2}),stderr:ql({name:'stderr',set:'this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0',req:['variance'],idx:2}),distinct:ql({name:'distinct',set:'cell.data.distinct(this.get)',req:['values'],idx:3}),ci0:ql({name:'ci0',set:'cell.data.ci0(this.get)',req:['values'],idx:3}),ci1:ql({name:'ci1',set:'cell.data.ci1(this.get)',req:['values'],idx:3}),median:ql({name:'median',set:'cell.data.q2(this.get)',req:['values'],idx:3}),q1:ql({name:'q1',set:'cell.data.q1(this.get)',req:['values'],idx:3}),q3:ql({name:'q3',set:'cell.data.q3(this.get)',req:['values'],idx:3}),argmin:ql({name:'argmin',add:'if (v < this.min) this.argmin = t;',rem:'if (v <= this.min) this.argmin = null;',set:'this.argmin || cell.data.argmin(this.get)',req:['min'],str:['values'],idx:3}),argmax:ql({name:'argmax',add:'if (v > this.max) this.argmax = t;',rem:'if (v >= this.max) this.argmax = null;',set:'this.argmax || cell.data.argmax(this.get)',req:['max'],str:['values'],idx:3}),min:ql({name:'min',init:'this.min = null;',add:'if (v < this.min || this.min === null) this.min = v;',rem:'if (v <= this.min) this.min = NaN;',set:'this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)',str:['values'],idx:4}),max:ql({name:'max',init:'this.max = null;',add:'if (v > this.max || this.max === null) this.max = v;',rem:'if (v >= this.max) this.max = NaN;',set:'this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)',str:['values'],idx:4})},qA=Ue(jl,Rl);qA.transform=function(bB,_B){var xB=this,vB=_B.fork(_B.NO_SOURCE|_B.NO_FIELDS),kB;return this.stamp=vB.stamp,this.value&&((kB=bB.modified())||_B.modified(this._inputs))?(this._prev=this.value,this.value=kB?this.init(bB):{},_B.visit(_B.SOURCE,function(wB){xB.add(wB)})):(this.value=this.value||this.init(bB),_B.visit(_B.REM,function(wB){xB.rem(wB)}),_B.visit(_B.ADD,function(wB){xB.add(wB)})),vB.modifies(this._outputs),xB._drop=!1!==bB.drop,bB.cross&&1<xB._dims.length&&(xB._drop=!1,this.cross()),xB.changes(vB)},qA.cross=function(){function bB(CB){var zB,TB,RB,PB;for(zB in CB)for(RB=CB[zB].tuple,TB=0;TB<SB;++TB)wB[TB][PB=RB[kB[TB]]]=PB}function _B(CB,zB,TB){var RB=kB[TB],PB=wB[TB++],AB,OB;for(AB in PB)zB[RB]=PB[AB],OB=CB?CB+'|'+AB:AB,TB<SB?_B(OB,zB,TB):!vB[OB]&&xB.cell(OB,zB)}var xB=this,vB=xB.value,kB=xB._dnames,wB=kB.map(function(){return{}}),SB=kB.length;bB(xB._prev),bB(vB),_B('',{},0)},qA.init=function(bB){function _B(qB){for(var LB=qB.fields,UB=0,FB=LB.length,jB;UB<FB;++UB)kB[jB=LB[UB]]||(kB[jB]=1,xB.push(jB))}var xB=this._inputs=[],vB=this._outputs=[],kB={};this._dims=Pe(bB.groupby),this._dnames=this._dims.map(function(qB){var LB=xe(qB);return _B(qB),vB.push(LB),LB}),this.cellkey=bB.key?bB.key:0===this._dims.length?function(){return''}:1===this._dims.length?this._dims[0]:$l,this._countOnly=!0,this._counts=[],this._measures=[];var wB=bB.fields||[null],SB=bB.ops||['count'],CB=bB.as||[],zB=wB.length,TB={},RB,PB,AB,OB,MB,DB;for(zB!==SB.length&&ke('Unmatched number of fields and aggregate ops.'),DB=0;DB<zB;++DB){if(RB=wB[DB],PB=SB[DB],null==RB&&'count'!==PB&&ke('Null aggregate field specified.'),OB=xe(RB),MB=Il(PB,OB,CB[DB]),vB.push(MB),'count'===PB){this._counts.push(MB);continue}AB=TB[OB],AB||(_B(RB),AB=TB[OB]=[],AB.field=RB,this._measures.push(AB)),'count'!==PB&&(this._countOnly=!1),AB.push(Dl(PB,MB))}return this._measures=this._measures.map(function(qB){return Fl(qB,qB.field)}),{}},qA.cellkey=$l,qA.cell=function(bB,_B){var xB=this.value[bB];return xB?0===xB.num&&this._drop&&xB.stamp<this.stamp?(xB.stamp=this.stamp,this._adds[this._alen++]=xB):xB.stamp<this.stamp&&(xB.stamp=this.stamp,this._mods[this._mlen++]=xB):(xB=this.value[bB]=this.newcell(bB,_B),this._adds[this._alen++]=xB),xB},qA.newcell=function(bB,_B){var xB={key:bB,num:0,agg:null,tuple:this.newtuple(_B,this._prev&&this._prev[bB]),stamp:this.stamp,store:!1};if(!this._countOnly){var vB=this._measures,kB=vB.length,wB;for(xB.agg=Array(kB),wB=0;wB<kB;++wB)xB.agg[wB]=new vB[wB](xB,xB.tuple)}return xB.store&&(xB.data=new Ml),xB},qA.newtuple=function(bB,_B){var xB=this._dnames,vB=this._dims,kB={},wB,SB;for(wB=0,SB=vB.length;wB<SB;++wB)kB[xB[wB]]=vB[wB](bB);return _B?Bo(_B.tuple,kB):Io(kB)},qA.add=function(bB){var _B=this.cellkey(bB),xB=this.cell(_B,bB),vB,kB,wB;if(xB.num+=1,!this._countOnly)for(xB.store&&xB.data.add(bB),vB=xB.agg,(kB=0,wB=vB.length);kB<wB;++kB)vB[kB].add(vB[kB].get(bB),bB)},qA.rem=function(bB){var _B=this.cellkey(bB),xB=this.cell(_B,bB),vB,kB,wB;if(xB.num-=1,!this._countOnly)for(xB.store&&xB.data.rem(bB),vB=xB.agg,(kB=0,wB=vB.length);kB<wB;++kB)vB[kB].rem(vB[kB].get(bB),bB)},qA.celltuple=function(bB){var _B=bB.tuple,xB=this._counts,vB,kB,wB;for(bB.store&&bB.data.values(),kB=0,wB=xB.length;kB<wB;++kB)_B[xB[kB]]=bB.num;if(!this._countOnly)for(vB=bB.agg,kB=0,wB=vB.length;kB<wB;++kB)vB[kB].set();return _B},qA.changes=function(bB){var _B=this._adds,xB=this._mods,vB=this._prev,kB=this._drop,wB=bB.add,SB=bB.rem,CB=bB.mod,zB,TB,RB,PB;if(vB)for(TB in vB)SB.push(vB[TB].tuple);for(RB=0,PB=this._alen;RB<PB;++RB)wB.push(this.celltuple(_B[RB])),_B[RB]=null;for(RB=0,PB=this._mlen;RB<PB;++RB)zB=xB[RB],(0===zB.num&&kB?SB:CB).push(this.celltuple(zB)),xB[RB]=null;return this._alen=this._mlen=0,this._prev=null,bB};var LA=Ue(Nl,Rl);LA.transform=function(bB,_B){var xB=this._bins(bB),vB=xB.step,kB=bB.as||['bin0','bin1'],wB=kB[0],SB=kB[1],CB=bB.modified()?(_B=_B.reflow(!0),_B.SOURCE):_B.modified(ve(bB.field))?_B.ADD_MOD:_B.ADD;return _B.visit(CB,function(zB){var TB=xB(zB);zB[wB]=TB,zB[SB]=null==TB?null:TB+vB}),_B.modifies(kB)},LA._bins=function(bB){if(this.value&&!bB.modified())return this.value;var _B=bB.field,xB=P(bB),vB=xB.start,kB=xB.stop,wB=xB.step,SB,CB;null!=(SB=bB.anchor)&&(CB=SB-(vB+wB*Math.floor((SB-vB)/wB)),vB+=CB,kB+=CB);var zB=function(RB){var PB=_B(RB);return null==PB?null:(PB=Math.max(vB,Math.min(+PB,kB-wB)),vB+wB*Math.floor((PB-vB)/wB))};return zB.start=vB,zB.stop=kB,zB.step=wB,this.value=_e(zB,ve(_B),bB.name||'bin_'+xe(_B))};var UA=Ue(Bl,Rl);UA.transform=function(bB,_B){var xB=_B.fork(_B.ALL),vB=_B.changed(_B.ADD),kB=_B.changed(),wB=bB.sort,SB=this.value,zB=0,TB;return xB.rem.length&&(TB={},xB.visit(xB.REM,function(RB){TB[RB._id]=1,++zB}),SB=SB.filter(function(RB){return!TB[RB._id]})),wB?((bB.modified('sort')||_B.modified(wB.fields))&&(SB.sort(wB),kB=!0),vB&&(SB=Be(wB,SB,xB.add.sort(wB)))):vB&&xB.visit(xB.ADD,function(PB){SB.push(PB)}),this.modified(kB),this.value=xB.source=SB,xB},Ue(Yl,Ho);var FA=Ue(Wl,Rl);FA.transform=function(bB,_B){function xB(PB){return function(AB){for(var OB=Hl(CB(AB),bB.case,wB)||[],DB=0,qB=OB.length,MB;DB<qB;++DB)SB.test(MB=OB[DB])||PB(MB)}}var vB=this._parameterCheck(bB,_B),kB=this._counts,wB=this._match,SB=this._stop,CB=bB.field,zB=bB.as||['text','count'],TB=xB(function(PB){kB[PB]=1+(kB[PB]||0)}),RB=xB(function(PB){kB[PB]-=1});return vB?_B.visit(_B.SOURCE,TB):(_B.visit(_B.ADD,TB),_B.visit(_B.REM,RB)),this._finish(_B,zB)},FA._parameterCheck=function(bB,_B){var xB=!1;return(bB.modified('stopwords')||!this._stop)&&(this._stop=new RegExp('^'+(bB.stopwords||'')+'$','i'),xB=!0),(bB.modified('pattern')||!this._match)&&(this._match=new RegExp(bB.pattern||'[\\w\']+','g'),xB=!0),(bB.modified('field')||_B.modified(bB.field.fields))&&(xB=!0),xB&&(this._counts={}),xB},FA._finish=function(bB,_B){var xB=this._counts,vB=this._tuples||(this._tuples={}),kB=_B[0],wB=_B[1],SB=bB.fork(),CB,zB,TB;for(CB in xB)zB=vB[CB],TB=xB[CB]||0,!zB&&TB?(vB[CB]=zB=Io({}),zB[kB]=CB,zB[wB]=TB,SB.add.push(zB)):0===TB?(zB&&SB.rem.push(zB),xB[CB]=null,vB[CB]=null):zB[wB]!==TB&&(zB[wB]=TB,SB.mod.push(zB));return SB.modifies(_B)};var jA=Ue(Xl,Rl);jA.transform=function(bB,_B){var xB=_B.fork(_B.NO_SOURCE),vB=this.value,kB=bB.as||['a','b'],wB=kB[0],SB=kB[1],CB=!vB||_B.changed(_B.ADD_REM)||bB.modified('as')||bB.modified('filter');return CB?(vB&&(xB.rem=vB),xB.add=this.value=Vl(_B.source,wB,SB,bB.filter||dT)):xB.mod=vB,xB.source=this.value,xB.modifies(kB)};var IA={kde:me,mixture:ye,normal:pe,uniform:be},$A='distributions',NA='function',BA='field',YA=Ue(Zl,Rl);YA.transform=function(bB,_B){var xB=_B.fork(_B.NO_SOURCE|_B.NO_FIELDS);if(!this.value||_B.changed()||bB.modified()){var vB=Jl(bB.distribution,Kl(_B)),kB=bB.method||'pdf';'pdf'!==kB&&'cdf'!==kB&&ke('Invalid density method: '+kB),bB.extent||vB.data||ke('Missing density extent parameter.'),kB=vB[kB];var wB=bB.as||['value','density'],SB=bB.extent||V(vB.data()),CB=(SB[1]-SB[0])/(bB.steps||100),zB=J(SB[0],SB[1]+CB/2,CB).map(function(TB){var RB={};return RB[wB[0]]=TB,RB[wB[1]]=kB(TB),Io(RB)});this.value&&(xB.rem=this.value),this.value=xB.add=xB.source=zB}return xB};var GA=Ue(Ql,Rl);GA.transform=function(bB,_B){var xB=this.value,vB=bB.field,kB=xB[0],wB=xB[1],SB=_B.ADD,CB;CB=_B.changed()||_B.modified(vB.fields)||bB.modified('field'),CB&&(SB=_B.SOURCE,kB=+Infinity,wB=-Infinity),_B.visit(SB,function(zB){var TB=vB(zB);TB<kB&&(kB=TB),TB>wB&&(wB=TB)}),this.value=[kB,wB]};var WA=Ue(es,Ho);WA.connect=function(bB){return this.targets().add(bB),bB.source=this},WA.add=function(bB){this.value.add.push(bB)},WA.rem=function(bB){this.value.rem.push(bB)},WA.mod=function(bB){this.value.mod.push(bB)},WA.init=function(bB){this.value.init(bB,bB.NO_SOURCE)},WA.evaluate=function(){return this.value};var HA=Ue(is,Rl);HA.activate=function(bB){this._targets[this._targets.active++]=bB},HA.subflow=function(bB,_B,xB,vB){var kB=this.value,wB=kB.hasOwnProperty(bB)&&kB[bB],SB,CB;return wB?wB.value.stamp<xB.stamp&&(wB.init(xB),this.activate(wB)):(CB=vB||(CB=this._group[bB])&&CB.tuple,SB=xB.dataflow,wB=SB.add(new es(xB.fork(xB.NO_SOURCE),this)).connect(_B(SB,bB,CB)),kB[bB]=wB,this.activate(wB)),wB},HA.transform=function(bB,_B){function xB(TB){return kB.subflow(TB,SB,_B)}var vB=_B.dataflow,kB=this,wB=bB.key,SB=bB.subflow,CB=this._keys,zB=bB.modified('key');return this._group=bB.group||{},this._targets.active=0,_B.visit(_B.ADD,function(TB){var RB=wB(TB);CB.set(TB._id,RB),xB(RB).add(TB)}),_B.visit(_B.REM,function(TB){var RB=CB.get(TB._id);CB.delete(TB._id),xB(RB).rem(TB)}),zB||_B.modified(wB.fields)?_B.visit(_B.MOD,function(TB){var RB=CB.get(TB._id),PB=wB(TB);RB===PB?xB(PB).mod(TB):(CB.set(TB._id,PB),xB(RB).rem(TB),xB(PB).add(TB))}):_B.changed(_B.MOD)&&_B.visit(_B.MOD,function(TB){xB(CB.get(TB._id)).mod(TB)}),zB&&_B.visit(_B.REFLOW,function(TB){var RB=CB.get(TB._id),PB=wB(TB);RB!==PB&&(CB.set(TB._id,PB),xB(RB).rem(TB),xB(PB).add(TB))}),CB.empty>vB.cleanThreshold&&vB.runAfter(CB.clean),_B},Ue(rs,Ho);var XA=Ue(ls,Rl);XA.transform=function(bB,_B){function xB(PB){var AB=TB(PB,bB),OB=kB.get(PB._id);AB&&OB?(kB.delete(PB._id),SB.push(PB)):AB||OB?RB&&AB&&!OB&&zB.push(PB):(kB.set(PB._id,1),CB.push(PB))}var vB=_B.dataflow,kB=this.value,wB=_B.fork(),SB=wB.add,CB=wB.rem,zB=wB.mod,TB=bB.expr,RB=!0;return _B.visit(_B.REM,function(PB){kB.has(PB._id)?kB.delete(PB._id):CB.push(PB)}),_B.visit(_B.ADD,function(PB){TB(PB,bB)?SB.push(PB):kB.set(PB._id,1)}),_B.visit(_B.MOD,xB),bB.modified()&&(RB=!1,_B.visit(_B.REFLOW,xB)),kB.empty>vB.cleanThreshold&&vB.runAfter(kB.clean),wB};var VA=Ue(cs,Rl);VA.transform=function(bB,_B){function xB(LB){for(var UB=kB[LB._id]=Array(PB),FB=0,jB;FB<PB;++FB)jB=UB[FB]=$o(LB),jB[zB]=RB[FB],jB[TB]=SB[FB](LB),OB.add.push(jB)}function vB(LB){for(var UB=kB[LB._id],FB=0,jB;FB<PB;++FB)DB&1<<FB&&(jB=No(LB,UB[FB],AB),jB[zB]=RB[FB],jB[TB]=SB[FB](LB),OB.mod.push(jB))}var kB=this.value,wB=bB.modified('fields'),SB=bB.fields,CB=bB.as||['key','value'],zB=CB[0],TB=CB[1],RB=SB.map(us),PB=SB.length,AB=_B.stamp,OB=_B.fork(_B.NO_SOURCE),MB=0,DB=0,qB;if(wB){for(qB in kB)OB.rem.push.apply(OB.rem,kB[qB]);kB=this.value={},_B.visit(_B.SOURCE,xB)}else{for(_B.visit(_B.ADD,xB);MB<PB;++MB)_B.modified(SB[MB].fields)&&(DB|=1<<MB);DB&&_B.visit(_B.MOD,vB),_B.visit(_B.REM,function(LB){OB.rem.push.apply(OB.rem,kB[LB._id]),kB[LB._id]=null})}return OB.modifies(CB)};var JA=Ue(ps,Rl);JA.transform=function(bB,_B){var vB=bB.expr,kB=bB.as,wB=bB.modified(),SB=bB.initonly?_B.ADD:wB?_B.SOURCE:_B.modified(vB.fields)?_B.ADD_MOD:_B.ADD;return wB&&(_B=_B.materialize().reflow(!0)),_B.visit(SB,function(CB){CB[kB]=vB(CB,bB)}).modifies(kB)};var ZA=Ue(gs,Rl);ZA.transform=function(bB,_B){var xB=this.value,vB=_B.fork(_B.ALL),kB=bB.size-xB.length,wB=bB.generator,SB,CB,zB;if(0<kB){for(SB=[];0<=--kB;)SB.push(zB=Io(wB(bB))),xB.push(zB);vB.add=vB.add.length?vB.materialize(vB.ADD).add.concat(SB):SB}else CB=xB.slice(0,-kB),vB.rem=vB.rem.length?vB.materialize(vB.REM).rem.concat(CB):CB,xB=xB.slice(-kB);return vB.source=this.value=xB,vB};var KA={value:'value',median:function(bB,_B){var xB=bB.length,vB=-1,wB=[],kB;if(null==_B)for(;++vB<xB;)isNaN(kB=W(bB[vB]))||wB.push(kB);else for(;++vB<xB;)isNaN(kB=W(_B(bB[vB],vB,bB)))||wB.push(kB);return ne(wB.sort(U),0.5)},mean:function(bB,_B){var xB=bB.length,vB=xB,kB=-1,SB=0,wB;if(null==_B)for(;++kB<xB;)isNaN(wB=W(bB[kB]))?--vB:SB+=wB;else for(;++kB<xB;)isNaN(wB=W(_B(bB[kB],kB,bB)))?--vB:SB+=wB;return vB?SB/vB:void 0},min:function(bB,_B){var xB=bB.length,vB=-1,kB,wB;if(null==_B){for(;++vB<xB;)if(null!=(kB=bB[vB])&&kB>=kB)for(wB=kB;++vB<xB;)null!=(kB=bB[vB])&&wB>kB&&(wB=kB);}else for(;++vB<xB;)if(null!=(kB=_B(bB[vB],vB,bB))&&kB>=kB)for(wB=kB;++vB<xB;)null!=(kB=_B(bB[vB],vB,bB))&&wB>kB&&(wB=kB);return wB},max:ae},QA=[],eO=Ue(ms,Rl);eO.transform=function(bB,_B){var xB=_B.fork(_B.ALL),vB=hs(bB),kB=ys(bB),wB=xe(bB.field),SB=bB.groupby.map(xe),CB=bB.orderby.map(xe),zB=_s(_B.source,bB.groupby,bB.orderby),TB=[],RB=this.value,PB=zB.domain.length,AB,OB,MB,DB,qB,LB,UB,FB,jB,IB;for(qB=0,FB=zB.length;qB<FB;++qB)for(AB=zB[qB],MB=AB.values,OB=NaN,UB=0;UB<PB;++UB)if(null==AB[UB]){for(DB=zB.domain[UB],IB={_impute:!0},(LB=0,jB=MB.length);LB<jB;++LB)IB[SB[LB]]=MB[LB];for(LB=0,jB=DB.length;LB<jB;++LB)IB[CB[LB]]=DB[LB];IB[wB]=isNaN(OB)?OB=vB(AB,kB):OB,TB.push(Io(IB))}return TB.length&&(xB.add=xB.materialize(xB.ADD).add.concat(TB)),RB.length&&(xB.rem=xB.materialize(xB.REM).rem.concat(RB)),this.value=TB,xB},Ue(xs,Ho);var tO=Ue(ks,Rl);tO.transform=function(bB,_B){var xB=_B,vB=bB.as,kB=bB.fields,wB=bB.index,SB=bB.values,CB=null==bB.default?null:bB.default,zB=bB.modified(),TB=zB?_B.SOURCE:_B.ADD,RB=kB.length,PB,AB,OB;return SB?(AB=SB.length,1<RB&&!vB&&ke('Multi-field lookup requires explicit "as" parameter.'),vB&&vB.length!==RB*AB&&ke('The "as" parameter has too few output field names.'),vB=vB||SB.map(xe),PB=function(DB){for(var qB=0,LB=0,UB,FB;qB<RB;++qB)if(FB=wB.get(kB[qB](DB)),null==FB)for(UB=0;UB<AB;++UB,++LB)DB[vB[LB]]=CB;else for(UB=0;UB<AB;++UB,++LB)DB[vB[LB]]=SB[UB](FB)}):(!vB&&ke('Missing output field names.'),PB=function(DB){for(var qB=0,LB;qB<RB;++qB)LB=wB.get(kB[qB](DB)),DB[vB[qB]]=null==LB?CB:LB}),zB?xB=_B.reflow(!0):(OB=kB.some(function(MB){return _B.modified(MB.fields)}),TB|=OB?_B.MOD:0),_B.visit(TB,PB),xB.modifies(vB)},Ue(ws,Ho),Ue(Ss,Ho),Ue(zs,Rl),zs.prototype.transform=function(bB,_B){return this.modified(bB.modified()),this.value=bB,_B.fork(_B.NO_SOURCE|_B.NO_FIELDS)};var nO=Ue(Ts,is);nO.transform=function(bB,_B){var xB=this,vB=bB.subflow,kB=bB.field;return bB.modified('field')&&ke('PreFacet does not support field modification.'),this._targets.active=0,_B.visit(_B.MOD,function(wB){var SB=xB.subflow(wB._id,vB,_B,wB);kB?kB(wB).forEach(function(CB){SB.mod(CB)}):SB.mod(wB)}),_B.visit(_B.ADD,function(wB){var SB=xB.subflow(wB._id,vB,_B,wB);kB?kB(wB).forEach(function(CB){SB.add(Io(CB))}):SB.add(wB)}),_B.visit(_B.REM,function(wB){var SB=xB.subflow(wB._id,vB,_B,wB);kB?kB(wB).forEach(function(CB){SB.rem(CB)}):SB.rem(wB)}),_B};var aO=Ue(Rs,Rl);aO.transform=function(bB,_B){return this.value=bB.value,bB.modified('value')?_B.fork(_B.NO_SOURCE|_B.NO_FIELDS):_B.StopPropagation};var iO=Ue(Ps,Rl);iO.transform=function(bB,_B){_B.source||ke('Rank transform requires an upstream data source.');var xB=bB.normalize,vB=bB.field,kB=bB.as||'rank',wB={},SB=-1,CB;return vB?(_B.visit(_B.SOURCE,function(zB){var TB=vB(zB);null==wB[TB]&&(wB[TB]=++SB)}),_B.visit(_B.SOURCE,xB&&--SB?function(zB){zB[kB]=wB[vB(zB)]/SB}:function(zB){zB[kB]=wB[vB(zB)]})):(SB+=_B.source.length,CB=-1,_B.visit(_B.SOURCE,xB&&SB?function(zB){zB[kB]=++CB/SB}:function(zB){zB[kB]=++CB})),_B.reflow(bB.modified()).modifies(kB)};var dO=Ue(As,Rl);dO.transform=function(bB,_B){var vB=this.value||(xB=_B=_B.addAll(),this.value={}),xB;return bB.derive&&(xB=_B.fork(),_B.visit(_B.ADD,function(kB){var wB=$o(kB);vB[kB._id]=wB,xB.add.push(wB)}),_B.visit(_B.MOD,function(kB){xB.mod.push(No(kB,vB[kB._id]))}),_B.visit(_B.REM,function(kB){xB.rem.push(vB[kB._id]),vB[kB._id]=null})),xB};var rO=Ue(Os,Rl);rO.transform=function(bB,_B){function xB(AB){var OB,MB;SB.length<wB?SB.push(AB):(MB=~~(CB*Math.random()),MB<SB.length&&MB>=zB&&(OB=SB[MB],TB[OB._id]&&vB.rem.push(OB),SB[MB]=AB)),++CB}var vB=_B.fork(),kB=bB.modified('size'),wB=bB.size,SB=this.value,CB=this.count,zB=0,TB=SB.reduce(function(AB,OB){return AB[OB._id]=1,AB},{});if(_B.rem.length&&(_B.visit(_B.REM,function(AB){TB[AB._id]&&(TB[AB._id]=-1,vB.rem.push(AB)),--CB}),SB=SB.filter(function(AB){return-1!==TB[AB._id]})),(_B.rem.length||kB)&&SB.length<wB&&_B.source&&(zB=CB=SB.length,_B.visit(_B.SOURCE,function(AB){TB[AB._id]||xB(AB)}),zB=-1),kB&&SB.length>wB){for(var RB=0,PB=SB.length-wB;RB<PB;++RB)TB[SB[RB]._id]=-1,vB.rem.push(SB[RB]);SB=SB.slice(PB)}return _B.mod.length&&_B.visit(_B.MOD,function(AB){TB[AB._id]&&vB.mod.push(AB)}),_B.add.length&&_B.visit(_B.ADD,xB),(_B.add.length||0>zB)&&(vB.add=SB.filter(function(AB){return!TB[AB._id]})),this.count=CB,this.value=vB.source=SB,vB};var oO=Ue(Ms,Rl);oO.transform=function(bB,_B){if(!this.value||bB.modified()){var xB=_B.materialize().fork(_B.MOD);return xB.rem=this.value?_B.rem.concat(this.value):_B.rem,xB.source=this.value=J(bB.start,bB.stop,bB.step||1).map(Io),xB.add=_B.add.concat(this.value),xB}};var lO=Ue(Ds,Rl);lO.transform=function(bB,_B){return this.value=_B.source,_B.changed()?_B.fork(_B.NO_SOURCE|_B.NO_FIELDS):_B.StopPropagation};var sO=Ue(qs,Rl);sO.transform=function(bB,_B){function xB(CB){wB.set(kB(CB),CB)}var vB=_B.dataflow,kB=bB.field,wB=this.value,SB=!0;return bB.modified('field')||_B.modified(kB.fields)?(wB.clear(),_B.visit(_B.SOURCE,xB)):_B.changed()?(_B.visit(_B.REM,function(CB){wB.delete(kB(CB))}),_B.visit(_B.ADD,xB)):SB=!1,this.modified(SB),wB.empty>vB.cleanThreshold&&vB.runAfter(wB.clean),_B.fork()};var fO=Ue(Ls,Rl);fO.transform=function(bB,_B){var xB=!this.value||bB.modified('field')||bB.modified('sort')||_B.changed()||bB.sort&&_B.modified(bB.sort.fields);xB&&(this.value=(bB.sort?_B.source.slice().sort(bB.sort):_B.source).map(bB.field))};var hO=[{key:{function:'normal'},params:[{name:'mean',type:'number',default:0},{name:'stdev',type:'number',default:1}]},{key:{function:'uniform'},params:[{name:'min',type:'number',default:0},{name:'max',type:'number',default:1}]},{key:{function:'kde'},params:[{name:'field',type:'field',required:!0},{name:'from',type:'data'},{name:'bandwidth',type:'number',default:0}]}],bO={type:'Density',metadata:{generates:!0,source:!0},params:[{name:'extent',type:'number',array:!0,length:2},{name:'steps',type:'number',default:100},{name:'method',type:'string',default:'pdf',values:['pdf','cdf']},{name:'distribution',type:'param',params:hO.concat({key:{function:'mixture'},params:[{name:'distributions',type:'param',array:!0,params:hO},{name:'weights',type:'number',array:!0}]})},{name:'as',type:'string',array:!0,default:['value','density']}]};Pl({type:'Aggregate',metadata:{generates:!0,changes:!0},params:[{name:'groupby',type:'field',array:!0},{name:'fields',type:'field',array:!0},{name:'ops',type:'enum',array:!0,values:['count','valid','missing','distinct','sum','mean','average','variance','variancep','stdev','stdevp','stderr','median','q1','q3','ci0','ci1','min','max','argmin','argmax']},{name:'as',type:'string',array:!0},{name:'drop',type:'boolean',default:!0},{name:'cross',type:'boolean',default:!1},{name:'key',type:'field'}]},jl),Pl({type:'Bin',metadata:{modifies:!0},params:[{name:'field',type:'field',required:!0},{name:'anchor',type:'number'},{name:'maxbins',type:'number',default:20},{name:'base',type:'number',default:10},{name:'divide',type:'number',array:!0,default:[5,2]},{name:'extent',type:'number',array:!0,length:2,required:!0},{name:'step',type:'number'},{name:'steps',type:'number',array:!0},{name:'minstep',type:'number',default:0},{name:'nice',type:'boolean',default:!0},{name:'name',type:'string'},{name:'as',type:'string',array:!0,length:2,default:['bin0','bin1']}]},Nl),Pl({type:'Collect',metadata:{source:!0},params:[{name:'sort',type:'compare'}]},Bl),Pl({type:'CountPattern',metadata:{generates:!0,changes:!0},params:[{name:'field',type:'field',required:!0},{name:'case',type:'enum',values:['upper','lower','mixed'],default:'mixed'},{name:'pattern',type:'string',default:'[\\w"]+'},{name:'stopwords',type:'string',default:''},{name:'as',type:'string',array:!0,length:2,default:['text','count']}]},Wl),Pl({type:'Cross',metadata:{source:!0,generates:!0,changes:!0},params:[{name:'filter',type:'expr'},{name:'as',type:'string',array:!0,length:2,default:['a','b']}]},Xl),Pl(bO,Zl),Pl({type:'Extent',metadata:{},params:[{name:'field',type:'field',required:!0}]},Ql),Pl({type:'Filter',metadata:{changes:!0},params:[{name:'expr',type:'expr',required:!0}]},ls),Pl({type:'Fold',metadata:{generates:!0,changes:!0},params:[{name:'fields',type:'field',array:!0,required:!0},{name:'as',type:'string',array:!0,length:2,default:['key','value']}]},cs),Pl({type:'Formula',metadata:{modifies:!0},params:[{name:'expr',type:'expr',required:!0},{name:'as',type:'string',required:!0},{name:'initonly',type:'boolean'}]},ps),Pl({type:'Impute',metadata:{changes:!0},params:[{name:'field',type:'field',required:!0},{name:'groupby',type:'field',array:!0},{name:'orderby',type:'field',array:!0},{name:'method',type:'enum',default:'value',values:['value','mean','median','max','min']},{name:'value',default:0}]},ms),Pl({type:'Lookup',metadata:{modifies:!0},params:[{name:'index',type:'index',params:[{name:'from',type:'data',required:!0},{name:'key',type:'field',required:!0}]},{name:'values',type:'field',array:!0},{name:'fields',type:'field',array:!0,required:!0},{name:'as',type:'string',array:!0},{name:'default',default:null}]},ks),Pl({type:'Rank',metadata:{modifies:!0},params:[{name:'field',type:'field'},{name:'normalize',type:'boolean',default:!1},{name:'as',type:'string',default:'rank'}]},Ps),Pl({type:'Sample',metadata:{source:!0,changes:!0},params:[{name:'size',type:'number',default:1000}]},Os),Pl({type:'Sequence',metadata:{generates:!0,source:!0},params:[{name:'start',type:'number',required:!0},{name:'stop',type:'number',required:!0},{name:'step',type:'number',default:1}],output:['value']},Ms),Ol('Compare',Yl),Ol('Facet',is),Ol('Field',rs),Ol('Generate',gs),Ol('Key',xs),Ol('MultiExtent',ws),Ol('MultiValues',Ss),Ol('Params',zs),Ol('PreFacet',Ts),Ol('Proxy',Rs),Ol('Relay',As),Ol('Sieve',Ds),Ol('Subflow',es),Ol('TupleIndex',qs),Ol('Values',Ls);var TO=Array.prototype,RO=TO.map,PO=TO.slice,AO={name:'implicit'},OO=0.7,MO=1/OO,UO=/^#([0-9a-f]{3})$/,FO=/^#([0-9a-f]{6})$/,jO=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,IO=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,$O=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,NO=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,BO=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,YO=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,GO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$s(Bs,Ys,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+''}}),$s(Vs,Xs,Ns(Bs,{brighter:function(_B){return _B=null==_B?MO:Math.pow(MO,_B),new Vs(this.r*_B,this.g*_B,this.b*_B,this.opacity)},darker:function(_B){return _B=null==_B?OO:Math.pow(OO,_B),new Vs(this.r*_B,this.g*_B,this.b*_B,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},toString:function(){var _B=this.opacity;return _B=isNaN(_B)?1:Math.max(0,Math.min(1,_B)),(1===_B?'rgb(':'rgba(')+Math.max(0,Math.min(255,Math.round(this.r)||0))+', '+Math.max(0,Math.min(255,Math.round(this.g)||0))+', '+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===_B?')':', '+_B+')')}})),$s(Qs,Ks,Ns(Bs,{brighter:function(_B){return _B=null==_B?MO:Math.pow(MO,_B),new Qs(this.h,this.s,this.l*_B,this.opacity)},darker:function(_B){return _B=null==_B?OO:Math.pow(OO,_B),new Qs(this.h,this.s,this.l*_B,this.opacity)},rgb:function(){var _B=this.h%360+360*(0>this.h),xB=isNaN(_B)||isNaN(this.s)?0:this.s,vB=this.l,kB=vB+(0.5>vB?vB:1-vB)*xB,wB=2*vB-kB;return new Vs(ef(240<=_B?_B-240:_B+120,wB,kB),ef(_B,wB,kB),ef(120>_B?_B+240:_B-120,wB,kB),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var WO=Math.PI/180,HO=180/Math.PI,XO=18,VO=0.95047,JO=1,ZO=1.08883,KO=4/29,QO=6/29,eM=3*QO*QO,tM=QO*QO*QO;$s(af,nf,Ns(Bs,{brighter:function(_B){return new af(this.l+XO*(null==_B?1:_B),this.a,this.b,this.opacity)},darker:function(_B){return new af(this.l-XO*(null==_B?1:_B),this.a,this.b,this.opacity)},rgb:function(){var _B=(this.l+16)/116,xB=isNaN(this.a)?_B:_B+this.a/500,vB=isNaN(this.b)?_B:_B-this.b/200;return _B=JO*of(_B),xB=VO*of(xB),vB=ZO*of(vB),new Vs(lf(3.2404542*xB-1.5371385*_B-0.4985314*vB),lf(-0.969266*xB+1.8760108*_B+0.041556*vB),lf(0.0556434*xB-0.2040259*_B+1.0572252*vB),this.opacity)}})),$s(pf,uf,Ns(Bs,{brighter:function(_B){return new pf(this.h,this.c,this.l+XO*(null==_B?1:_B),this.opacity)},darker:function(_B){return new pf(this.h,this.c,this.l-XO*(null==_B?1:_B),this.opacity)},rgb:function(){return tf(this).rgb()}}));var nM=-0.14861,aM=+1.78277,iM=-0.29227,dM=-0.90649,rM=+1.97294,oM=rM*dM,lM=rM*aM,sM=aM*iM-dM*nM;$s(yf,hf,Ns(Bs,{brighter:function(_B){return _B=null==_B?MO:Math.pow(MO,_B),new yf(this.h,this.s,this.l*_B,this.opacity)},darker:function(_B){return _B=null==_B?OO:Math.pow(OO,_B),new yf(this.h,this.s,this.l*_B,this.opacity)},rgb:function(){var _B=isNaN(this.h)?0:(this.h+120)*WO,xB=+this.l,vB=isNaN(this.s)?0:this.s*xB*(1-xB),kB=Math.cos(_B),wB=Math.sin(_B);return new Vs(255*(xB+vB*(nM*kB+aM*wB)),255*(xB+vB*(iM*kB+dM*wB)),255*(xB+vB*(rM*kB)),this.opacity)}}));var fM=function bB(_B){function xB(kB,wB){var SB=vB((kB=Xs(kB)).r,(wB=Xs(wB)).r),CB=vB(kB.g,wB.g),zB=vB(kB.b,wB.b),TB=zf(kB.opacity,wB.opacity);return function(RB){return kB.r=SB(RB),kB.g=CB(RB),kB.b=zB(RB),kB.opacity=TB(RB),kB+''}}var vB=Cf(_B);return xB.gamma=bB,xB}(1),cM=Tf(xf),uM=Tf(vf),pM=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gM=new RegExp(pM.source,'g'),mM=180/Math.PI,hM={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},yM,bM,_M,xM,vM=$f(function(bB){return'none'===bB?hM:(yM||(yM=document.createElement('DIV'),bM=document.documentElement,_M=document.defaultView),yM.style.transform=bB,bB=_M.getComputedStyle(bM.appendChild(yM),null).getPropertyValue('transform'),bM.removeChild(yM),bB=bB.slice(7,-1).split(','),Ff(+bB[0],+bB[1],+bB[2],+bB[3],+bB[4],+bB[5]))},'px, ','px)','deg)'),kM=$f(function(bB){return null==bB?hM:(xM||(xM=document.createElementNS('http://www.w3.org/2000/svg','g')),xM.setAttribute('transform',bB),!(bB=xM.transform.baseVal.consolidate()))?hM:(bB=bB.matrix,Ff(bB.a,bB.b,bB.c,bB.d,bB.e,bB.f))},', ',')',')'),wM=Math.SQRT2,EM=2,SM=4,zM=Wf(Sf),TM=Wf(zf),RM=Xf(Sf),PM=Xf(zf),AM=Vf(Sf),OM=Vf(zf),MM=Object.freeze({interpolate:Lf,interpolateArray:Rf,interpolateBasis:xf,interpolateBasisClosed:vf,interpolateDate:Pf,interpolateNumber:Af,interpolateObject:Of,interpolateRound:Uf,interpolateString:qf,interpolateTransformCss:vM,interpolateTransformSvg:kM,interpolateZoom:function(bB,_B){var xB=bB[0],vB=bB[1],kB=bB[2],wB=_B[0],SB=_B[1],CB=_B[2],zB=wB-xB,TB=SB-vB,RB=zB*zB+TB*TB,PB,AB;if(RB<1e-12)AB=Math.log(CB/kB)/wM,PB=function(FB){return[xB+FB*zB,vB+FB*TB,kB*Math.exp(wM*FB*AB)]};else{var OB=Math.sqrt(RB),MB=(CB*CB-kB*kB+SM*RB)/(2*kB*EM*OB),DB=(CB*CB-kB*kB-SM*RB)/(2*CB*EM*OB),qB=Math.log(Math.sqrt(MB*MB+1)-MB),LB=Math.log(Math.sqrt(DB*DB+1)-DB);AB=(LB-qB)/wM,PB=function(FB){var jB=FB*AB,IB=Nf(qB),$B=kB/(EM*OB)*(IB*Yf(wM*jB+qB)-Bf(qB));return[xB+$B*zB,vB+$B*TB,kB*IB/Nf(wM*jB+qB)]}}return PB.duration=1e3*AB,PB},interpolateRgb:fM,interpolateRgbBasis:cM,interpolateRgbBasisClosed:uM,interpolateHsl:zM,interpolateHslLong:TM,interpolateLab:function(bB,_B){var xB=zf((bB=nf(bB)).l,(_B=nf(_B)).l),vB=zf(bB.a,_B.a),kB=zf(bB.b,_B.b),wB=zf(bB.opacity,_B.opacity);return function(SB){return bB.l=xB(SB),bB.a=vB(SB),bB.b=kB(SB),bB.opacity=wB(SB),bB+''}},interpolateHcl:RM,interpolateHclLong:PM,interpolateCubehelix:AM,interpolateCubehelixLong:OM,quantize:function(bB,_B){for(var xB=Array(_B),vB=0;vB<_B;++vB)xB[vB]=bB(vB/(_B-1));return xB}}),DM=[0,1],qM,LM={"":function(bB,_B){bB=bB.toPrecision(_B);out:for(var xB=bB.length,vB=1,kB=-1,wB;vB<xB;++vB)switch(bB[vB]){case'.':kB=wB=vB;break;case'0':0===kB&&(kB=vB),wB=vB;break;case'e':break out;default:0<kB&&(kB=0);}return 0<kB?bB.slice(0,kB)+bB.slice(wB+1):bB},"%":function(_B,xB){return(100*_B).toFixed(xB)},b:function(_B){return Math.round(_B).toString(2)},c:function(_B){return _B+''},d:function(_B){return Math.round(_B).toString(10)},e:function(_B,xB){return _B.toExponential(xB)},f:function(_B,xB){return _B.toFixed(xB)},g:function(_B,xB){return _B.toPrecision(xB)},o:function(_B){return Math.round(_B).toString(8)},p:function(_B,xB){return wc(100*_B,xB)},r:wc,s:function(bB,_B){var xB=pc(bB,_B);if(!xB)return bB+'';var vB=xB[0],kB=xB[1],wB=kB-(qM=3*Math.max(-8,Math.min(8,Math.floor(kB/3))))+1,SB=vB.length;return wB===SB?vB:wB>SB?vB+Array(wB-SB+1).join('0'):0<wB?vB.slice(0,wB)+'.'+vB.slice(wB):'0.'+Array(1-wB).join('0')+pc(bB,Math.max(0,_B+wB-1))[0]},X:function(_B){return Math.round(_B).toString(16).toUpperCase()},x:function(_B){return Math.round(_B).toString(16)}},UM=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;Ec.prototype=Sc.prototype,Sc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?'0':'')+(null==this.width?'':Math.max(1,0|this.width))+(this.comma?',':'')+(null==this.precision?'':'.'+Math.max(0,0|this.precision))+this.type};var FM=['y','z','a','f','p','n','\xB5','m','','k','M','G','T','P','E','Z','Y'],jM,IM,$M;Tc({decimal:'.',thousands:',',grouping:[3],currency:['$','']});var NM=1e3,BM=60*NM,YM=60*BM,GM=24*YM,WM=7*GM,HM=30*GM,XM=365*GM,VM=tu('1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf'),JM=tu('393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6'),ZM=tu('3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9'),KM=tu('1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5');OM(hf(300,0.5,0),hf(-240,0.5,1));var QM=OM(hf(-100,0.75,0.35),hf(80,1.5,0.8)),eD=OM(hf(260,0.75,0.35),hf(80,1.5,0.8)),tD=hf(),nD=nu(tu('44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725')),aD=nu(tu('00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf')),iD=nu(tu('00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4')),dD=nu(tu('0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921')),rD=Array.prototype.map,oD=Array.prototype.slice,lD={identity:qc,linear:Dc,log:Bc,ordinal:Is,pow:Gc,sqrt:function(){return Gc().exponent(0.5)},quantile:Hc,quantize:Xc,threshold:Vc,time:function(){return Kc(jT,FT,LT,qT,DT,MT,OT,CT,QT).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},utc:function(){return Kc(HT,WT,BT,NT,$T,IT,OT,CT,tR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},band:au,point:function(){return iu(au().paddingInner(1))},sequential:su,"bin-linear":ou,"bin-ordinal":lu};for(var sD in lD)cu(sD,lD[sD]);var fD=pu('4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac'),cD=pu('4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5'),uD=[,,,].concat('67a9cff7f7f7f1a340','0571b092c5defdb863e66101','0571b092c5def7f7f7fdb863e66101','2166ac67a9cfd1e5f0fee0b6f1a340b35806','2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806','2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806','2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806','0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08','0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08').map(pu),pD=gu('7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666'),gD=gu('1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666'),mD=gu('a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928'),hD=gu('fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2'),yD=gu('b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc'),bD=gu('e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999'),_D=gu('66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3'),xD=gu('8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f'),vD=[,,,].concat('d8b365f5f5f55ab4ac','a6611adfc27d80cdc1018571','a6611adfc27df5f5f580cdc1018571','8c510ad8b365f6e8c3c7eae55ab4ac01665e','8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e','8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e','8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e','5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30','5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30').map(gu),kD=hu(vD),wD=[,,,].concat('af8dc3f7f7f77fbf7b','7b3294c2a5cfa6dba0008837','7b3294c2a5cff7f7f7a6dba0008837','762a83af8dc3e7d4e8d9f0d37fbf7b1b7837','762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837','762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837','762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837','40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b','40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b').map(gu),SD=hu(wD),CD=[,,,].concat('e9a3c9f7f7f7a1d76a','d01c8bf1b6dab8e1864dac26','d01c8bf1b6daf7f7f7b8e1864dac26','c51b7de9a3c9fde0efe6f5d0a1d76a4d9221','c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221','c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221','c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221','8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419','8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419').map(gu),zD=hu(CD),TD=[,,,].concat('998ec3f7f7f7f1a340','5e3c99b2abd2fdb863e66101','5e3c99b2abd2f7f7f7fdb863e66101','542788998ec3d8daebfee0b6f1a340b35806','542788998ec3d8daebf7f7f7fee0b6f1a340b35806','5427888073acb2abd2d8daebfee0b6fdb863e08214b35806','5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806','2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08','2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08').map(gu),RD=hu(TD),PD=[,,,].concat('ef8a62f7f7f767a9cf','ca0020f4a58292c5de0571b0','ca0020f4a582f7f7f792c5de0571b0','b2182bef8a62fddbc7d1e5f067a9cf2166ac','b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac','b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac','b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac','67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061','67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061').map(gu),AD=hu(PD),OD=[,,,].concat('ef8a62ffffff999999','ca0020f4a582bababa404040','ca0020f4a582ffffffbababa404040','b2182bef8a62fddbc7e0e0e09999994d4d4d','b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d','b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d','b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d','67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a','67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a').map(gu),MD=hu(OD),DD=[,,,].concat('fc8d59ffffbf91bfdb','d7191cfdae61abd9e92c7bb6','d7191cfdae61ffffbfabd9e92c7bb6','d73027fc8d59fee090e0f3f891bfdb4575b4','d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4','d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4','d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4','a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695','a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695').map(gu),qD=hu(DD),LD=[,,,].concat('fc8d59ffffbf91cf60','d7191cfdae61a6d96a1a9641','d7191cfdae61ffffbfa6d96a1a9641','d73027fc8d59fee08bd9ef8b91cf601a9850','d73027fc8d59fee08bffffbfd9ef8b91cf601a9850','d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850','d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850','a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837','a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837').map(gu),UD=hu(LD),FD=[,,,].concat('fc8d59ffffbf99d594','d7191cfdae61abdda42b83ba','d7191cfdae61ffffbfabdda42b83ba','d53e4ffc8d59fee08be6f59899d5943288bd','d53e4ffc8d59fee08bffffbfe6f59899d5943288bd','d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd','d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd','9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2','9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2').map(gu),jD=hu(FD),ID=[,,,].concat('e5f5f999d8c92ca25f','edf8fbb2e2e266c2a4238b45','edf8fbb2e2e266c2a42ca25f006d2c','edf8fbccece699d8c966c2a42ca25f006d2c','edf8fbccece699d8c966c2a441ae76238b45005824','f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824','f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b').map(gu),$D=hu(ID),ND=[,,,].concat('e0ecf49ebcda8856a7','edf8fbb3cde38c96c688419d','edf8fbb3cde38c96c68856a7810f7c','edf8fbbfd3e69ebcda8c96c68856a7810f7c','edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b','f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b','f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b').map(gu),BD=hu(ND),YD=[,,,].concat('e0f3dba8ddb543a2ca','f0f9e8bae4bc7bccc42b8cbe','f0f9e8bae4bc7bccc443a2ca0868ac','f0f9e8ccebc5a8ddb57bccc443a2ca0868ac','f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e','f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e','f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081').map(gu),GD=hu(YD),WD=[,,,].concat('fee8c8fdbb84e34a33','fef0d9fdcc8afc8d59d7301f','fef0d9fdcc8afc8d59e34a33b30000','fef0d9fdd49efdbb84fc8d59e34a33b30000','fef0d9fdd49efdbb84fc8d59ef6548d7301f990000','fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000','fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000').map(gu),HD=hu(WD),XD=[,,,].concat('ece2f0a6bddb1c9099','f6eff7bdc9e167a9cf02818a','f6eff7bdc9e167a9cf1c9099016c59','f6eff7d0d1e6a6bddb67a9cf1c9099016c59','f6eff7d0d1e6a6bddb67a9cf3690c002818a016450','fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450','fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636').map(gu),VD=hu(XD),JD=[,,,].concat('ece7f2a6bddb2b8cbe','f1eef6bdc9e174a9cf0570b0','f1eef6bdc9e174a9cf2b8cbe045a8d','f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d','f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b','fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b','fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858').map(gu),ZD=hu(JD),KD=[,,,].concat('e7e1efc994c7dd1c77','f1eef6d7b5d8df65b0ce1256','f1eef6d7b5d8df65b0dd1c77980043','f1eef6d4b9dac994c7df65b0dd1c77980043','f1eef6d4b9dac994c7df65b0e7298ace125691003f','f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f','f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f').map(gu),QD=hu(KD),eq=[,,,].concat('fde0ddfa9fb5c51b8a','feebe2fbb4b9f768a1ae017e','feebe2fbb4b9f768a1c51b8a7a0177','feebe2fcc5c0fa9fb5f768a1c51b8a7a0177','feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177','fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177','fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a').map(gu),tq=hu(eq),nq=[,,,].concat('edf8b17fcdbb2c7fb8','ffffcca1dab441b6c4225ea8','ffffcca1dab441b6c42c7fb8253494','ffffccc7e9b47fcdbb41b6c42c7fb8253494','ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84','ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84','ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58').map(gu),aq=hu(nq),iq=[,,,].concat('f7fcb9addd8e31a354','ffffccc2e69978c679238443','ffffccc2e69978c67931a354006837','ffffccd9f0a3addd8e78c67931a354006837','ffffccd9f0a3addd8e78c67941ab5d238443005a32','ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32','ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529').map(gu),dq=hu(iq),rq=[,,,].concat('fff7bcfec44fd95f0e','ffffd4fed98efe9929cc4c02','ffffd4fed98efe9929d95f0e993404','ffffd4fee391fec44ffe9929d95f0e993404','ffffd4fee391fec44ffe9929ec7014cc4c028c2d04','ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04','ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506').map(gu),oq=hu(rq),lq=[,,,].concat('ffeda0feb24cf03b20','ffffb2fecc5cfd8d3ce31a1c','ffffb2fecc5cfd8d3cf03b20bd0026','ffffb2fed976feb24cfd8d3cf03b20bd0026','ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026','ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026','ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026').map(gu),sq=hu(lq),fq=[,,,].concat('deebf79ecae13182bd','eff3ffbdd7e76baed62171b5','eff3ffbdd7e76baed63182bd08519c','eff3ffc6dbef9ecae16baed63182bd08519c','eff3ffc6dbef9ecae16baed64292c62171b5084594','f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594','f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b').map(gu),cq=hu(fq),uq=[,,,].concat('e5f5e0a1d99b31a354','edf8e9bae4b374c476238b45','edf8e9bae4b374c47631a354006d2c','edf8e9c7e9c0a1d99b74c47631a354006d2c','edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32','f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32','f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b').map(gu),pq=hu(uq),gq=[,,,].concat('f0f0f0bdbdbd636363','f7f7f7cccccc969696525252','f7f7f7cccccc969696636363252525','f7f7f7d9d9d9bdbdbd969696636363252525','f7f7f7d9d9d9bdbdbd969696737373525252252525','fffffff0f0f0d9d9d9bdbdbd969696737373525252252525','fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000').map(gu),mq=hu(gq),hq=[,,,].concat('efedf5bcbddc756bb1','f2f0f7cbc9e29e9ac86a51a3','f2f0f7cbc9e29e9ac8756bb154278f','f2f0f7dadaebbcbddc9e9ac8756bb154278f','f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486','fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486','fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d').map(gu),yq=hu(hq),bq=[,,,].concat('fee0d2fc9272de2d26','fee5d9fcae91fb6a4acb181d','fee5d9fcae91fb6a4ade2d26a50f15','fee5d9fcbba1fc9272fb6a4ade2d26a50f15','fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d','fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d','fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d').map(gu),_q=hu(bq),xq=[,,,].concat('fee6cefdae6be6550d','feeddefdbe85fd8d3cd94701','feeddefdbe85fd8d3ce6550da63603','feeddefdd0a2fdae6bfd8d3ce6550da63603','feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04','fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04','fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704').map(gu),vq=hu(xq),kq=Object.freeze({schemeAccent:pD,schemeDark2:gD,schemePaired:mD,schemePastel1:hD,schemePastel2:yD,schemeSet1:bD,schemeSet2:_D,schemeSet3:xD,interpolateBrBG:kD,schemeBrBG:vD,interpolatePRGn:SD,schemePRGn:wD,interpolatePiYG:zD,schemePiYG:CD,interpolatePuOr:RD,schemePuOr:TD,interpolateRdBu:AD,schemeRdBu:PD,interpolateRdGy:MD,schemeRdGy:OD,interpolateRdYlBu:qD,schemeRdYlBu:DD,interpolateRdYlGn:UD,schemeRdYlGn:LD,interpolateSpectral:jD,schemeSpectral:FD,interpolateBuGn:$D,schemeBuGn:ID,interpolateBuPu:BD,schemeBuPu:ND,interpolateGnBu:GD,schemeGnBu:YD,interpolateOrRd:HD,schemeOrRd:WD,interpolatePuBuGn:VD,schemePuBuGn:XD,interpolatePuBu:ZD,schemePuBu:JD,interpolatePuRd:QD,schemePuRd:KD,interpolateRdPu:tq,schemeRdPu:eq,interpolateYlGnBu:aq,schemeYlGnBu:nq,interpolateYlGn:dq,schemeYlGn:iq,interpolateYlOrBr:oq,schemeYlOrBr:rq,interpolateYlOrRd:sq,schemeYlOrRd:lq,interpolateBlues:cq,schemeBlues:fq,interpolateGreens:pq,schemeGreens:uq,interpolateGreys:mq,schemeGreys:gq,interpolatePurples:yq,schemePurples:hq,interpolateReds:_q,schemeReds:bq,interpolateOranges:vq,schemeOranges:xq}),wq={blueorange:uD},Eq={category10:VM,category20:KM,category20b:JM,category20c:ZM,accent:pD,dark2:gD,paired:mD,pastel1:hD,pastel2:yD,set1:bD,set2:_D,set3:xD,tableau10:fD,tableau20:cD,viridis:nD,magma:aD,inferno:iD,plasma:dD,blueorange:cM(We(uD))};yu('blues','Blues'),yu('greens','Greens'),yu('greys','Greys'),yu('purples','Purples'),yu('reds','Reds'),yu('oranges','Oranges'),yu('brownbluegreen','BrBG'),yu('purplegreen','PRGn'),yu('pinkyellowgreen','PiYG'),yu('purpleorange','PuOr'),yu('redblue','RdBu'),yu('redgrey','RdGy'),yu('redyellowblue','RdYlBu'),yu('redyellowgreen','RdYlGn'),yu('spectral','Spectral'),yu('bluegreen','BuGn'),yu('bluepurple','BuPu'),yu('greenblue','GnBu'),yu('orangered','OrRd'),yu('purplebluegreen','PuBuGn'),yu('purpleblue','PuBu'),yu('purplered','PuRd'),yu('redpurple','RdPu'),yu('yellowgreenblue','YlGnBu'),yu('yellowgreen','YlGn'),yu('yelloworangebrown','YlOrBr'),yu('yelloworangered','YlOrRd');var Sq=Array.prototype,Cq=Sq.slice,zq=[[],[[[1,1.5],[0.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[0.5,1]]],[[[1,0.5],[1.5,1]]],[[[1,0.5],[0.5,1]],[[1,1.5],[1.5,1]]],[[[1,0.5],[1,1.5]]],[[[1,0.5],[0.5,1]]],[[[0.5,1],[1,0.5]]],[[[1,1.5],[1,0.5]]],[[[0.5,1],[1,1.5]],[[1.5,1],[1,0.5]]],[[[1.5,1],[1,0.5]]],[[[0.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[0.5,1],[1,1.5]]],[]],Tq=['values','size','thresholds'],Rq=['x','y','size','cellSize','bandwidth','thresholds'],Pq=Ue(ju,Rl);Pq.transform=function(bB,_B){if(this.value&&!_B.changed()&&!bB.modified())return _B.StopPropagation;var xB=_B.fork(_B.NO_SOURCE|_B.NO_FIELDS),vB,kB,wB;return bB.values?(vB=Mu(),kB=Tq,wB=bB.values):(vB=Fu(),kB=Rq,wB=_B.materialize(_B.SOURCE).source),kB.forEach(function(SB){null!=bB[SB]&&vB[SB](bB[SB])}),this.value&&(xB.rem=this.value),this.value=xB.source=xB.add=vB(wB).map(Io),xB},$u.prototype={constructor:$u,reset:function(){this.s=this.t=0},add:function(_B){Nu(Aq,_B,this.t),Nu(this,Aq.s,this.s),this.s?this.t+=Aq.t:this.s=Aq.t},valueOf:function(){return this.s}};var Aq=new $u,Oq=1e-6,Mq=Math.PI,Dq=Mq/2,qq=Mq/4,Lq=2*Mq,Uq=180/Mq,Fq=Mq/180,jq=Math.abs,Iq=Math.atan,$q=Math.atan2,Nq=Math.cos,Bq=Math.ceil,Yq=Math.exp,Gq=Math.log,Wq=Math.pow,Hq=Math.sin,Xq=Math.sign||function(bB){return 0<bB?1:0>bB?-1:0},Vq=Math.sqrt,Jq=Math.tan,Zq={Feature:function(_B,xB){Wu(_B.geometry,xB)},FeatureCollection:function(_B,xB){for(var vB=_B.features,kB=-1,wB=vB.length;++kB<wB;)Wu(vB[kB].geometry,xB)}},Kq={Sphere:function(_B,xB){xB.sphere()},Point:function(_B,xB){_B=_B.coordinates,xB.point(_B[0],_B[1],_B[2])},MultiPoint:function(_B,xB){for(var vB=_B.coordinates,kB=-1,wB=vB.length;++kB<wB;)_B=vB[kB],xB.point(_B[0],_B[1],_B[2])},LineString:function(_B,xB){Hu(_B.coordinates,xB,0)},MultiLineString:function(_B,xB){for(var vB=_B.coordinates,kB=-1,wB=vB.length;++kB<wB;)Hu(vB[kB],xB,0)},Polygon:function(_B,xB){Xu(_B.coordinates,xB)},MultiPolygon:function(_B,xB){for(var vB=_B.coordinates,kB=-1,wB=vB.length;++kB<wB;)Xu(vB[kB],xB)},GeometryCollection:function(_B,xB){for(var vB=_B.geometries,kB=-1,wB=vB.length;++kB<wB;)Wu(vB[kB],xB)}},Qq=Iu(),eL=Iu(),tL,nL,aL,iL,dL,rL={point:Gu,lineStart:Gu,lineEnd:Gu,polygonStart:function(){Qq.reset(),rL.lineStart=Ju,rL.lineEnd=Zu},polygonEnd:function(){var _B=+Qq;eL.add(0>_B?Lq+_B:_B),this.lineStart=this.lineEnd=this.point=Gu},sphere:function(){eL.add(Lq)}},oL,lL,sL,fL,cL,uL,pL,gL,mL=Iu(),hL,yL,bL={point:cp,lineStart:pp,lineEnd:gp,polygonStart:function(){bL.point=mp,bL.lineStart=hp,bL.lineEnd=bp,mL.reset(),rL.polygonStart()},polygonEnd:function(){rL.polygonEnd(),bL.point=cp,bL.lineStart=pp,bL.lineEnd=gp,0>Qq?(oL=-(sL=180),lL=-(fL=90)):mL>Oq?fL=90:mL<-Oq&&(lL=-90),yL[0]=oL,yL[1]=sL}},_L,xL,vL,kL,wL,EL,SL,CL,zL,TL,RL,PL,AL,OL,ML,DL,qL={sphere:Gu,point:kp,lineStart:Sp,lineEnd:Tp,polygonStart:function(){qL.lineStart=Rp,qL.lineEnd=Pp},polygonEnd:function(){qL.lineStart=Sp,qL.lineEnd=Tp}};Dp.invert=Dp;var LL=1e9,UL=-LL,FL=Iu(),jL=Iu(),IL,$L,NL,BL={sphere:Gu,point:Gu,lineStart:function(){BL.point=Kp,BL.lineEnd=Zp},lineEnd:Gu,polygonStart:Gu,polygonEnd:Gu},YL=Iu(),GL=Iu(),WL,HL,XL,VL,JL={point:Gu,lineStart:Gu,lineEnd:Gu,polygonStart:function(){JL.lineStart=ig,JL.lineEnd=og},polygonEnd:function(){JL.lineStart=JL.lineEnd=JL.point=Gu,YL.add(jq(GL)),GL.reset()},result:function(){return YL.reset(),YL/2}},ZL=Infinity,KL=ZL,QL=-ZL,eU=QL,tU={point:function(bB,_B){bB<ZL&&(ZL=bB),bB>QL&&(QL=bB),_B<KL&&(KL=_B),_B>eU&&(eU=_B)},lineStart:Gu,lineEnd:Gu,polygonStart:Gu,polygonEnd:Gu,result:function(){var _B=[[ZL,KL],[QL,eU]];return QL=eU=-(KL=ZL=Infinity),_B}},nU=0,aU=0,iU=0,dU=0,rU=0,oU=0,lU=0,sU=0,fU=0,cU,uU,pU,gU,mU={point:sg,lineStart:cg,lineEnd:gg,polygonStart:function(){mU.lineStart=mg,mU.lineEnd=hg},polygonEnd:function(){mU.point=sg,mU.lineStart=cg,mU.lineEnd=gg},result:function(){var _B=fU?[lU/fU,sU/fU]:oU?[dU/oU,rU/oU]:iU?[nU/iU,aU/iU]:[NaN,NaN];return nU=aU=iU=dU=rU=oU=lU=sU=fU=0,_B}};xg.prototype={_radius:4.5,pointRadius:function(_B){return this._radius=_B,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(_B,xB){switch(this._point){case 0:{this._context.moveTo(_B,xB),this._point=1;break}case 1:{this._context.lineTo(_B,xB);break}default:{this._context.moveTo(_B+this._radius,xB),this._context.arc(_B,xB,this._radius,0,Lq);break}}},result:Gu};var hU=Iu(),yU,bU,_U,xU,vU,kU={point:Gu,lineStart:function(){kU.point=vg},lineEnd:function(){yU&&kg(bU,_U),kU.point=Gu},polygonStart:function(){yU=!0},polygonEnd:function(){yU=null},result:function(){return hU.reset(),+hU}};wg.prototype={_circle:Eg(4.5),pointRadius:function(_B){return this._circle=Eg(_B),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push('Z'),this._point=NaN},point:function(_B,xB){switch(this._point){case 0:{this._string.push('M',_B,',',xB),this._point=1;break}case 1:{this._string.push('L',_B,',',xB);break}default:{this._string.push('M',_B,',',xB,this._circle);break}}},result:function(){if(this._string.length){var bB=this._string.join('');return this._string=[],bB}}};var wU=Cg(function(){return!0},function(bB){var _B=NaN,xB=NaN,vB=NaN,kB;return{lineStart:function(){bB.lineStart(),kB=1},point:function(SB,CB){var zB=0<SB?Mq:-Mq,TB=jq(SB-_B);jq(TB-Mq)<Oq?(bB.point(_B,xB=0<(xB+CB)/2?Dq:-Dq),bB.point(vB,xB),bB.lineEnd(),bB.lineStart(),bB.point(zB,xB),bB.point(SB,xB),kB=0):vB!==zB&&TB>=Mq&&(jq(_B-vB)<Oq&&(_B-=vB*Oq),jq(SB-zB)<Oq&&(SB-=zB*Oq),xB=Pg(_B,xB,SB,CB),bB.point(vB,xB),bB.lineEnd(),bB.lineStart(),bB.point(zB,xB),kB=0),bB.point(_B=SB,xB=CB),vB=zB},lineEnd:function(){bB.lineEnd(),_B=xB=NaN},clean:function(){return 2-kB}}},function(bB,_B,xB,vB){var kB;if(null==bB)kB=xB*Dq,vB.point(-Mq,kB),vB.point(0,kB),vB.point(Mq,kB),vB.point(Mq,0),vB.point(Mq,-kB),vB.point(0,-kB),vB.point(-Mq,-kB),vB.point(-Mq,0),vB.point(-Mq,kB);else if(jq(bB[0]-_B[0])>Oq){var wB=bB[0]<_B[0]?Mq:-Mq;kB=xB*wB/2,vB.point(-wB,kB),vB.point(0,kB),vB.point(wB,kB)}else vB.point(_B[0],_B[1])},[-Mq,-Dq]);Dg.prototype={constructor:Dg,point:function(_B,xB){this.stream.point(_B,xB)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var EU=16,SU=Nq(30*Fq),CU=Mg({point:function(_B,xB){this.stream.point(_B*Fq,xB*Fq)}}),zU=Vg(function(bB){return Vq(2/(1+bB))});zU.invert=Jg(function(bB){return 2*Yu(bB/2)});var TU=Vg(function(bB){return(bB=Bu(bB))&&bB/Hq(bB)});TU.invert=Jg(function(bB){return bB}),Qg.invert=function(bB,_B){return[bB,2*Iq(Yq(_B))-Dq]},rm.invert=rm,cm.invert=Jg(Iq),pm.invert=Jg(Yu),mm.invert=Jg(function(bB){return 2*Iq(bB)}),_m.invert=function(bB,_B){return[-_B,2*Iq(Yq(bB))-Dq]};var RU=Sg(),PU=['clipAngle','clipExtent','scale','translate','center','rotate','parallels','precision','coefficient','distance','fraction','lobes','parallel','radius','ratio','spacing','tilt'],AU={albers:Wg,albersusa:function(){function bB(AB){var OB=AB[0],MB=AB[1];return RB=null,(wB.point(OB,MB),RB)||(CB.point(OB,MB),RB)||(TB.point(OB,MB),RB)}function _B(){return xB=vB=null,bB}var kB=Wg(),SB=Gg().rotate([154,0]).center([-2,58.5]).parallels([55,65]),zB=Gg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),PB={point:function(OB,MB){RB=[OB,MB]}},xB,vB,wB,CB,TB,RB;return bB.invert=function(AB){var OB=kB.scale(),MB=kB.translate(),DB=(AB[0]-MB[0])/OB,qB=(AB[1]-MB[1])/OB;return(0.12<=qB&&0.234>qB&&-0.425<=DB&&-0.214>DB?SB:0.166<=qB&&0.234>qB&&-0.214<=DB&&-0.115>DB?zB:kB).invert(AB)},bB.stream=function(AB){return xB&&vB===AB?xB:xB=Hg([kB.stream(vB=AB),SB.stream(AB),zB.stream(AB)])},bB.precision=function(AB){return arguments.length?(kB.precision(AB),SB.precision(AB),zB.precision(AB),_B()):kB.precision()},bB.scale=function(AB){return arguments.length?(kB.scale(AB),SB.scale(0.35*AB),zB.scale(AB),bB.translate(kB.translate())):kB.scale()},bB.translate=function(AB){if(!arguments.length)return kB.translate();var OB=kB.scale(),MB=+AB[0],DB=+AB[1];return wB=kB.translate(AB).clipExtent([[MB-0.455*OB,DB-0.238*OB],[MB+0.455*OB,DB+0.238*OB]]).stream(PB),CB=SB.translate([MB-0.307*OB,DB+0.201*OB]).clipExtent([[MB-0.425*OB+Oq,DB+0.12*OB+Oq],[MB-0.214*OB-Oq,DB+0.234*OB-Oq]]).stream(PB),TB=zB.translate([MB-0.205*OB,DB+0.212*OB]).clipExtent([[MB-0.214*OB+Oq,DB+0.166*OB+Oq],[MB-0.115*OB-Oq,DB+0.234*OB-Oq]]).stream(PB),_B()},bB.fitExtent=function(AB,OB){return qg(bB,AB,OB)},bB.fitSize=function(AB,OB){return Lg(bB,AB,OB)},bB.scale(1070)},azimuthalequalarea:function(){return Ig(zU).scale(124.75).clipAngle(180-1e-3)},azimuthalequidistant:function(){return Ig(TU).scale(79.4188).clipAngle(180-1e-3)},conicconformal:function(){return Ng(im).scale(109.5).parallels([30,30])},conicequalarea:Gg,conicequidistant:function(){return Ng(lm).scale(131.154).center([0,13.9389])},equirectangular:function(){return Ig(rm).scale(152.63)},gnomonic:function(){return Ig(cm).scale(144.049).clipAngle(60)},mercator:function(){return tm(Qg).scale(961/Lq)},orthographic:function(){return Ig(pm).scale(249.5).clipAngle(90+Oq)},stereographic:function(){return Ig(mm).scale(250).clipAngle(142)},transversemercator:function(){var bB=tm(_m),_B=bB.center,xB=bB.rotate;return bB.center=function(vB){return arguments.length?_B([-vB[1],vB[0]]):(vB=_B(),[vB[1],-vB[0]])},bB.rotate=function(vB){return arguments.length?xB([vB[0],vB[1],2<vB.length?vB[2]+90:90]):(vB=xB(),[vB[0],vB[1],vB[2]-90])},xB([0,0,90]).scale(159.155)}};for(var OU in AU)Em(OU,AU[OU]);var MU=Ue(Cm,Rl);MU.transform=function(bB,_B){function xB(zB){zB[SB]=kB(wB(zB))}var vB=_B.fork(_B.ALL),kB=this.value,wB=bB.field||nT,SB=bB.as||'path',CB;return!kB||bB.modified()?(this.value=kB=Sm(bB.projection),vB.materialize().reflow().visit(vB.SOURCE,xB)):(CB=wB===nT||_B.modified(wB.fields),vB.visit(CB?vB.ADD_MOD:vB.ADD,xB)),vB.modifies(SB)};var DU=Ue(zm,Rl);DU.transform=function(bB,_B){function xB(RB){var PB=vB([kB(RB),wB(RB)]);PB?(RB[CB]=PB[0],RB[zB]=PB[1]):(RB[CB]=void 0,RB[zB]=void 0)}var vB=bB.projection,kB=bB.fields[0],wB=bB.fields[1],SB=bB.as||['x','y'],CB=SB[0],zB=SB[1],TB;return bB.modified()?_B.materialize().reflow(!0).visit(_B.SOURCE,xB):(TB=_B.modified(kB.fields)||_B.modified(wB.fields),_B.visit(TB?_B.ADD_MOD:_B.ADD,xB)),_B.modifies(SB)};var qU=Ue(Tm,Rl);qU.transform=function(bB,_B){var xB=_B.fork(_B.ALL),vB=this.value,kB=bB.field||ze('datum'),wB=bB.as||'shape',SB=xB.ADD_MOD;return(!vB||bB.modified())&&(this.value=vB=Rm(Sm(bB.projection),kB),xB.materialize().reflow(),SB=xB.SOURCE),xB.visit(SB,function(CB){CB[wB]=vB}),xB.modifies(wB)};var LU=Ue(Pm,Rl);LU.transform=function(bB,_B){var xB=_B.fork(),vB=this.value,kB=this.generator,wB;if(!vB.length||bB.modified())for(var SB in bB)Oe(kB[SB])&&kB[SB](bB[SB]);return wB=kB(),vB.length?(wB._id=vB[0]._id,xB.mod.push(wB)):xB.add.push(Io(wB)),vB[0]=wB,(xB.source=vB,xB)};var UU=Ue(Am,Rl);UU.transform=function(bB){var _B=this.value;!_B||bB.modified('type')?(this.value=_B=Dm(bB.type),PU.forEach(function(xB){null!=bB[xB]&&qm(_B,xB,bB[xB])})):PU.forEach(function(xB){bB.modified(xB)&&qm(_B,xB,bB[xB])}),null!=bB.pointRadius&&_B.path.pointRadius(bB.pointRadius),bB.fit&&Om(_B,bB)};Pl({type:'Contour',metadata:{generates:!0,source:!0},params:[{name:'size',type:'number',array:!0,length:2,required:!0},{name:'values',type:'number',array:!0},{name:'x',type:'field'},{name:'y',type:'field'},{name:'cellSize',type:'number'},{name:'bandwidth',type:'number'},{name:'thresholds',type:'number'}]},ju),Pl({type:'GeoPath',metadata:{modifies:!0},params:[{name:'projection',type:'projection'},{name:'field',type:'field'},{name:'as',type:'string',default:'path'}]},Cm),Pl({type:'GeoPoint',metadata:{modifies:!0},params:[{name:'projection',type:'projection',required:!0},{name:'fields',type:'field',array:!0,required:!0,length:2},{name:'as',type:'string',array:!0,length:2,default:['x','y']}]},zm),Pl({type:'GeoShape',metadata:{modifies:!0},params:[{name:'projection',type:'projection'},{name:'field',type:'field',default:'datum'},{name:'as',type:'string',default:'shape'}]},Tm),Pl({type:'Graticule',metadata:{source:!0,generates:!0,changes:!0},params:[{name:'extent',type:'array',array:!0,length:2,content:{type:'number',array:!0,length:2}},{name:'extentMajor',type:'array',array:!0,length:2,content:{type:'number',array:!0,length:2}},{name:'extentMinor',type:'array',array:!0,length:2,content:{type:'number',array:!0,length:2}},{name:'step',type:'number',array:!0,length:2},{name:'stepMajor',type:'number',array:!0,length:2,default:[90,360]},{name:'stepMinor',type:'number',array:!0,length:2,default:[10,10]},{name:'precision',type:'number',default:2.5}]},Pm),Ol('Projection',Am);var BU='log',WU='band',HU='point',XU='linear',VU='ordinal',JU='quantile',ZU='quantize',KU='threshold',eF='bin-ordinal',tF='sequential',nF=Ue(Nm,Rl);nF.transform=function(bB,_B){if(this.value&&!bB.modified())return _B.StopPropagation;var xB=_B.fork(_B.NO_SOURCE|_B.NO_FIELDS),vB=this.value,kB=bB.scale,wB=bB.count,SB=bB.format||Um(kB,wB,bB.formatSpecifier),CB=bB.values||Lm(kB,wB);return vB&&(xB.rem=vB),vB=CB.map(function(zB){return Io({value:zB,label:SB(zB)})}),bB.extra&&vB.push(Io({extra:{value:vB[0].value},label:''})),(xB.source=xB.add=this.value=vB,xB)};var aF=Ue(Bm,Rl);aF.transform=function(bB,_B){var xB=_B.dataflow,vB=_B.fork(_B.NO_SOURCE|_B.NO_FIELDS),kB=bB.item||Ym,wB=bB.key||Fo,SB=this.value;return SB||(_B=_B.addAll(),this.value=SB=Le().test(Gm),SB.lookup=function(CB){return SB.get(wB(CB))}),(bB.modified('key')||_B.modified(wB))&&ke('DataJoin does not support modified key function or fields.'),_B.visit(_B.ADD,function(CB){var zB=wB(CB),TB=SB.get(zB);TB?(TB.exit?(--SB.empty,vB.add):vB.mod).push(TB):(SB.set(zB,TB=kB(CB)),vB.add.push(TB)),TB.datum=CB,TB.exit=!1}),_B.visit(_B.MOD,function(CB){var zB=wB(CB),TB=SB.get(zB);TB&&(TB.datum=CB,vB.mod.push(TB))}),_B.visit(_B.REM,function(CB){var zB=wB(CB),TB=SB.get(zB);CB!==TB.datum||TB.exit||(vB.rem.push(TB),TB.exit=!0,++SB.empty)}),_B.changed(_B.ADD_MOD)&&vB.modifies('datum'),bB.clean&&SB.empty>xB.cleanThreshold&&xB.runAfter(SB.clean),vB};var iF=Ue(Wm,Rl);iF.transform=function(bB,_B){var xB=_B.fork(_B.ADD_REM),vB=_B.encode,kB='enter'===vB,wB=bB.encoders.update||rT,SB=bB.encoders.enter||rT,CB=bB.encoders.exit||rT,zB=(vB&&!kB?bB.encoders[vB]:wB)||rT;if(_B.changed(_B.ADD)&&(_B.visit(_B.ADD,function(RB){SB(RB,bB),wB(RB,bB),zB!==rT&&zB!==wB&&zB(RB,bB)}),xB.modifies(SB.output),xB.modifies(wB.output),zB!==rT&&zB!==wB&&xB.modifies(zB.output)),_B.changed(_B.REM)&&CB!==rT&&(_B.visit(_B.REM,function(RB){CB(RB,bB)}),xB.modifies(CB.output)),kB||zB!==rT){var TB=_B.MOD|(bB.modified()?_B.REFLOW:0);kB?(_B.visit(TB,function(RB){var PB=SB(RB,bB);(zB(RB,bB)||PB)&&xB.mod.push(RB)}),xB.mod.length&&xB.modifies(SB.output)):_B.visit(TB,function(RB){zB(RB,bB)&&xB.mod.push(RB)}),xB.mod.length&&xB.modifies(zB.output)}return xB};var dF={};dF[JU]=function(bB){var _B=bB.domain(),xB=[_B[0]].concat(bB.quantiles());return xB.max=We(_B),xB},dF[ZU]=function(bB){var _B=bB.domain(),xB=_B[0],vB=We(_B),kB=bB.range().length,wB=Array(kB),SB=0;for(wB[0]=xB;++SB<kB;)wB[SB]=(SB*vB-(SB-kB)*xB)/kB;return wB.max=vB,wB},dF[KU]=function(bB){var _B=[-Infinity].concat(bB.domain());return _B.max=+Infinity,_B},dF['bin-linear']=Zm,dF[eF]=Zm;var rF=Ue(ah,Rl);rF.transform=function(bB,_B){if(null!=this.value&&!bB.modified())return _B.StopPropagation;var xB=_B.fork(_B.NO_SOURCE|_B.NO_FIELDS),vB=0,kB=this.value,wB='gradient'===bB.type,SB=bB.scale,CB=null==bB.count?5:bB.count,zB=bB.format||Um(SB,CB,bB.formatSpecifier),TB=bB.values||Hm(SB,CB,wB);if(zB=Km(SB,zB),kB&&(xB.rem=kB),wB)var RB=bB.values?SB.domain():TB,PB=xu(SB,RB[0],We(RB));else{var AB=bB.size,OB;Oe(AB)?(!bB.values&&0===SB(TB[0])&&(TB=TB.slice(1)),OB=TB.reduce(function(MB,DB){return Math.max(MB,AB(DB,bB))},0)):AB=Me(OB=AB||8)}return kB=TB.map(function(MB,DB){var qB=Io({index:DB,label:zB(MB,DB,TB),value:MB});return wB?qB.perc=PB(MB):(qB.offset=OB,qB.size=AB(MB,bB),qB.total=Math.round(vB),vB+=qB.size),qB}),xB.source=xB.add=this.value=kB,xB};var oF=Le({line:sh,"line-radial":function(bB,_B,xB,vB){return sh(_B*Math.cos(bB),_B*Math.sin(bB),vB*Math.cos(xB),vB*Math.sin(xB))},arc:uh,"arc-radial":function(bB,_B,xB,vB){return uh(_B*Math.cos(bB),_B*Math.sin(bB),vB*Math.cos(xB),vB*Math.sin(xB))},curve:gh,"curve-radial":function(bB,_B,xB,vB){return gh(_B*Math.cos(bB),_B*Math.sin(bB),vB*Math.cos(xB),vB*Math.sin(xB))},"orthogonal-horizontal":function(bB,_B,xB,vB){return'M'+bB+','+_B+'V'+vB+'H'+xB},"orthogonal-vertical":function(bB,_B,xB,vB){return'M'+bB+','+_B+'H'+xB+'V'+vB},"orthogonal-radial":function(bB,_B,xB,vB){var kB=Math.cos(bB),wB=Math.sin(bB),SB=Math.cos(xB),CB=Math.sin(xB),zB=Math.abs(xB-bB)>Math.PI?xB<=bB:xB>bB;return'M'+_B*kB+','+_B*wB+'A'+_B+','+_B+' 0 0,'+(zB?1:0)+' '+_B*SB+','+_B*CB+'L'+vB*SB+','+vB*CB},"diagonal-horizontal":function(bB,_B,xB,vB){var kB=(bB+xB)/2;return'M'+bB+','+_B+'C'+kB+','+_B+' '+kB+','+vB+' '+xB+','+vB},"diagonal-vertical":function(bB,_B,xB,vB){var kB=(_B+vB)/2;return'M'+bB+','+_B+'C'+bB+','+kB+' '+xB+','+kB+' '+xB+','+vB},"diagonal-radial":function(bB,_B,xB,vB){var kB=Math.cos(bB),wB=Math.sin(bB),SB=Math.cos(xB),CB=Math.sin(xB),zB=(_B+vB)/2;return'M'+_B*kB+','+_B*wB+'C'+zB*kB+','+zB*wB+' '+zB*SB+','+zB*CB+' '+vB*SB+','+vB*CB}}),lF=Ue(lh,Rl);lF.transform=function(bB,_B){var xB=bB.sourceX||ih,vB=bB.sourceY||dh,kB=bB.targetX||rh,wB=bB.targetY||oh,SB=bB.as||'path',CB=bB.orient||'vertical',zB=bB.shape||'line',TB=oF.get(zB+'-'+CB)||oF.get(zB);return TB||ke('LinkPath unsupported type: '+bB.shape+(bB.orient?'-'+bB.orient:'')),_B.visit(_B.SOURCE,function(RB){RB[SB]=TB(xB(RB),vB(RB),kB(RB),wB(RB))}),_B.reflow(bB.modified()).modifies(SB)};var sF=Ue(wh,Rl);sF.transform=function(bB,_B){var xB=bB.as||['startAngle','endAngle'],vB=xB[0],kB=xB[1],wB=bB.field||iT,SB=bB.startAngle||0,CB=null==bB.endAngle?2*Math.PI:bB.endAngle,zB=_B.source,TB=zB.map(wB),RB=TB.length,PB=SB,AB=(CB-SB)/fe(TB),OB=J(RB),MB,DB,qB;for(bB.sort&&OB.sort(function(LB,UB){return TB[LB]-TB[UB]}),MB=0;MB<RB;++MB)qB=TB[OB[MB]],DB=zB[OB[MB]],DB[vB]=PB,DB[kB]=PB+=qB*AB;return this.value=TB,_B.reflow(bB.modified()).modifies(xB)};var fF=5,cF=Ze([XU,'pow','sqrt']),uF=Ze(['set','modified','clear','type','scheme','schemeExtent','schemeCount','domain','domainMin','domainMid','domainMax','domainRaw','nice','zero','range','rangeStep','round','reverse','interpolate','interpolateGamma']),pF=Ue(Eh,Rl);pF.transform=function(bB,_B){var xB=_B.dataflow,vB=this.value,kB;for(kB in(!vB||bB.modified('type'))&&(this.value=vB=cu((bB.type||XU).toLowerCase())()),bB)uF[kB]||(Oe(vB[kB])?vB[kB](bB[kB]):xB.warn('Unsupported scale property: '+kB));return zh(vB,bB,Sh(vB,bB),xB),_B.fork(_B.NO_SOURCE|_B.NO_FIELDS)};var gF=Ue(Mh,Rl);gF.transform=function(bB,_B){var xB=bB.modified('sort')||_B.changed(_B.ADD)||_B.modified(bB.sort.fields)||_B.modified('datum');return xB&&_B.source.sort(bB.sort),this.modified(xB),_B};var yF=Ue(Dh,Rl);yF.transform=function(bB,_B){var xB=bB.as||['y0','y1'],vB=xB[0],kB=xB[1],wB=bB.field||iT,SB=bB.offset==='center'?qh:bB.offset==='normalize'?Lh:Uh,CB,zB,TB,RB;for(CB=Fh(_B.source,bB.groupby,bB.sort,wB),zB=0,TB=CB.length,RB=CB.max;zB<TB;++zB)SB(CB[zB],RB,wB,vB,kB);return _B.reflow(bB.modified()).modifies(xB)};Pl({type:'LinkPath',metadata:{modifies:!0},params:[{name:'sourceX',type:'field',default:'source.x'},{name:'sourceY',type:'field',default:'source.y'},{name:'targetX',type:'field',default:'target.x'},{name:'targetY',type:'field',default:'target.y'},{name:'orient',type:'enum',default:'vertical',values:['horizontal','vertical','radial']},{name:'shape',type:'enum',default:'line',values:['line','arc','curve','diagonal','orthogonal']},{name:'as',type:'string',default:'path'}]},lh),Pl({type:'Pie',metadata:{modifies:!0},params:[{name:'field',type:'field'},{name:'startAngle',type:'number',default:0},{name:'endAngle',type:'number',default:6.283185307179586},{name:'sort',type:'boolean',default:!1},{name:'as',type:'string',array:!0,length:2,default:['startAngle','endAngle']}]},wh),Pl({type:'Stack',metadata:{modifies:!0},params:[{name:'field',type:'field'},{name:'groupby',type:'field',array:!0},{name:'sort',type:'compare'},{name:'offset',type:'enum',default:'zero',values:['zero','center','normalize']},{name:'as',type:'string',array:!0,length:2,default:['y0','y1']}]},Dh),Ol('AxisTicks',Nm),Ol('DataJoin',Bm),Ol('Encode',Wm),Ol('LegendEntries',ah),Ol('Scale',Eh),Ol('SortItems',Mh);var vF=wy.prototype=Ey.prototype;vF.copy=function(){var bB=new Ey(this._x,this._y,this._x0,this._y0,this._x1,this._y1),_B=this._root,xB,vB;if(!_B)return bB;if(!_B.length)return bB._root=Sy(_B),bB;for(xB=[{source:_B,target:bB._root=[,,,,]}];_B=xB.pop();)for(var kB=0;4>kB;++kB)(vB=_B.source[kB])&&(vB.length?xB.push({source:vB,target:_B.target[kB]=[,,,,]}):_B.target[kB]=Sy(vB));return bB},vF.add=function(bB){var _B=+this._x.call(null,bB),xB=+this._y.call(null,bB);return Bh(this.cover(_B,xB),_B,xB,bB)},vF.addAll=function(bB){var vB=bB.length,SB=Array(vB),CB=Array(vB),zB=Infinity,TB=Infinity,RB=-Infinity,PB=-Infinity,_B,xB,kB,wB;for(xB=0;xB<vB;++xB)isNaN(kB=+this._x.call(null,_B=bB[xB]))||isNaN(wB=+this._y.call(null,_B))||(SB[xB]=kB,CB[xB]=wB,kB<zB&&(zB=kB),kB>RB&&(RB=kB),wB<TB&&(TB=wB),wB>PB&&(PB=wB));for(RB<zB&&(zB=this._x0,RB=this._x1),PB<TB&&(TB=this._y0,PB=this._y1),this.cover(zB,TB).cover(RB,PB),xB=0;xB<vB;++xB)Bh(this,SB[xB],CB[xB],bB[xB]);return this},vF.cover=function(bB,_B){if(isNaN(bB=+bB)||isNaN(_B=+_B))return this;var xB=this._x0,vB=this._y0,kB=this._x1,wB=this._y1;if(isNaN(xB))kB=(xB=Math.floor(bB))+1,wB=(vB=Math.floor(_B))+1;else if(xB>bB||bB>kB||vB>_B||_B>wB){var SB=kB-xB,CB=this._root,zB,TB;switch(TB=(_B<(vB+wB)/2)<<1|bB<(xB+kB)/2){case 0:{do zB=[,,,,],zB[TB]=CB,CB=zB;while((SB*=2,kB=xB+SB,wB=vB+SB,bB>kB||_B>wB));break}case 1:{do zB=[,,,,],zB[TB]=CB,CB=zB;while((SB*=2,xB=kB-SB,wB=vB+SB,xB>bB||_B>wB));break}case 2:{do zB=[,,,,],zB[TB]=CB,CB=zB;while((SB*=2,kB=xB+SB,vB=wB-SB,bB>kB||vB>_B));break}case 3:{do zB=[,,,,],zB[TB]=CB,CB=zB;while((SB*=2,xB=kB-SB,vB=wB-SB,xB>bB||vB>_B));break}}this._root&&this._root.length&&(this._root=CB)}else return this;return this._x0=xB,this._y0=vB,this._x1=kB,this._y1=wB,this},vF.data=function(){var bB=[];return this.visit(function(_B){if(!_B.length)do bB.push(_B.data);while(_B=_B.next)}),bB},vF.extent=function(bB){return arguments.length?this.cover(+bB[0][0],+bB[0][1]).cover(+bB[1][0],+bB[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},vF.find=function(bB,_B,xB){var kB=this._x0,wB=this._y0,RB=this._x1,PB=this._y1,AB=[],OB=this._root,vB,SB,CB,zB,TB,MB,DB;for(OB&&AB.push(new Xh(OB,kB,wB,RB,PB)),null==xB?xB=Infinity:(kB=bB-xB,wB=_B-xB,RB=bB+xB,PB=_B+xB,xB*=xB);MB=AB.pop();)if(!(!(OB=MB.node)||(SB=MB.x0)>RB||(CB=MB.y0)>PB||(zB=MB.x1)<kB||(TB=MB.y1)<wB))if(OB.length){var qB=(SB+zB)/2,LB=(CB+TB)/2;AB.push(new Xh(OB[3],qB,LB,zB,TB),new Xh(OB[2],SB,LB,qB,TB),new Xh(OB[1],qB,CB,zB,LB),new Xh(OB[0],SB,CB,qB,LB)),(DB=(_B>=LB)<<1|bB>=qB)&&(MB=AB[AB.length-1],AB[AB.length-1]=AB[AB.length-1-DB],AB[AB.length-1-DB]=MB)}else{var UB=bB-+this._x.call(null,OB.data),FB=_B-+this._y.call(null,OB.data),jB=UB*UB+FB*FB;if(jB<xB){var IB=Math.sqrt(xB=jB);kB=bB-IB,wB=_B-IB,RB=bB+IB,PB=_B+IB,vB=OB.data}}return vB},vF.remove=function(bB){if(isNaN(RB=+this._x.call(null,bB))||isNaN(PB=+this._y.call(null,bB)))return this;var xB=this._root,SB=this._x0,CB=this._y0,zB=this._x1,TB=this._y1,_B,vB,kB,wB,RB,PB,AB,OB,MB,DB,qB,LB;if(!xB)return this;if(xB.length)for(;;){if((MB=RB>=(AB=(SB+zB)/2))?SB=AB:zB=AB,(DB=PB>=(OB=(CB+TB)/2))?CB=OB:TB=OB,(_B=xB,!(xB=xB[qB=DB<<1|MB])))return this;if(!xB.length)break;(_B[3&qB+1]||_B[3&qB+2]||_B[3&qB+3])&&(vB=_B,LB=qB)}for(;xB.data!==bB;)if(kB=xB,!(xB=xB.next))return this;return((wB=xB.next)&&delete xB.next,kB)?(wB?kB.next=wB:delete kB.next,this):_B?(wB?_B[qB]=wB:delete _B[qB],(xB=_B[0]||_B[1]||_B[2]||_B[3])&&xB===(_B[3]||_B[2]||_B[1]||_B[0])&&!xB.length&&(vB?vB[LB]=xB:this._root=xB),this):(this._root=wB,this)},vF.removeAll=function(bB){for(var _B=0,xB=bB.length;_B<xB;++_B)this.remove(bB[_B]);return this},vF.root=function(){return this._root},vF.size=function(){var bB=0;return this.visit(function(_B){if(!_B.length)do++bB;while(_B=_B.next)}),bB},vF.visit=function(bB){var _B=[],vB=this._root,xB,kB,wB,SB,CB,zB;for(vB&&_B.push(new Xh(vB,this._x0,this._y0,this._x1,this._y1));xB=_B.pop();)if(!bB(vB=xB.node,wB=xB.x0,SB=xB.y0,CB=xB.x1,zB=xB.y1)&&vB.length){var TB=(wB+CB)/2,RB=(SB+zB)/2;(kB=vB[3])&&_B.push(new Xh(kB,TB,RB,CB,zB)),(kB=vB[2])&&_B.push(new Xh(kB,wB,RB,TB,zB)),(kB=vB[1])&&_B.push(new Xh(kB,TB,SB,CB,RB)),(kB=vB[0])&&_B.push(new Xh(kB,wB,SB,TB,RB))}return this},vF.visitAfter=function(bB){var _B=[],xB=[],vB;for(this._root&&_B.push(new Xh(this._root,this._x0,this._y0,this._x1,this._y1));vB=_B.pop();){var kB=vB.node;if(kB.length){var SB=vB.x0,CB=vB.y0,zB=vB.x1,TB=vB.y1,RB=(SB+zB)/2,PB=(CB+TB)/2,wB;(wB=kB[0])&&_B.push(new Xh(wB,SB,CB,RB,PB)),(wB=kB[1])&&_B.push(new Xh(wB,RB,CB,zB,PB)),(wB=kB[2])&&_B.push(new Xh(wB,SB,PB,RB,TB)),(wB=kB[3])&&_B.push(new Xh(wB,RB,PB,zB,TB))}xB.push(vB)}for(;vB=xB.pop();)bB(vB.node,vB.x0,vB.y0,vB.x1,vB.y1);return this},vF.x=function(bB){return arguments.length?(this._x=bB,this):this._x},vF.y=function(bB){return arguments.length?(this._y=bB,this):this._y};var kF=0,wF=0,EF=0,SF=1e3,CF,zF,TF=0,RF=0,PF=0,AF='object'===('undefined'===typeof performance?'undefined':babelHelpers.typeof(performance))&&performance.now?performance:Date,OF='function'===typeof requestAnimationFrame?requestAnimationFrame:function(bB){setTimeout(bB,17)};Dy.prototype=qy.prototype={constructor:Dy,restart:function(_B,xB,vB){if('function'!==typeof _B)throw new TypeError('callback is not a function');vB=(null==vB?Oy():+vB)+(null==xB?0:+xB),this._next||zF===this||(zF?zF._next=this:CF=this,zF=this),this._call=_B,this._time=vB,Iy()},stop:function(){this._call&&(this._call=null,this._time=Infinity,Iy())}};var MF=10,DF=Math.PI*(3-Math.sqrt(5)),qF={center:function(bB,_B){function xB(){var wB=vB.length,CB=0,zB=0,kB,SB;for(kB=0;kB<wB;++kB)SB=vB[kB],CB+=SB.x,zB+=SB.y;for(CB=CB/wB-bB,zB=zB/wB-_B,kB=0;kB<wB;++kB)SB=vB[kB],SB.x-=CB,SB.y-=zB}var vB;return null==bB&&(bB=0),null==_B&&(_B=0),xB.initialize=function(kB){vB=kB},xB.x=function(kB){return arguments.length?(bB=+kB,xB):bB},xB.y=function(kB){return arguments.length?(_B=+kB,xB):_B},xB},collide:function(bB){function _B(){function zB(UB,FB,jB,IB,$B){var NB=UB.data,BB=UB.r,YB=DB+BB;if(NB){if(NB.index>AB.index){var GB=OB-NB.x-NB.vx,WB=MB-NB.y-NB.vy,HB=GB*GB+WB*WB;HB<YB*YB&&(0===GB&&(GB=$h(),HB+=GB*GB),0===WB&&(WB=$h(),HB+=WB*WB),HB=(YB-(HB=Math.sqrt(HB)))/HB*SB,AB.vx+=(GB*=HB)*(YB=(BB*=BB)/(qB+BB)),AB.vy+=(WB*=HB)*YB,NB.vx-=GB*(YB=1-YB),NB.vy-=WB*YB)}return}return FB>OB+YB||IB<OB-YB||jB>MB+YB||$B<MB-YB}for(var RB=kB.length,LB=0,TB,PB,AB,OB,MB,DB,qB;LB<CB;++LB)for(PB=wy(kB,Cy,zy).visitAfter(xB),TB=0;TB<RB;++TB)AB=kB[TB],DB=wB[AB.index],qB=DB*DB,OB=AB.x+AB.vx,MB=AB.y+AB.vy,PB.visit(zB)}function xB(zB){if(zB.data)return zB.r=wB[zB.data.index];for(var TB=zB.r=0;4>TB;++TB)zB[TB]&&zB[TB].r>zB.r&&(zB.r=zB[TB].r)}function vB(){if(kB){var TB=kB.length,zB,RB;for(wB=Array(TB),zB=0;zB<TB;++zB)RB=kB[zB],wB[RB.index]=+bB(RB,zB,kB)}}var SB=1,CB=1,kB,wB;return'function'!==typeof bB&&(bB=Ih(null==bB?1:+bB)),_B.initialize=function(zB){kB=zB,vB()},_B.iterations=function(zB){return arguments.length?(CB=+zB,_B):CB},_B.strength=function(zB){return arguments.length?(SB=+zB,_B):SB},_B.radius=function(zB){return arguments.length?(bB='function'===typeof zB?zB:Ih(+zB),vB(),_B):bB},_B},nbody:function(){function bB(AB){var MB=kB.length,DB=wy(kB,$y,Ny).visitAfter(xB),OB;for(SB=AB,OB=0;OB<MB;++OB)wB=kB[OB],DB.visit(vB)}function _B(){if(kB){var OB=kB.length,AB,MB;for(zB=Array(OB),AB=0;AB<OB;++AB)MB=kB[AB],zB[MB.index]=+CB(MB,AB,kB)}}function xB(AB){var OB=0,MB,DB,qB,LB,UB;if(AB.length){for(qB=LB=UB=0;4>UB;++UB)(MB=AB[UB])&&(DB=MB.value)&&(OB+=DB,qB+=DB*MB.x,LB+=DB*MB.y);AB.x=qB/OB,AB.y=LB/OB}else{MB=AB,MB.x=MB.data.x,MB.y=MB.data.y;do OB+=zB[MB.data.index];while(MB=MB.next)}AB.value=OB}function vB(AB,OB,MB,DB){if(!AB.value)return!0;var qB=AB.x-wB.x,LB=AB.y-wB.y,UB=DB-OB,FB=qB*qB+LB*LB;if(UB*UB/PB<FB)return FB<RB&&(0===qB&&(qB=$h(),FB+=qB*qB),0===LB&&(LB=$h(),FB+=LB*LB),FB<TB&&(FB=Math.sqrt(TB*FB)),wB.vx+=qB*AB.value*SB/FB,wB.vy+=LB*AB.value*SB/FB),!0;if(!(AB.length||FB>=RB)){(AB.data!==wB||AB.next)&&(0===qB&&(qB=$h(),FB+=qB*qB),0===LB&&(LB=$h(),FB+=LB*LB),FB<TB&&(FB=Math.sqrt(TB*FB)));do AB.data!==wB&&(UB=zB[AB.data.index]*SB/FB,wB.vx+=qB*UB,wB.vy+=LB*UB);while(AB=AB.next)}}var CB=Ih(-30),TB=1,RB=Infinity,PB=0.81,kB,wB,SB,zB;return bB.initialize=function(AB){kB=AB,_B()},bB.strength=function(AB){return arguments.length?(CB='function'===typeof AB?AB:Ih(+AB),_B(),bB):CB},bB.distanceMin=function(AB){return arguments.length?(TB=AB*AB,bB):Math.sqrt(TB)},bB.distanceMax=function(AB){return arguments.length?(RB=AB*AB,bB):Math.sqrt(RB)},bB.theta=function(AB){return arguments.length?(PB=AB*AB,bB):Math.sqrt(PB)},bB},link:function(bB){function xB(DB){for(var qB=0,LB=bB.length;qB<MB;++qB)for(var UB=0,FB,jB,IB,$B,NB,BB,YB;UB<LB;++UB)FB=bB[UB],jB=FB.source,IB=FB.target,$B=IB.x+IB.vx-jB.x-jB.vx||$h(),NB=IB.y+IB.vy-jB.y-jB.vy||$h(),BB=Math.sqrt($B*$B+NB*NB),BB=(BB-RB[UB])/BB*DB*zB[UB],$B*=BB,NB*=BB,IB.vx-=$B*(YB=OB[UB]),IB.vy-=NB*YB,jB.vx+=$B*(YB=1-YB),jB.vy+=NB*YB}function vB(){if(PB){var qB=PB.length,LB=bB.length,UB=tt(PB,SB),DB,FB;for(DB=0,AB=Array(qB);DB<LB;++DB)FB=bB[DB],FB.index=DB,'object'!==babelHelpers.typeof(FB.source)&&(FB.source=Py(UB,FB.source)),'object'!==babelHelpers.typeof(FB.target)&&(FB.target=Py(UB,FB.target)),AB[FB.source.index]=(AB[FB.source.index]||0)+1,AB[FB.target.index]=(AB[FB.target.index]||0)+1;for(DB=0,OB=Array(LB);DB<LB;++DB)FB=bB[DB],OB[DB]=AB[FB.source.index]/(AB[FB.source.index]+AB[FB.target.index]);zB=Array(LB),kB(),RB=Array(LB),wB()}}function kB(){if(PB)for(var DB=0,qB=bB.length;DB<qB;++DB)zB[DB]=+CB(bB[DB],DB,bB)}function wB(){if(PB)for(var DB=0,qB=bB.length;DB<qB;++DB)RB[DB]=+TB(bB[DB],DB,bB)}var SB=Ry,CB=function(DB){return 1/Math.min(AB[DB.source.index],AB[DB.target.index])},TB=Ih(30),MB=1,zB,RB,PB,AB,OB;return null==bB&&(bB=[]),xB.initialize=function(DB){PB=DB,vB()},xB.links=function(DB){return arguments.length?(bB=DB,vB(),xB):bB},xB.id=function(DB){return arguments.length?(SB=DB,xB):SB},xB.iterations=function(DB){return arguments.length?(MB=+DB,xB):MB},xB.strength=function(DB){return arguments.length?(CB='function'===typeof DB?DB:Ih(+DB),kB(),xB):CB},xB.distance=function(DB){return arguments.length?(TB='function'===typeof DB?DB:Ih(+DB),wB(),xB):TB},xB},x:function(bB){function _B(CB){for(var zB=0,TB=kB.length,RB;zB<TB;++zB)RB=kB[zB],RB.vx+=(SB[zB]-RB.x)*wB[zB]*CB}function xB(){if(kB){var zB=kB.length,CB;for(wB=Array(zB),SB=Array(zB),CB=0;CB<zB;++CB)wB[CB]=isNaN(SB[CB]=+bB(kB[CB],CB,kB))?0:+vB(kB[CB],CB,kB)}}var vB=Ih(0.1),kB,wB,SB;return'function'!==typeof bB&&(bB=Ih(null==bB?0:+bB)),_B.initialize=function(CB){kB=CB,xB()},_B.strength=function(CB){return arguments.length?(vB='function'===typeof CB?CB:Ih(+CB),xB(),_B):vB},_B.x=function(CB){return arguments.length?(bB='function'===typeof CB?CB:Ih(+CB),xB(),_B):bB},_B},y:function(bB){function _B(CB){for(var zB=0,TB=kB.length,RB;zB<TB;++zB)RB=kB[zB],RB.vy+=(SB[zB]-RB.y)*wB[zB]*CB}function xB(){if(kB){var zB=kB.length,CB;for(wB=Array(zB),SB=Array(zB),CB=0;CB<zB;++CB)wB[CB]=isNaN(SB[CB]=+bB(kB[CB],CB,kB))?0:+vB(kB[CB],CB,kB)}}var vB=Ih(0.1),kB,wB,SB;return'function'!==typeof bB&&(bB=Ih(null==bB?0:+bB)),_B.initialize=function(CB){kB=CB,xB()},_B.strength=function(CB){return arguments.length?(vB='function'===typeof CB?CB:Ih(+CB),xB(),_B):vB},_B.y=function(CB){return arguments.length?(bB='function'===typeof CB?CB:Ih(+CB),xB(),_B):bB},_B}},LF='forces',UF=['alpha','alphaMin','alphaTarget','velocityDecay','forces'],FF=['static','iterations'],jF=['x','y','vx','vy'],IF=Ue(Hy,Rl);IF.transform=function(bB,_B){var xB=this.value,vB=_B.changed(_B.ADD_REM),kB=bB.modified(UF),wB=bB.iterations||300;if(xB?(vB&&(_B.modifies('index'),xB.nodes(_B.source)),kB&&Jy(xB,bB)):(this.value=xB=Vy(_B.source,bB),xB.on('tick',Xy(_B.dataflow,this)),!bB.static&&(vB=!0,xB.tick()),_B.modifies('index')),kB||vB||bB.modified(FF)||_B.changed()&&bB.restart)if(xB.alpha(Math.max(xB.alpha(),bB.alpha||1)).alphaDecay(1-Math.pow(xB.alphaMin(),1/wB)),bB.static)for(xB.stop();0<=--wB;)xB.tick();else if(xB.stopped()&&xB.restart(),!vB)return _B.StopPropagation;return this.finish(bB,_B)},IF.finish=function(bB,_B){for(var xB=_B.dataflow,vB=this._argops,kB=0,wB=vB.length,SB;kB<wB;++kB)if(SB=vB[kB],SB.name===LF&&'link'===SB.op._argval.force)for(var CB=SB.op._argops,zB=0,TB=CB.length,RB;zB<TB;++zB)if('links'===CB[zB].name&&(RB=CB[zB].op.source)){xB.touch(RB);break}return _B.reflow(bB.modified()).modifies(jF)};Pl({type:'Force',metadata:{modifies:!0},params:[{name:'static',type:'boolean',default:!1},{name:'restart',type:'boolean',default:!1},{name:'iterations',type:'number',default:300},{name:'alpha',type:'number',default:1},{name:'alphaMin',type:'number',default:0.001},{name:'alphaTarget',type:'number',default:0},{name:'velocityDecay',type:'number',default:0.4},{name:'forces',type:'param',array:!0,params:[{key:{force:'center'},params:[{name:'x',type:'number',default:0},{name:'y',type:'number',default:0}]},{key:{force:'collide'},params:[{name:'radius',type:'number',expr:!0},{name:'strength',type:'number',default:0.7},{name:'iterations',type:'number',default:1}]},{key:{force:'nbody'},params:[{name:'strength',type:'number',default:-30},{name:'theta',type:'number',default:0.9},{name:'distanceMin',type:'number',default:1},{name:'distanceMax',type:'number'}]},{key:{force:'link'},params:[{name:'links',type:'data'},{name:'id',type:'field'},{name:'distance',type:'number',default:30,expr:!0},{name:'strength',type:'number',expr:!0},{name:'iterations',type:'number',default:1}]},{key:{force:'x'},params:[{name:'strength',type:'number',default:0.1},{name:'x',type:'field'}]},{key:{force:'y'},params:[{name:'strength',type:'number',default:0.1},{name:'y',type:'field'}]}]},{name:'as',type:'string',array:!0,modify:!1,default:['x','y','vx','vy']}]},Hy),qb.prototype=Pb.prototype={constructor:qb,count:function(){return this.eachAfter(sb)},each:function(bB){var _B=this,vB=[_B],xB,kB,wB,SB;do for(xB=vB.reverse(),vB=[];_B=xB.pop();)if(bB(_B),kB=_B.children,kB)for(wB=0,SB=kB.length;wB<SB;++wB)vB.push(kB[wB]);while(vB.length);return this},eachAfter:function(bB){for(var _B=this,xB=[_B],vB=[],kB,wB,SB;_B=xB.pop();)if(vB.push(_B),kB=_B.children,kB)for(wB=0,SB=kB.length;wB<SB;++wB)xB.push(kB[wB]);for(;_B=vB.pop();)bB(_B);return this},eachBefore:function(bB){for(var _B=this,xB=[_B],vB,kB;_B=xB.pop();)if(bB(_B),vB=_B.children,vB)for(kB=vB.length-1;0<=kB;--kB)xB.push(vB[kB]);return this},sum:function(bB){return this.eachAfter(function(_B){for(var xB=+bB(_B.data)||0,vB=_B.children,kB=vB&&vB.length;0<=--kB;)xB+=vB[kB].value;_B.value=xB})},sort:function(bB){return this.eachBefore(function(_B){_B.children&&_B.children.sort(bB)})},path:function(bB){for(var _B=this,xB=Sb(_B,bB),vB=[_B];_B!==xB;)_B=_B.parent,vB.push(_B);for(var kB=vB.length;bB!==xB;)vB.splice(kB,0,bB),bB=bB.parent;return vB},ancestors:function(){for(var bB=this,_B=[bB];bB=bB.parent;)_B.push(bB);return _B},descendants:function(){var bB=[];return this.each(function(_B){bB.push(_B)}),bB},leaves:function(){var bB=[];return this.eachBefore(function(_B){_B.children||bB.push(_B)}),bB},links:function(){var bB=this,_B=[];return bB.each(function(xB){xB!==bB&&_B.push({source:xB.parent,target:xB})}),_B},copy:function(){return Pb(this).eachBefore(Mb)}};var NF='$',BF={depth:-1},YF={};h_.prototype=Object.create(qb.prototype);var GF=(1+Math.sqrt(5))/2,WF=function bB(_B){function xB(vB,kB,wB,SB,CB){w_(_B,vB,kB,wB,SB,CB)}return xB.ratio=function(vB){return bB(1<(vB=+vB)?vB:1)},xB}(GF),HF=function bB(_B){function xB(vB,kB,wB,SB,CB){if((zB=vB._squarify)&&zB.ratio===_B)for(var AB=-1,MB=zB.length,DB=vB.value,zB,TB,RB,PB,OB;++AB<MB;){for(TB=zB[AB],RB=TB.children,(PB=TB.value=0,OB=RB.length);PB<OB;++PB)TB.value+=RB[PB].value;TB.dice?d_(TB,kB,wB,SB,wB+=(CB-wB)*TB.value/DB):k_(TB,kB,wB,kB+=(SB-kB)*TB.value/DB,CB),DB-=TB.value}else vB._squarify=zB=w_(_B,vB,kB,wB,SB,CB),zB.ratio=_B}return xB.ratio=function(vB){return bB(1<(vB=+vB)?vB:1)},xB}(GF),XF=Ue(z_,Rl);XF.transform=function(bB,_B){_B.source||ke('Nest transform requires an upstream data source.');var xB=bB.key||Fo,vB,kB,wB,SB;return(!this.value||(SB=bB.modified())||_B.changed())&&(vB=Pe(bB.keys).reduce(function(CB,zB){return CB.key(zB),CB},nt()).entries(_B.source),kB=Pb({values:vB},T_),wB=kB.lookup={},kB.each(function(CB){null!=Fo(CB.data)&&(wB[xB(CB.data)]=CB)}),this.value=kB),_B.source.root=this.value,SB?_B.fork(_B.ALL):_B};var VF=Ue(R_,Rl);VF.transform=function(bB,_B){_B.source||ke('Stratify transform requires an upstream data source.');var xB=bB.modified(),wB=!this.value||xB||_B.changed(_B.ADD_REM)||_B.modified(bB.key.fields)||_B.modified(bB.parentKey.fields),vB,kB;return wB&&(vB=s_().id(bB.key).parentId(bB.parentKey)(_B.source),kB=vB.lookup={},vB.each(function(SB){kB[bB.key(SB.data)]=SB}),this.value=vB),_B.source.root=this.value,xB?_B.fork(_B.ALL):_B};var JF=Ue(P_,Rl);JF.transform=function(bB,_B){function xB(TB){var RB=wB[TB];RB&&(CB[TB]=1,zB.mod.push(RB))}_B.source&&_B.source.root||ke('TreeLinks transform requires a backing tree data source.');var vB=_B.source.root,kB=vB.lookup,wB=this.value,SB=bB.key||Fo,CB={},zB=_B.fork();return _B.visit(_B.REM,function(TB){var RB=SB(TB),PB=wB[RB];PB&&(delete wB[RB],zB.rem.push(PB))}),_B.visit(_B.ADD,function(TB){var RB=SB(TB),PB;(PB=A_(kB[RB]))&&(zB.add.push(wB[RB]=Io({source:PB,target:TB})),CB[RB]=1)}),_B.visit(_B.MOD,function(TB){var RB=SB(TB),PB=kB[RB],AB=PB.children;if(xB(RB),AB)for(var OB=0,MB=AB.length;OB<MB;++OB)CB[RB=SB(AB[OB].data)]||xB(RB)}),zB};var ZF={binary:function(bB,_B,xB,vB,kB){function wB(PB,AB,OB,MB,DB,qB,LB){if(PB>=AB-1){var UB=SB[PB];return UB.x0=MB,UB.y0=DB,UB.x1=qB,void(UB.y1=LB)}for(var FB=RB[PB],jB=OB/2+FB,IB=PB+1,$B=AB-1,NB;IB<$B;)NB=IB+$B>>>1,RB[NB]<jB?IB=NB+1:$B=NB;jB-RB[IB-1]<RB[IB]-jB&&PB+1<IB&&--IB;var BB=RB[IB]-FB,YB=OB-BB;if(qB-MB>LB-DB){var GB=(MB*YB+qB*BB)/OB;wB(PB,IB,BB,MB,DB,GB,LB),wB(IB,AB,YB,GB,DB,qB,LB)}else{var WB=(DB*YB+LB*BB)/OB;wB(PB,IB,BB,MB,DB,qB,WB),wB(IB,AB,YB,MB,WB,qB,LB)}}var SB=bB.children,zB=SB.length,RB=Array(zB+1),CB,TB;for(RB[0]=TB=CB=0;CB<zB;++CB)RB[CB+1]=TB+=SB[CB].value;wB(0,zB,bB.value,_B,xB,vB,kB)},dice:d_,slice:k_,slicedice:function(bB,_B,xB,vB,kB){(1&bB.depth?k_:d_)(bB,_B,xB,vB,kB)},squarify:WF,resquarify:HF},KF={tidy:function(){function bB(TB){var RB=b_(TB);if(RB.eachAfter(_B),RB.parent.m=-RB.z,RB.eachBefore(xB),zB)TB.eachBefore(kB);else{var PB=TB,AB=TB,OB=TB;TB.eachBefore(function(UB){UB.x<PB.x&&(PB=UB),UB.x>AB.x&&(AB=UB),UB.depth>OB.depth&&(OB=UB)});var MB=PB===AB?1:wB(PB,AB)/2,DB=MB-PB.x,qB=SB/(AB.x+MB+DB),LB=CB/(OB.depth||1);TB.eachBefore(function(UB){UB.x=(UB.x+DB)*qB,UB.y=UB.depth*LB})}return TB}function _B(TB){var RB=TB.children,PB=TB.parent.children,AB=TB.i?PB[TB.i-1]:null;if(RB){g_(TB);var OB=(RB[0].z+RB[RB.length-1].z)/2;AB?(TB.z=AB.z+wB(TB._,AB._),TB.m=TB.z-OB):TB.z=OB}else AB&&(TB.z=AB.z+wB(TB._,AB._));TB.parent.A=vB(TB,AB,TB.parent.A||PB[0])}function xB(TB){TB._.x=TB.z+TB.parent.m,TB.m+=TB.parent.m}function vB(TB,RB,PB){if(RB){for(var AB=TB,OB=TB,MB=RB,DB=AB.parent.children[0],qB=AB.m,LB=OB.m,UB=MB.m,FB=DB.m,jB;MB=u_(MB),AB=c_(AB),MB&&AB;)DB=c_(DB),OB=u_(OB),OB.a=TB,jB=MB.z+UB-AB.z-qB+wB(MB._,AB._),0<jB&&(p_(m_(MB,TB,PB),TB,jB),qB+=jB,LB+=jB),UB+=MB.m,qB+=AB.m,FB+=DB.m,LB+=OB.m;MB&&!u_(OB)&&(OB.t=MB,OB.m+=UB-LB),AB&&!c_(DB)&&(DB.t=AB,DB.m+=qB-FB,PB=TB)}return PB}function kB(TB){TB.x*=SB,TB.y=TB.depth*CB}var wB=f_,SB=1,CB=1,zB=null;return bB.separation=function(TB){return arguments.length?(wB=TB,bB):wB},bB.size=function(TB){return arguments.length?(zB=!1,SB=+TB[0],CB=+TB[1],bB):zB?null:[SB,CB]},bB.nodeSize=function(TB){return arguments.length?(zB=!0,SB=+TB[0],CB=+TB[1],bB):zB?[SB,CB]:null},bB},cluster:function(){function bB(wB){var CB=0,SB;wB.eachAfter(function(AB){var OB=AB.children;OB?(AB.x=Qy(OB),AB.y=tb(OB)):(AB.x=SB?CB+=_B(AB,SB):0,AB.y=0,SB=AB)});var zB=rb(wB),TB=ob(wB),RB=zB.x-_B(zB,TB)/2,PB=TB.x+_B(TB,zB)/2;return wB.eachAfter(kB?function(AB){AB.x=(AB.x-wB.x)*xB,AB.y=(wB.y-AB.y)*vB}:function(AB){AB.x=(AB.x-RB)/(PB-RB)*xB,AB.y=(1-(wB.y?AB.y/wB.y:1))*vB})}var _B=Ky,xB=1,vB=1,kB=!1;return bB.separation=function(wB){return arguments.length?(_B=wB,bB):_B},bB.size=function(wB){return arguments.length?(kB=!1,xB=+wB[0],vB=+wB[1],bB):kB?null:[xB,vB]},bB.nodeSize=function(wB){return arguments.length?(kB=!0,xB=+wB[0],vB=+wB[1],bB):kB?[xB,vB]:null},bB}},QF=Ue(D_,Rl);QF.transform=function(bB,_B){_B.source&&_B.source.root||ke(this.constructor.name+' transform requires a backing tree data source.');var xB=this.layout(bB.method),vB=this.fields,kB=_B.source.root,wB=bB.as||vB;bB.field&&kB.sum(bB.field),bB.sort&&kB.sort(bB.sort),q_(xB,this.params,bB);try{this.value=xB(kB)}catch(SB){ke(SB)}return kB.each(function(SB){L_(SB,vB,wB)}),_B.reflow(bB.modified()).modifies(wB).modifies('leaf')},Ue(U_,D_),U_.prototype.layout=function(bB){var _B=bB||'tidy';return KF.hasOwnProperty(_B)?KF[_B]():void ke('Unrecognized Tree layout method: '+_B)},U_.prototype.params=['size','nodeSize','separation'],U_.prototype.fields=['x','y','depth','children'],Ue(F_,D_),F_.prototype.layout=function(){var bB=E_();return bB.ratio=function(_B){var xB=bB.tile();xB.ratio&&bB.tile(xB.ratio(_B))},bB.method=function(_B){ZF.hasOwnProperty(_B)?bB.tile(ZF[_B]):ke('Unrecognized Treemap layout method: '+_B)},bB},F_.prototype.params=['method','ratio','size','round','padding','paddingInner','paddingOuter','paddingTop','paddingRight','paddingBottom','paddingLeft'],F_.prototype.fields=['x0','y0','x1','y1','depth','children'],Ue(j_,D_),j_.prototype.layout=function(){function bB(SB){var CB=SB.height+1;return SB.x0=SB.y0=kB,SB.x1=xB,SB.y1=vB/CB,SB.eachBefore(_B(vB,CB)),wB&&SB.eachBefore(i_),SB}function _B(SB,CB){return function(zB){zB.children&&d_(zB,zB.x0,SB*(zB.depth+1)/CB,zB.x1,SB*(zB.depth+2)/CB);var TB=zB.x0,RB=zB.y0,PB=zB.x1-kB,AB=zB.y1-kB;PB<TB&&(TB=PB=(TB+PB)/2),AB<RB&&(RB=AB=(RB+AB)/2),zB.x0=TB,zB.y0=RB,zB.x1=PB,zB.y1=AB}}var xB=1,vB=1,kB=0,wB=!1;return bB.round=function(SB){return arguments.length?(wB=!!SB,bB):wB},bB.size=function(SB){return arguments.length?(xB=+SB[0],vB=+SB[1],bB):[xB,vB]},bB.padding=function(SB){return arguments.length?(kB=+SB,bB):kB},bB},j_.prototype.params=['size','round','padding'],j_.prototype.fields=F_.prototype.fields,Ue(I_,D_),I_.prototype.layout=function(){function bB(wB){return wB.x=xB/2,wB.y=vB/2,_B?wB.eachBefore(t_(_B)).eachAfter(n_(kB,0.5)).eachBefore(a_(1)):wB.eachBefore(t_(Qb)).eachAfter(n_(Zb,1)).eachAfter(n_(kB,wB.r/Math.min(xB,vB))).eachBefore(a_(Math.min(xB,vB)/(2*wB.r))),wB}var _B=null,xB=1,vB=1,kB=Zb;return bB.radius=function(wB){return arguments.length?(_B=Vb(wB),bB):_B},bB.size=function(wB){return arguments.length?(xB=+wB[0],vB=+wB[1],bB):[xB,vB]},bB.padding=function(wB){return arguments.length?(kB='function'===typeof wB?wB:Kb(+wB),bB):kB},bB},I_.prototype.params=['size','padding'],I_.prototype.fields=['x','y','r','depth','children'];Pl({type:'Nest',metadata:{treesource:!0},params:[{name:'keys',type:'field',array:!0},{name:'key',type:'field'}]},z_),Pl({type:'Stratify',metadata:{treesource:!0},params:[{name:'key',type:'field',required:!0},{name:'parentKey',type:'field',required:!0}]},R_),Pl({type:'TreeLinks',metadata:{tree:!0,generates:!0,changes:!0},params:[{name:'key',type:'field'}]},P_),Pl({type:'Pack',metadata:{tree:!0,modifies:!0},params:[{name:'field',type:'field'},{name:'sort',type:'compare'},{name:'padding',type:'number',default:0},{name:'radius',type:'field',default:null},{name:'size',type:'number',array:!0,length:2},{name:'as',type:'string',array:!0,length:3,default:['x','y','r','depth','children']}]},I_),Pl({type:'Partition',metadata:{tree:!0,modifies:!0},params:[{name:'field',type:'field'},{name:'sort',type:'compare'},{name:'padding',type:'number',default:0},{name:'round',type:'boolean',default:!1},{name:'size',type:'number',array:!0,length:2},{name:'as',type:'string',array:!0,length:4,default:['x0','y0','x1','y1','depth','children']}]},j_),Pl({type:'Tree',metadata:{tree:!0,modifies:!0},params:[{name:'field',type:'field'},{name:'sort',type:'compare'},{name:'method',type:'enum',default:'tidy',values:['tidy','cluster']},{name:'size',type:'number',array:!0,length:2},{name:'nodeSize',type:'number',array:!0,length:2},{name:'as',type:'string',array:!0,length:4,default:['x','y','depth','children']}]},U_),Pl({type:'Treemap',metadata:{tree:!0,modifies:!0},params:[{name:'field',type:'field'},{name:'sort',type:'compare'},{name:'method',type:'enum',default:'squarify',values:['squarify','resquarify','binary','dice','slice','slicedice']},{name:'padding',type:'number',default:0},{name:'paddingInner',type:'number',default:0},{name:'paddingOuter',type:'number',default:0},{name:'paddingTop',type:'number',default:0},{name:'paddingRight',type:'number',default:0},{name:'paddingBottom',type:'number',default:0},{name:'paddingLeft',type:'number',default:0},{name:'ratio',type:'number',default:1.618033988749895},{name:'round',type:'boolean',default:!1},{name:'size',type:'number',array:!0,length:2},{name:'as',type:'string',array:!0,length:4,default:['x0','y0','x1','y1','depth','children']}]},F_),Y_.prototype={constructor:Y_,insert:function(_B,xB){var vB,kB,wB;if(_B){if(xB.P=_B,xB.N=_B.N,_B.N&&(_B.N.P=xB),_B.N=xB,_B.R){for(_B=_B.R;_B.L;)_B=_B.L;_B.L=xB}else _B.R=xB;vB=_B}else this._?(_B=X_(this._),xB.P=null,xB.N=_B,_B.P=_B.L=xB,vB=_B):(xB.P=xB.N=null,this._=xB,vB=null);for(xB.L=xB.R=null,xB.U=vB,xB.C=!0,_B=xB;vB&&vB.C;)kB=vB.U,vB===kB.L?(wB=kB.R,wB&&wB.C?(vB.C=wB.C=!1,kB.C=!0,_B=kB):(_B===vB.R&&(W_(this,vB),_B=vB,vB=_B.U),vB.C=!1,kB.C=!0,H_(this,kB))):(wB=kB.L,wB&&wB.C?(vB.C=wB.C=!1,kB.C=!0,_B=kB):(_B===vB.L&&(H_(this,vB),_B=vB,vB=_B.U),vB.C=!1,kB.C=!0,W_(this,kB))),vB=_B.U;this._.C=!1},remove:function(_B){_B.N&&(_B.N.P=_B.P),_B.P&&(_B.P.N=_B.N),_B.N=_B.P=null;var xB=_B.U,kB=_B.L,wB=_B.R,vB,SB,CB;if(SB=kB?wB?X_(wB):kB:wB,xB?xB.L===_B?xB.L=SB:xB.R=SB:this._=SB,kB&&wB?(CB=SB.C,SB.C=_B.C,SB.L=kB,kB.U=SB,SB===wB?(SB.U=xB,xB=SB,_B=SB.R):(xB=SB.U,SB.U=_B.U,_B=SB.R,xB.L=_B,SB.R=wB,wB.U=SB)):(CB=_B.C,_B=SB),_B&&(_B.U=xB),!CB){if(_B&&_B.C)return void(_B.C=!1);do{if(_B===this._)break;if(_B===xB.L){if(vB=xB.R,vB.C&&(vB.C=!1,xB.C=!0,W_(this,xB),vB=xB.R),vB.L&&vB.L.C||vB.R&&vB.R.C){vB.R&&vB.R.C||(vB.L.C=!1,vB.C=!0,H_(this,vB),vB=xB.R),vB.C=xB.C,xB.C=vB.R.C=!1,W_(this,xB),_B=this._;break}}else if(vB=xB.L,vB.C&&(vB.C=!1,xB.C=!0,H_(this,xB),vB=xB.L),vB.L&&vB.L.C||vB.R&&vB.R.C){vB.L&&vB.L.C||(vB.R.C=!1,vB.C=!0,W_(this,vB),vB=xB.L),vB.C=xB.C,xB.C=vB.L.C=!1,H_(this,xB),_B=this._;break}vB.C=!0,_B=xB,xB=xB.U}while(!_B.C);_B&&(_B.C=!1)}}};var lj=[],fj,cj=[],uj=1e-6,gj=1e-12,mj,hj,bj,_j;Ux.prototype={constructor:Ux,polygons:function(){var _B=this.edges;return this.cells.map(function(xB){var vB=xB.halfedges.map(function(kB){return yx(xB,_B[kB])});return vB.data=xB.site.data,vB})},triangles:function(){var bB=[],_B=this.edges;return this.cells.forEach(function(xB,vB){if(CB=(wB=xB.halfedges).length)for(var kB=xB.site,SB=-1,TB=_B[wB[CB-1]],RB=TB.left===kB?TB.right:TB.left,wB,CB,zB;++SB<CB;)zB=RB,TB=_B[wB[SB]],RB=TB.left===kB?TB.right:TB.left,zB&&RB&&vB<zB.index&&vB<RB.index&&0>qx(kB,zB,RB)&&bB.push([kB.data,zB.data,RB.data])}),bB},links:function(){return this.edges.filter(function(_B){return _B.right}).map(function(_B){return{source:_B.left.data,target:_B.right.data}})},find:function(_B,xB,vB){for(var kB=this,SB=kB._found||0,CB=kB.cells.length,wB,zB;!(zB=kB.cells[SB]);)if(++SB>=CB)return null;var TB=_B-zB.site[0],RB=xB-zB.site[1],PB=TB*TB+RB*RB;do zB=kB.cells[wB=SB],SB=null,zB.halfedges.forEach(function(AB){var OB=kB.edges[AB],MB=OB.left;if(MB!==zB.site&&MB||(MB=OB.right)){var DB=_B-MB[0],qB=xB-MB[1],LB=DB*DB+qB*qB;LB<PB&&(PB=LB,SB=MB.index)}});while(null!==SB);return kB._found=wB,null==vB||PB<=vB*vB?zB.site:null}};var vj=Ue(jx,Rl),kj=[[-100000,-100000],[100000,100000]];vj.transform=function(bB,_B){var xB=bB.as||'path',vB=_B.source,kB,wB,SB,CB;for(kB=Fx().x(bB.x).y(bB.y),bB.size?kB.size(bB.size):kB.extent(bB.extent||kj),this.value=kB=kB(vB),wB=kB.polygons(),(SB=0,CB=vB.length);SB<CB;++SB)vB[SB][xB]=wB[SB]?'M'+wB[SB].join('L')+'Z':null;return _B.reflow(bB.modified()).modifies(xB)};Pl({type:'Voronoi',metadata:{modifies:!0},params:[{name:'x',type:'field',required:!0},{name:'y',type:'field',required:!0},{name:'size',type:'number',array:!0,length:2},{name:'extent',type:'array',array:!0,length:2,default:[[-100000,-100000],[100000,100000]],content:{type:'number',array:!0,length:2}},{name:'as',type:'string',default:'path'}]},jx);var Ej=Math.PI/180,Sj=64,Cj=2048,zj={archimedean:Gx,rectangular:function(bB){var _B=4,xB=_B*bB[0]/bB[1],vB=0,kB=0;return function(wB){var SB=0>wB?-1:1;switch(3&Math.sqrt(1+4*SB*wB)-SB){case 0:vB+=xB;break;case 1:kB+=_B;break;case 2:vB-=xB;break;default:kB-=_B;}return[vB,kB]}}},Tj=['x','y','font','fontSize','fontStyle','fontWeight','angle'],Rj=['text','font','rotate','fontSize','fontStyle','fontWeight'],Pj=Ue(Jx,Rl);Pj.transform=function(bB,_B){var vB=bB.modified();if(vB||_B.changed(_B.ADD_REM)||Rj.some(function(FB){var jB=bB[FB];return Oe(jB)&&_B.modified(jB.fields)})){var kB=this.value,wB=bB.as||Tj,SB=bB.fontSize||14,CB;if(Oe(SB)?CB=bB.fontSizeRange:SB=Me(SB),CB){var zB=SB,TB=cu('sqrt')().domain(Zx(zB,_B)).range(CB);SB=function(jB){return TB(zB(jB))}}var RB=_B.materialize(_B.SOURCE).source;RB.forEach(function(FB){FB[wB[0]]=NaN,FB[wB[1]]=NaN,FB[wB[3]]=0});for(var PB=kB.words(RB).text(bB.text).size(bB.size||[500,500]).padding(bB.padding||1).spiral(bB.spiral||'archimedean').rotate(bB.rotate||0).font(bB.font||'sans-serif').fontStyle(bB.fontStyle||'normal').fontWeight(bB.fontWeight||'normal').fontSize(SB).layout(),AB=kB.size(),OB=AB[0]>>1,MB=AB[1]>>1,DB=0,qB=PB.length,LB,UB;DB<qB;++DB)LB=PB[DB],UB=LB.datum,UB[wB[0]]=LB.x+OB,UB[wB[1]]=LB.y+MB,UB[wB[2]]=LB.font,UB[wB[3]]=LB.size,UB[wB[4]]=LB.style,UB[wB[5]]=LB.weight,UB[wB[6]]=LB.rotate;return _B.reflow(vB).modifies(wB)}};Pl({type:'Wordcloud',metadata:{modifies:!0},params:[{name:'size',type:'number',array:!0,length:2},{name:'font',type:'string',expr:!0,default:'sans-serif'},{name:'fontStyle',type:'string',expr:!0,default:'normal'},{name:'fontWeight',type:'string',expr:!0,default:'normal'},{name:'fontSize',type:'number',expr:!0,default:14},{name:'fontSizeRange',type:'number',array:!0,null:!0,default:[10,50]},{name:'rotate',type:'number',expr:!0,default:0},{name:'text',type:'field'},{name:'spiral',type:'string',values:['archimedean','rectangular']},{name:'padding',type:'number',expr:!0},{name:'as',type:'string',array:!0,length:7,default:['x','y','font','fontSize','fontStyle','fontWeight','angle']}]},Jx);var Oj=Ue(fv,Rl);Oj.transform=function(bB,_B){if(!this._dims)return this.init(bB,_B);var xB=bB.modified('fields')||bB.fields.some(function(vB){return _B.modified(vB.fields)});return xB?this.reinit(bB,_B):this.eval(bB,_B)},Oj.init=function(bB,_B){for(var xB=bB.fields,vB=bB.query,kB=this._indices={},wB=this._dims=[],SB=vB.length,CB=0,zB,TB;CB<SB;++CB)zB=xB[CB].fname,TB=kB[zB]||(kB[zB]=ov()),wB.push(dv(TB,CB,vB[CB]));return this.eval(bB,_B)},Oj.reinit=function(bB,_B){var xB=_B.materialize().fork(),vB=bB.fields,kB=bB.query,wB=this._indices,SB=this._dims,CB=this.value,zB=CB.curr(),TB=CB.prev(),RB=CB.all(),PB=xB.rem=xB.add,AB=xB.mod,OB=kB.length,MB={},DB,qB,LB,UB,FB,jB,IB,$B,NB;if(TB.set(zB),_B.rem.length&&(FB=this.remove(bB,_B,xB)),_B.add.length&&CB.add(_B.add),_B.mod.length)for(jB={},UB=_B.mod,IB=0,$B=UB.length;IB<$B;++IB)jB[UB[IB]._index]=1;for(IB=0;IB<OB;++IB)NB=vB[IB],(!SB[IB]||bB.modified('fields',IB)||_B.modified(NB.fields))&&(LB=NB.fname,!(DB=MB[LB])&&(wB[LB]=qB=ov(),MB[LB]=DB=qB.insert(NB,_B.source,0)),SB[IB]=dv(qB,IB,kB[IB]).onAdd(DB,zB));for(IB=0,$B=CB.data().length;IB<$B;++IB)if(FB[IB])continue;else TB[IB]===zB[IB]?jB[IB]&&zB[IB]!==RB&&AB.push(IB):PB.push(IB);return CB.mask=(1<<OB)-1,xB},Oj.eval=function(bB,_B){var xB=_B.materialize().fork(),vB=this._dims.length,kB=0;return _B.rem.length&&(this.remove(bB,_B,xB),kB|=(1<<vB)-1),bB.modified('query')&&!bB.modified('fields')&&(kB|=this.update(bB,_B,xB)),_B.add.length&&(this.insert(bB,_B,xB),kB|=(1<<vB)-1),_B.mod.length&&(this.modify(_B,xB),kB|=(1<<vB)-1),this.value.mask=kB,xB},Oj.insert=function(bB,_B,xB){var vB=_B.add,kB=this.value,wB=this._dims,SB=this._indices,CB=bB.fields,zB={},TB=xB.add,RB=kB.size(),PB=RB+vB.length,AB=wB.length,OB,MB,DB;kB.resize(PB,AB),kB.add(vB);var qB=kB.curr(),LB=kB.prev(),UB=kB.all();for(OB=0;OB<AB;++OB)MB=CB[OB].fname,DB=zB[MB]||(zB[MB]=SB[MB].insert(CB[OB],vB,RB)),wB[OB].onAdd(DB,qB);for(;RB<PB;++RB)LB[RB]=UB,qB[RB]!==UB&&TB.push(RB)},Oj.modify=function(bB,_B){var xB=_B.mod,vB=this.value,kB=vB.curr(),wB=vB.all(),SB=bB.mod,CB,zB,TB;for(CB=0,zB=SB.length;CB<zB;++CB)TB=SB[CB]._index,kB[TB]!==wB&&xB.push(TB)},Oj.remove=function(bB,_B,xB){var vB=this._indices,kB=this.value,wB=kB.curr(),SB=kB.prev(),CB=kB.all(),zB={},TB=xB.rem,RB=_B.rem,PB,AB,OB,MB;for(PB=0,AB=RB.length;PB<AB;++PB)OB=RB[PB]._index,zB[OB]=1,SB[OB]=MB=wB[OB],wB[OB]=CB,MB!==CB&&TB.push(OB);for(OB in vB)vB[OB].remove(AB,zB);return this.reindex(_B,AB,zB),zB},Oj.reindex=function(bB,_B,xB){var vB=this._indices,kB=this.value;bB.runAfter(function(){var wB=kB.remove(_B,xB);for(var SB in vB)vB[SB].reindex(wB)})},Oj.update=function(bB,_B,xB){var vB=this._dims,kB=bB.query,wB=_B.stamp,SB=vB.length,CB=0,zB,TB;for(xB.filters=0,TB=0;TB<SB;++TB)bB.modified('query',TB)&&(zB=TB,++CB);if(1===CB)CB=vB[zB].one,this.incrementOne(vB[zB],kB[zB],xB.add,xB.rem);else for(TB=0,CB=0;TB<SB;++TB)bB.modified('query',TB)&&(CB|=vB[TB].one,this.incrementAll(vB[TB],kB[TB],wB,xB.add),xB.rem=xB.add);return CB},Oj.incrementAll=function(bB,_B,xB,vB){var kB=this.value,wB=kB.seen(),SB=kB.curr(),CB=kB.prev(),zB=bB.index(),TB=bB.bisect(bB.range),RB=bB.bisect(_B),PB=RB[0],AB=RB[1],OB=TB[0],MB=TB[1],DB=bB.one,qB,LB,UB;if(PB<OB)for(qB=PB,LB=Math.min(OB,AB);qB<LB;++qB)UB=zB[qB],wB[UB]!==xB&&(CB[UB]=SB[UB],wB[UB]=xB,vB.push(UB)),SB[UB]^=DB;else if(PB>OB)for(qB=OB,LB=Math.min(PB,MB);qB<LB;++qB)UB=zB[qB],wB[UB]!==xB&&(CB[UB]=SB[UB],wB[UB]=xB,vB.push(UB)),SB[UB]^=DB;if(AB>MB)for(qB=Math.max(PB,MB),LB=AB;qB<LB;++qB)UB=zB[qB],wB[UB]!==xB&&(CB[UB]=SB[UB],wB[UB]=xB,vB.push(UB)),SB[UB]^=DB;else if(AB<MB)for(qB=Math.max(OB,AB),LB=MB;qB<LB;++qB)UB=zB[qB],wB[UB]!==xB&&(CB[UB]=SB[UB],wB[UB]=xB,vB.push(UB)),SB[UB]^=DB;bB.range=_B.slice()},Oj.incrementOne=function(bB,_B,xB,vB){var kB=this.value,wB=kB.curr(),SB=bB.index(),CB=bB.bisect(bB.range),zB=bB.bisect(_B),TB=zB[0],RB=zB[1],PB=CB[0],AB=CB[1],OB=bB.one,MB,DB,qB;if(TB<PB)for(MB=TB,DB=Math.min(PB,RB);MB<DB;++MB)qB=SB[MB],wB[qB]^=OB,xB.push(qB);else if(TB>PB)for(MB=PB,DB=Math.min(TB,AB);MB<DB;++MB)qB=SB[MB],wB[qB]^=OB,vB.push(qB);if(RB>AB)for(MB=Math.max(TB,AB),DB=RB;MB<DB;++MB)qB=SB[MB],wB[qB]^=OB,xB.push(qB);else if(RB<AB)for(MB=Math.max(PB,RB),DB=AB;MB<DB;++MB)qB=SB[MB],wB[qB]^=OB,vB.push(qB);bB.range=_B.slice()};var Dj=Ue(cv,Rl);Dj.transform=function(bB,_B){var xB=~(bB.ignore||0),vB=bB.filter,kB=vB.mask;if(0===(kB&xB))return _B.StopPropagation;var wB=_B.fork(_B.ALL),SB=vB.data(),CB=vB.curr(),zB=vB.prev(),TB=function(PB){return CB[PB]&xB?null:SB[PB]};return wB.filter(wB.MOD,TB),kB&kB-1?(wB.filter(wB.ADD,function(RB){var PB=CB[RB]&xB,AB=!PB&&PB^zB[RB]&xB;return AB?SB[RB]:null}),wB.filter(wB.REM,function(RB){var PB=CB[RB]&xB,AB=PB&&!(PB^(PB^zB[RB]&xB));return AB?SB[RB]:null})):(wB.filter(wB.ADD,TB),wB.filter(wB.REM,function(RB){return(CB[RB]&xB)===kB?SB[RB]:null})),wB.filter(wB.SOURCE,function(RB){return TB(RB._index)})};Pl({type:'CrossFilter',metadata:{},params:[{name:'fields',type:'field',array:!0,required:!0},{name:'query',type:'array',array:!0,required:!0,content:{type:'number',array:!0,length:2}}]},fv),Pl({type:'ResolveFilter',metadata:{},params:[{name:'ignore',type:'number',required:!0,description:'A bit mask indicating which filters to ignore.'},{name:'filter',type:'object',required:!0,description:'Per-tuple filter bitmaps from a CrossFilter transform.'}]},cv);var Lj=Ue(uv,Rl),Uj=new Pa;Lj.transform=function(bB,_B){var xB=bB.mark,vB=xB.marktype,kB=SP[vB],wB=kB.bound,SB=xB.clip,CB=xB.bounds,zB;return xB.bounds_prev.clear().union(CB),kB.nested?(CB=pv(xB,wB),xB.items.forEach(function(TB){TB.bounds_prev.clear().union(TB.bounds),TB.bounds.clear().union(CB)})):'group'===vB||bB.modified()?(CB.clear(),xB.items.forEach(function(TB){CB.union(pv(TB,wB))})):(zB=_B.changed(_B.REM),_B.visit(_B.ADD,function(TB){CB.union(pv(TB,wB))}),_B.visit(_B.MOD,function(TB){zB=zB||CB.alignsWith(TB.bounds),CB.union(pv(TB,wB))}),zB&&!SB&&(CB.clear(),xB.items.forEach(function(TB){CB.union(TB.bounds)}))),SB&&CB.intersect(Uj.set(0,0,xB.group.width,xB.group.height)),_B.modifies('bounds')};var Fj=Ue(gv,Rl);Fj.transform=function(bB,_B){var xB=this.value;xB||(xB=_B.dataflow.scenegraph().mark(bB.markdef,mv(bB),bB.index),xB.group.context=bB.context,!bB.context.group&&(bB.context.group=xB.group),xB.source=this,this.value=xB);var vB='group'===xB.marktype?Ma:Oa;return _B.visit(_B.ADD,function(kB){vB.call(kB,xB)}),xB.items=_B.source,_B};var jj=Ue(hv,Rl);jj.transform=function(bB,_B){var xB=_B.dataflow;if(_B.changed(_B.REM)&&xB.enqueue(_B.materialize(_B.REM).rem),_B.changed(_B.ADD)&&xB.enqueue(_B.materialize(_B.ADD).add),_B.changed(_B.MOD)&&xB.enqueue(_B.materialize(_B.MOD).mod),_B.fields&&_B.fields.zindex){var vB=_B.source&&_B.source[0];vB&&(vB.mark.zdirty=!0)}};var Ij='axis',$j='legend',Nj='row-header',Bj='row-footer',Yj='row-title',Gj='column-header',Wj='column-footer',Hj='column-title',Xj='fit',Vj='pad',Jj='none',Zj='axis',Kj='title',Qj='frame',eI='legend',tI='scope',nI='row-header',aI='row-footer',iI='column-header',dI='column-footer',rI=Ue(Tv,Rl);rI.transform=function(bB,_B){var xB=_B.dataflow;return bB.mark.items.forEach(function(vB){bB.layout&&Sv(xB,vB,bB.layout),Rv(xB,vB,bB)}),_B};var oI='default',lI='view',fI='vega-bind',cI='vega-bind-name',uI='vega-bind-radio',pI='vega-option-',gI='outer',mI=['value','update','react','bind'];zk.prototype.visit=function(bB){var _B=this,xB,vB,kB;if(bB(_B))return 1;for(xB=Tk(_B),vB=0,kB=xB.length;vB<kB;++vB)if(xB[vB].visit(bB))return 1};var hI,yI,bI,_I,xI=1,vI=2,kI=3,wI=4,EI=5,SI=6,CI=7,zI=8,TI='ArrayExpression',RI='BinaryExpression',PI='CallExpression',AI='ConditionalExpression',OI='Identifier',MI='Literal',DI='LogicalExpression',qI='MemberExpression',LI='ObjectExpression',UI='Property',FI='UnaryExpression',jI='Unexpected token %0',II='Unexpected number',$I='Unexpected string',NI='Unexpected identifier',BI='Unexpected reserved word',YI='Unexpected end of input',GI='Invalid regular expression',WI='Invalid regular expression: missing /',HI='Octal literals are not allowed in strict mode.',XI='Duplicate data property in object literal not allowed in strict mode',VI='ILLEGAL',JI='Disabled.',ZI=/[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]/,KI=/[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]/,QI={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1},e$={if:1,this:1},t$={NaN:'NaN',E:'Math.E',LN2:'Math.LN2',LN10:'Math.LN10',LOG2E:'Math.LOG2E',LOG10E:'Math.LOG10E',PI:'Math.PI',SQRT1_2:'Math.SQRT1_2',SQRT2:'Math.SQRT2'},n$=$w(IM),a$=$w(tR),i$=$w(QT),d$=$w(nR),r$=$w(eR),o$=new Date(2e3,0,1),l$='undefined'!==typeof window&&window||null,s$='Literal',f$='Identifier',u$='%',p$=':',g$=bE('area'),m$=bE('bounds'),h$=bE('centroid'),y$={},b$='union',_$='unit',x$='others',v$={isArray:Qz,isBoolean:Fe,isDate:je,isNumber:Ie,isObject:Ee,isRegExp:$e,isString:Se,toBoolean:He,toDate:Xe,toNumber:Ve,toString:Je,pad:Ge,truncate:Ke,rgb:Xs,lab:nf,hcl:uf,hsl:Ks,sequence:J,format:n$,utcFormat:a$,utcParse:d$,timeFormat:i$,timeParse:r$,monthFormat:function(bB){return Nw(bB,1,'%B')},monthAbbrevFormat:function(bB){return Nw(bB,1,'%b')},dayFormat:function(bB){return Nw(0,2+bB,'%A')},dayAbbrevFormat:function(bB){return Nw(0,2+bB,'%a')},quarter:function(bB){return 1+~~(new Date(bB).getMonth()/3)},utcquarter:function(bB){return 1+~~(new Date(bB).getUTCMonth()/3)},warn:function(){return Vw(this.context.dataflow,'warn',arguments)},info:function(){return Vw(this.context.dataflow,'info',arguments)},debug:function(){return Vw(this.context.dataflow,'debug',arguments)},inScope:function(bB){var _B=this.context.group,xB=!1;if(_B)for(;bB;){if(bB===_B){xB=!0;break}bB=bB.mark.group}return xB},clampRange:function(bB,_B,xB){var vB=bB[0],kB=bB[1],wB;return kB<vB&&(wB=kB,kB=vB,vB=wB),wB=kB-vB,wB>=xB-_B?[_B,xB]:[Math.min(Math.max(vB,_B),xB-wB),Math.min(Math.max(kB,wB),xB)]},pinchDistance:function(){return'Math.sqrt(Math.pow(event.touches[0].clientX - event.touches[1].clientX, 2) + Math.pow(event.touches[0].clientY - event.touches[1].clientY, 2))'},pinchAngle:function(){return'Math.atan2(event.touches[1].clientY - event.touches[0].clientY,event.touches[1].clientX - event.touches[0].clientX)'},open:function(bB,_B){var xB=this.context.dataflow;l$&&l$.open?xB.loader().sanitize(bB,{context:'open',name:_B}).then(function(vB){l$.open(vB,_B)}).catch(function(vB){xB.warn('Open url failed: '+vB)}):xB.warn('Open function can only be invoked in a browser.')},screen:function(){return l$?l$.screen:{}},windowsize:function(){return l$?[l$.innerWidth,l$.innerHeight]:[void 0,void 0]},span:function(bB){return bB[bB.length-1]-bB[0]||0},bandspace:function(bB,_B,xB){return js(bB||0,_B||0,xB||0)},inrange:zE,encode:function(bB,_B,xB){if(bB){var vB=this.context.dataflow,kB=bB.mark.source;vB.pulse(kB,vB.changeset().encode(bB,_B))}return xB===void 0?bB:xB},modify:function(bB,_B,xB,vB,kB,wB){var SB=this.context.dataflow,CB=this.context.data[bB],zB=CB.input,TB=CB.changes,RB=SB.stamp(),PB,AB;if(!1===SB._trigger||!(zB.value.length||_B||vB))return 0;if((!TB||TB.stamp<RB)&&(CB.changes=TB=SB.changeset(),TB.stamp=RB,SB.runAfter(function(){CB.modified=!0,SB.pulse(zB,TB).run()})),xB&&(PB=!0===xB?dT:Qz(xB)||null!=xB._id?xB:RE(xB),TB.remove(PB)),_B&&TB.insert(_B),vB&&(PB=RE(vB),zB.value.some(PB)?TB.remove(PB):TB.insert(vB)),kB)for(AB in wB)TB.modify(kB,AB,wB[AB]);return 1}},k$=['view','item','group','xy','x','y'],E$='this.',S$={};IE('bandwidth',function(bB,_B){var xB=oE(bB,(_B||this).context);return xB&&xB.bandwidth?xB.bandwidth():0},sE),IE('copy',function(bB,_B){var xB=oE(bB,(_B||this).context);return xB?xB.copy():void 0},sE),IE('domain',function(bB,_B){var xB=oE(bB,(_B||this).context);return xB?xB.domain():[]},sE),IE('range',function(bB,_B){var xB=oE(bB,(_B||this).context);return xB&&xB.range?xB.range():[]},sE),IE('invert',function(bB,_B,xB){var vB=oE(bB,(xB||this).context);return vB?Qz(_B)?(vB.invertRange||vB.invert)(_B):(vB.invert||vB.invertExtent)(_B):void 0},sE),IE('scale',function(bB,_B,xB){var vB=oE(bB,(xB||this).context);return vB?vB(_B):void 0},sE),IE('gradient',function(bB,_B,xB,vB){var kB=Aa(_B,xB),wB=bB.domain(),SB=wB[0],CB=wB[wB.length-1],zB=xu(bB,SB,CB);bB.ticks&&(wB=bB.ticks(+vB||15),SB!==wB[0]&&wB.unshift(SB),CB!==wB[wB.length-1]&&wB.push(CB));for(var TB=0,RB=wB.length;TB<RB;++TB)kB.stop(zB(wB[TB]),bB(wB[TB]));return kB},sE),IE('geoArea',g$,sE),IE('geoBounds',m$,sE),IE('geoCentroid',h$,sE),IE('indata',function(bB,_B,xB){var vB=this.context.data[bB]['index:'+_B],kB=vB?vB.value.get(xB):void 0;return kB?kB.count:kB},function(bB,_B,xB,vB){_B[0].type!==s$&&ke('First argument to indata must be a string literal.'),_B[1].type!==s$&&ke('Second argument to indata must be a string literal.');var kB=_B[0].value,wB=_B[1].value,SB='@'+wB;vB.hasOwnProperty(SB)||(vB[SB]=xB.getData(kB).indataRef(xB,wB))}),IE('data',_E,xE),IE('vlPoint',function(bB,_B,xB,vB,kB){return ME.call(this,bB,_B,xB,vB,kB,AE)},xE),IE('vlInterval',function(bB,_B,xB,vB,kB){return ME.call(this,bB,_B,xB,vB,kB,OE)},xE),IE('vlPointDomain',function(bB,_B,xB,vB){for(var kB=this.context.data[bB],wB=kB?kB.values.value:[],SB={},CB=0,zB={},TB=[],RB=0,PB=wB.length,AB,OB,MB,DB;RB<PB;++RB)AB=wB[RB],OB=AB.unit,DB=AB.values[0],SB[OB]||(SB[OB]=++CB),(_B&&AB.encodings[0]===_B||xB&&AB.fields[0]===xB)&&(!(MB=zB[DB])&&(zB[DB]=MB={value:DB,units:{},count:0}),!MB.units[OB]&&(MB.units[OB]=++MB.count));for(DB in zB)(vB===b$||(MB=zB[DB]).count===CB)&&TB.push(MB.value);return TB.length?TB:void 0},xE),IE('vlIntervalDomain',function(bB,_B,xB,vB){for(var kB=vB===b$?FE:jE,wB=this.context.data[bB],SB=wB?wB.values.value:[],CB=0,zB=SB.length,TB,RB,PB,AB,OB,MB,DB,qB;CB<zB;++CB)for(TB=SB[CB].intervals,PB=0,RB=TB.length;PB<RB;++PB)AB=TB[PB],(_B&&AB.encoding===_B||xB&&AB.field===xB)&&(OB=AB.extent,DB=OB[0],qB=OB[1],DB>qB&&(qB=OB[1],DB=OB[0]),MB=MB?kB(MB,DB,qB):[DB,qB]);return MB&&MB.length&&+MB[0]!==+MB[1]?MB:void 0},xE),IE('treePath',function(bB,_B,xB){var vB=EE(bB,this),kB=vB[_B],wB=vB[xB];return kB&&wB?kB.path(wB).map(wE):void 0},xE),IE('treeAncestors',function(bB,_B){var xB=EE(bB,this)[_B];return xB?xB.ancestors().map(wE):void 0},xE);var C$={blacklist:['_'],whitelist:['datum','event','item'],fieldvar:'datum',globalvar:function(_B){return'_['+Ce('$'+_B)+']'},functions:function(bB){var _B=jw(bB);for(var xB in k$.forEach(function(vB){_B[vB]='event.vega.'+vB}),v$)_B[xB]=E$+xB;return _B},constants:t$,visitors:S$},z$=function(bB){function _B(MB){if(Se(MB))return MB;var DB=OB[MB.type];return null==DB&&ke('Unsupported type: '+MB.type),DB(MB)}function xB(MB){var DB={code:_B(MB),globals:Object.keys(TB),fields:Object.keys(RB)};return TB={},RB={},DB}bB=bB||{};var vB=bB.whitelist?Ze(bB.whitelist):{},kB=bB.blacklist?Ze(bB.blacklist):{},wB=bB.constants||t$,SB=(bB.functions||jw)(_B),CB=bB.globalvar,zB=bB.fieldvar,TB={},RB={},PB=0,AB=Oe(CB)?CB:function(MB){return CB+'["'+MB+'"]'},OB={Literal:function(DB){return DB.raw},Identifier:function(DB){var qB=DB.name;return 0<PB?qB:kB.hasOwnProperty(qB)?ke('Illegal identifier: '+qB):wB.hasOwnProperty(qB)?wB[qB]:vB.hasOwnProperty(qB)?qB:(TB[qB]=1,AB(qB))},MemberExpression:function(DB){var qB=!DB.computed,LB=_B(DB.object);qB&&(PB+=1);var UB=_B(DB.property);return LB===zB&&(RB[UB]=1),qB&&(PB-=1),LB+(qB?'.'+UB:'['+UB+']')},CallExpression:function(DB){'Identifier'!==DB.callee.type&&ke('Illegal callee type: '+DB.callee.type);var qB=DB.callee.name,LB=DB.arguments,UB=SB.hasOwnProperty(qB)&&SB[qB];return UB||ke('Unrecognized function: '+qB),Oe(UB)?UB(LB):UB+'('+LB.map(_B).join(',')+')'},ArrayExpression:function(DB){return'['+DB.elements.map(_B).join(',')+']'},BinaryExpression:function(DB){return'('+_B(DB.left)+DB.operator+_B(DB.right)+')'},UnaryExpression:function(DB){return'('+DB.operator+_B(DB.argument)+')'},ConditionalExpression:function(DB){return'('+_B(DB.test)+'?'+_B(DB.consequent)+':'+_B(DB.alternate)+')'},LogicalExpression:function(DB){return'('+_B(DB.left)+DB.operator+_B(DB.right)+')'},ObjectExpression:function(DB){return'{'+DB.properties.map(_B).join(',')+'}'},Property:function(DB){PB+=1;var qB=_B(DB.key);return PB-=1,qB+':'+_B(DB.value)}};return xB.functions=SB,xB.constants=wB,xB}(C$),T$='$',R$='view',P$='scope',A$='view',O$='[',M$=']',D$='{',q$='}',L$=':',U$=',',F$='@',j$='>',I$=/[\[\]\{\}]/,$$,N$,B$={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Y$='var datum=event.item&&event.item.datum;',G$=Ze(['rule']),W$=Ze(['group','image','rect']),H$='mark',X$='frame',V$='scope',J$='axis',Z$='axis-domain',K$='axis-grid',Q$='axis-label',eN='axis-tick',tN='axis-title',nN='legend',aN='legend-entry',iN='legend-gradient',dN='legend-label',rN='legend-symbol',oN='legend-title',lN='title',sN={name:1,interactive:1},fN='group',cN='rect',uN='rule',pN='symbol',gN='text',mN='top',hN='left',yN='right',bN='bottom',_N='index',xN='label',vN='offset',kN='perc',wN='size',EN='total',SN='value',CN=['shape','size','fill','stroke','strokeDash','opacity'],zN='datum.'+kN+'<=0?"left":datum.'+kN+'>=1?"right":"center"',TN=BS('key'),PN='descending',AN=VS('Aggregate'),ON=VS('AxisTicks'),MN=VS('Bound'),DN=VS('Collect'),qN=VS('Compare'),LN=VS('DataJoin'),UN=VS('Encode'),FN=VS('Facet'),jN=VS('Field'),IN=VS('Key'),$N=VS('LegendEntries'),NN=VS('Mark'),BN=VS('MultiExtent'),YN=VS('MultiValues'),GN=VS('Params'),WN=VS('PreFacet'),HN=VS('Projection'),XN=VS('Proxy'),VN=VS('Relay'),JN=VS('Render'),ZN=VS('Scale'),KN=VS('Sieve'),QN=VS('SortItems'),eB=VS('ViewLayout'),tB=VS('Values');fC.fromEntries=function(bB,_B){var xB=_B.length,vB=1,kB=_B[0],wB=_B[xB-1],SB=_B[xB-2],CB=null;for(bB.add(_B[0]);vB<xB;++vB)_B[vB].params.pulse=NS(_B[vB-1]),bB.add(_B[vB]),'Aggregate'===_B[vB].type&&(CB=_B[vB]);return new fC(bB,kB,SB,wB,CB)};var nB=fC.prototype;nB.countsRef=function(bB,_B,xB){var vB=this,kB=vB.counts||(vB.counts={}),wB=cC(_B),SB,CB,zB;return null!=wB&&(bB=vB.scope,SB=kB[wB]),SB?xB&&xB.field&&uC(bB,SB.agg.params,xB):(zB={groupby:bB.fieldRef(_B,'key'),pulse:NS(vB.output)},xB&&xB.field&&uC(bB,zB,xB),CB=bB.add(AN(zB)),SB=bB.add(DN({pulse:NS(CB)})),SB={agg:CB,ref:NS(SB)},null!=wB&&(kB[wB]=SB)),SB.ref},nB.tuplesRef=function(){return NS(this.values)},nB.extentRef=function(bB,_B){return pC(bB,this,'extent','Extent',_B,!1)},nB.domainRef=function(bB,_B){return pC(bB,this,'domain','Values',_B,!1)},nB.valuesRef=function(bB,_B,xB){return pC(bB,this,'vals','Values',_B,xB||!0)},nB.lookupRef=function(bB,_B){return pC(bB,this,'lookup','TupleIndex',_B,!1)},nB.indataRef=function(bB,_B){return pC(bB,this,'indata','TupleIndex',_B,!0,!0)};var aB=0,iB=['identity','ordinal','band','point','bin-linear','bin-ordinal','linear','pow','sqrt','log','sequential','time','utc','quantize','quantile','threshold'],dB=Ze(iB),rB=Ze(iB.slice(1,6)),oB=Ze(['width','height','padding']),lB=ez.prototype=nz.prototype;lB.fork=function(){return new nz(this)},lB.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings}},lB.id=function(){return(this._subid?this._subid+':':0)+this._id++},lB.add=function(bB){return this.operators.push(bB),bB.id=this.id(),bB.refs&&(bB.refs.forEach(function(_B){_B.$ref=bB.id}),bB.refs=null),bB},lB.proxy=function(bB){var _B=bB instanceof jS?NS(bB):bB;return this.add(XN({value:_B}))},lB.addStream=function(bB){return this.streams.push(bB),bB.id=this.id(),bB},lB.addUpdate=function(bB){return this.updates.push(bB),bB},lB.finish=function(){function bB(kB,wB,SB){var CB,zB;kB&&(CB=kB.data||(kB.data={}),zB=CB[wB]||(CB[wB]=[]),zB.push(SB))}var _B,xB;for(_B in this.root&&(this.root.root=!0),this.signals)this.signals[_B].signal=_B;for(_B in this.scales)this.scales[_B].scale=_B;for(_B in this.data)for(var vB in xB=this.data[_B],bB(xB.input,_B,'input'),bB(xB.output,_B,'output'),bB(xB.values,_B,'values'),xB.index)bB(xB.index[vB],_B,'index:'+vB);return this},lB.pushState=function(bB,_B,xB){this._encode.push(NS(this.add(KN({pulse:bB})))),this._parent.push(_B),this._lookup.push(xB?NS(this.proxy(xB)):null),this._markpath.push(-1)},lB.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},lB.parent=function(){return We(this._parent)},lB.encode=function(){return We(this._encode)},lB.lookup=function(){return We(this._lookup)},lB.markpath=function(){var bB=this._markpath;return++bB[bB.length-1]},lB.fieldRef=function(bB,_B){if(Se(bB))return BS(bB,_B);bB.signal||ke('Unsupported field reference: '+Ce(bB));var xB=bB.signal,vB=this.field[xB],kB;return vB||(kB={name:this.signalRef(xB)},_B&&(kB.as=_B),this.field[xB]=vB=NS(this.add(jN(kB)))),vB},lB.compareRef=function(bB){function _B(SB){return XS(SB)?(vB=!0,NS(xB[SB.signal])):SB}var xB=this.signals,vB=!1,kB=Pe(bB.field).map(_B),wB=Pe(bB.order).map(_B);return vB?NS(this.add(qN({fields:kB,orders:wB}))):YS(kB,wB)},lB.keyRef=function(bB){var xB=this.signals,vB=!1;return bB=Pe(bB).map(function(kB){return XS(kB)?(vB=!0,NS(xB[kB.signal])):kB}),vB?NS(this.add(IN({fields:bB}))):GS(bB)},lB.sortRef=function(bB){if(!bB)return bB;var _B=[HS(bB.op,bB.field),'_id'],xB=bB.order||'ascending';return xB.signal?NS(this.add(qN({fields:_B,orders:[xB=this.signalRef(xB.signal),xB]}))):YS(_B,[xB,xB])},lB.event=function(bB,_B){var xB=bB+':'+_B;if(!this.events[xB]){var vB=this.id();this.streams.push({id:vB,source:bB,type:_B}),this.events[xB]=vB}return this.events[xB]},lB.addSignal=function(bB,_B){this.signals.hasOwnProperty(bB)&&ke('Duplicate signal name: '+Ce(bB));var xB=_B instanceof jS?_B:this.add($S(_B));return this.signals[bB]=xB},lB.getSignal=function(bB){return this.signals[bB]||ke('Unrecognized signal name: '+Ce(bB)),this.signals[bB]},lB.signalRef=function(bB){return this.signals[bB]?NS(this.signals[bB]):(this.lambdas[bB]||(this.lambdas[bB]=this.add($S(null))),NS(this.lambdas[bB]))},lB.parseLambdas=function(){for(var bB=Object.keys(this.lambdas),_B=0,xB=bB.length;_B<xB;++_B){var vB=bB[_B],kB=NE(vB,this),wB=this.lambdas[vB];wB.params=kB.$params,wB.update=kB.$expr}},lB.property=function(bB){return bB&&bB.signal?this.signalRef(bB.signal):bB},lB.objectProperty=function(bB){return bB&&Ee(bB)?this.signalRef(bB.signal||az(bB)):bB},lB.addBinding=function(bB,_B){this.bindings||ke('Nested signals do not support binding: '+Ce(bB)),this.bindings.push(De({signal:bB},_B))},lB.addScaleProj=function(bB,_B){this.scales.hasOwnProperty(bB)&&ke('Duplicate scale or projection name: '+Ce(bB)),this.scales[bB]=this.add(_B)},lB.addScale=function(bB,_B){this.addScaleProj(bB,ZN(_B))},lB.addProjection=function(bB,_B){this.addScaleProj(bB,HN(_B))},lB.getScale=function(bB){return this.scales[bB]||ke('Unrecognized scale name: '+Ce(bB)),this.scales[bB]},lB.projectionRef=lB.scaleRef=function(bB){return NS(this.getScale(bB))},lB.projectionType=lB.scaleType=function(bB){return this.getScale(bB).params.type},lB.addData=function(bB,_B){return this.data.hasOwnProperty(bB)&&ke('Duplicate data set name: '+Ce(bB)),this.data[bB]=_B},lB.getData=function(bB){return this.data[bB]||ke('Undefined data set name: '+Ce(bB)),this.data[bB]},lB.addDataPipeline=function(bB,_B){return this.data.hasOwnProperty(bB)&&ke('Duplicate data set name: '+Ce(bB)),this.addData(bB,fC.fromEntries(this,_B))};var sB=30,fB=2,cB='#4c78a8',uB='#000',pB='#888',gB='#ddd',mB=[{key:'$ref',parse:function(bB,_B){return _B.get(bB.$ref)||ke('Operator not defined: '+bB.$ref)}},{key:'$key',parse:function(bB,_B){var xB='k:'+bB.$key;return _B.fn[xB]||(_B.fn[xB]=Ne(bB.$key))}},{key:'$expr',parse:function(bB,_B){var xB='e:'+bB.$expr;return _B.fn[xB]||(_B.fn[xB]=_e(fz(bB.$expr,_B),bB.$fields,bB.$name))}},{key:'$field',parse:function(bB,_B){var xB='f:'+bB.$field+'_'+bB.$name;return _B.fn[xB]||(_B.fn[xB]=ze(bB.$field,bB.$name))}},{key:'$encode',parse:function(bB,_B){var xB=bB.$encode,vB={},kB,wB;for(kB in xB)wB=xB[kB],vB[kB]=_e(gz(wB.$expr,_B),wB.$fields),vB[kB].output=wB.$output;return vB}},{key:'$compare',parse:function(bB,_B){var xB='c:'+bB.$compare+'_'+bB.$order;return _B.fn[xB]||(_B.fn[xB]=Ae(bB.$compare,bB.$order))}},{key:'$context',parse:function(bB,_B){return _B}},{key:'$subflow',parse:function(bB,_B){var xB=bB.$subflow;return function(vB,kB,wB){var SB=Az(xB,_B.fork()),CB=SB.get(xB.operators[0].id),zB=SB.signals.parent;return zB&&zB.set(wB),CB}}}],hB={skip:!0};qz.prototype=Lz.prototype={fork:function(){var _B=new Lz(this);return(this.subcontext||(this.subcontext=[])).push(_B),_B},get:function(_B){return this.nodes[_B]},set:function(_B,xB){return this.nodes[_B]=xB},add:function(_B,xB){var vB=this,kB=vB.dataflow,wB;if(vB.set(_B.id,xB),'Collect'===_B.type&&(wB=_B.value)&&(wB.$ingest?kB.ingest(xB,wB.$ingest,wB.$format):wB.$request?kB.request(xB,wB.$request,wB.$format):kB.pulse(xB,kB.changeset().insert(wB))),_B.root&&(vB.root=xB),_B.parent){var SB=vB.get(_B.parent.$ref);SB?(kB.connect(SB,[xB]),xB.targets().add(SB)):(vB.unresolved=vB.unresolved||[]).push(function(){SB=vB.get(_B.parent.$ref),kB.connect(SB,[xB]),xB.targets().add(SB)})}if(_B.signal&&(vB.signals[_B.signal]=xB),_B.scale&&(vB.scales[_B.scale]=xB),_B.data)for(var CB in _B.data)wB=vB.data[CB]||(vB.data[CB]={}),_B.data[CB].forEach(function(zB){wB[zB]=xB})},resolve:function(){return(this.unresolved||[]).forEach(function(_B){_B()}),delete this.unresolved,this},operator:function(_B,xB,vB){this.add(_B,this.dataflow.add(_B.value,xB,vB,_B.react))},transform:function(_B,xB,vB){this.add(_B,this.dataflow.add(this.transforms[xB],vB))},stream:function(_B,xB){this.set(_B.id,xB)},update:function(_B,xB,vB,kB,wB){this.dataflow.on(xB,vB,kB,wB,_B.options)},getState:function(bB){var _B=this,xB={};if(bB.signals){var vB=xB.signals={};Object.keys(_B.signals).forEach(function(wB){var SB=_B.signals[wB];bB.signals(wB,SB)&&(vB[wB]=SB.value)})}if(bB.data){var kB=xB.data={};Object.keys(_B.data).forEach(function(wB){var SB=_B.data[wB];bB.data(wB,SB)&&(kB[wB]=SB.input.value)})}return _B.subcontext&&!1!==bB.recurse&&(xB.subcontext=_B.subcontext.map(function(wB){return wB.getState(bB)})),xB},setState:function(bB){var _B=this,xB=_B.dataflow,vB=bB.data,kB=bB.signals;Object.keys(kB||{}).forEach(function(wB){xB.update(_B.signals[wB],kB[wB],hB)}),Object.keys(vB||{}).forEach(function(wB){xB.pulse(_B.data[wB].input,xB.changeset().remove(dT).insert(vB[wB]))}),(bB.subcontext||[]).forEach(function(wB,SB){var CB=CB.subcontext[SB];CB&&CB.setState(wB)})}};var yB=Ue(Yz,zl);yB.run=function(bB){zl.prototype.run.call(this,bB);var _B=this._queue;return(this._resize||!_B||_B.length)&&(this.render(_B),this._queue=[]),this},yB.render=function(bB){return this._renderer&&(this._resize&&(this._resize=0,Hv(this)),this._renderer.render(this._scenegraph.root,bB)),this},yB.enqueue=function(bB){this._queue&&bB&&bB.length&&(this._queue=this._queue.concat(bB))},yB.signal=function(bB,_B,xB){var vB=Gz(this,bB);return 1===arguments.length?vB.value:this.update(vB,_B,xB)},yB.scenegraph=function(){return this._scenegraph},yB.background=function(bB){return arguments.length?(this._background=bB,this._resize=1,this):this._background},yB.width=function(bB){return arguments.length?this.signal('width',bB):this.signal('width')},yB.height=function(bB){return arguments.length?this.signal('height',bB):this.signal('height')},yB.padding=function(bB){return arguments.length?this.signal('padding',bB):this.signal('padding')},yB.renderer=function(bB){return arguments.length?(Mo(bB)||this.error('Unrecognized renderer type: '+bB),bB!==this._renderType&&(this._renderType=bB,this._renderer&&(this._renderer=this._queue=null,this.initialize(this._el))),this):this._renderType},yB.loader=function(bB){return arguments.length?(bB!==this._loader&&(zl.prototype.loader.call(this,bB),this._renderer&&(this._renderer=this._queue=null,this.initialize(this._el))),this):this._loader},yB.addEventListener=function(bB,_B){this._handler.on(bB,_B)},yB.removeEventListener=function(bB,_B){this._handler.off(bB,_B)},yB.addSignalListener=function(bB,_B){var xB=Gz(this,bB),vB=function(){_B(bB,xB.value)};this.on(xB,null,(vB.handler=_B,vB))},yB.removeSignalListener=function(bB,_B){var xB=Gz(this,bB),vB=xB._targets||[],kB=vB.filter(function(wB){var SB=wB._update;return SB&&SB.handler===_B});kB.length&&vB.remove(kB[0])},yB.preventDefault=function(bB){return arguments.length?(this._preventDefault=bB,this):this._preventDefault},yB.tooltipHandler=function(bB){var _B=this._handler;return arguments.length?(_B.handleTooltip=bB||io.prototype.handleTooltip,this):_B.handleTooltip},yB.events=function(bB,_B,xB){var vB=this,kB=new Zo(xB),wB=function(RB,PB){vB.preventDefault()&&bB===lI&&RB.preventDefault(),kB.receive(Xv(vB,RB,PB)),vB.run()},SB;if(bB===lI)return vB.addEventListener(_B,wB),kB;if(bB==='window'?'undefined'!==typeof window&&(SB=[window]):'undefined'!==typeof document&&(SB=document.querySelectorAll(bB)),!SB)return vB.warn('Can not resolve event source: '+bB),kB;for(var CB=0,zB=SB.length;CB<zB;++CB)SB[CB].addEventListener(_B,wB);return vB._eventListeners.push({type:_B,sources:SB,handler:wB}),kB},yB.finalize=function(){for(var bB=this._eventListeners,_B=bB.length,xB,vB;0<=--_B;)for(vB=bB[_B],xB=vB.sources.length;0<=--xB;)vB.sources[xB].removeEventListener(vB.type,vB.handler)},yB.hover=function(bB,_B){return this.on(this.events('view','mouseover',Zv),Kv,Qv(bB||'hover')),this.on(this.events('view','mouseout',Zv),Kv,Qv(_B||'update')),this},yB.autosize=function(bB,_B,xB,vB,kB,wB){this.runAfter(function(SB){var CB=0;SB._autosize=0,SB.width()!==xB&&(CB=1,SB.width(xB),SB._resizeWidth.skip(!0)),SB.height()!==vB&&(CB=1,SB.height(vB),SB._resizeHeight.skip(!0)),SB._width!==bB&&(SB._resize=1,SB._width=bB),SB._height!==_B&&(SB._resize=1,SB._height=_B),(SB._origin[0]!==kB[0]||SB._origin[1]!==kB[1])&&(SB._resize=1,SB._origin=kB),CB&&SB.run('enter'),wB&&SB.runAfter(function(){SB._autosize=1})})},yB.data=function(bB){return jv(this,bB).values.value},yB.change=$v,yB.insert=function(bB,_B){return $v.call(this,bB,Go().insert(_B))},yB.remove=function(bB,_B){return $v.call(this,bB,Go().remove(_B))},yB.initialize=function(bB,_B){var xB=this,vB=xB._renderType,kB=Mo(vB),wB,SB;return bB=xB._el=bB?mk(xB,bB):null,kB||xB.error('Unrecognized renderer type: '+vB),wB=kB.handler||so,SB=bB?kB.renderer:kB.headless,xB._renderer=SB?uk(xB,xB._renderer,bB,SB):null,xB._handler=pk(xB,xB._handler,bB,wB),bB&&(_B=_B?mk(xB,_B):bB.appendChild(nk('div',{class:'vega-bindings'})),xB._bind.forEach(function(CB){CB.param.element&&mk(xB,CB.param.element)}),xB._bind.forEach(function(CB){ak(xB,CB.param.element||_B,CB)})),xB},yB.toImageURL=function(bB){return bB!==QP.Canvas&&bB!==QP.SVG&&bB!==QP.PNG?Promise.reject('Unrecognized image type: '+bB):hk(this,bB).then(function(_B){return bB===QP.SVG?_k(_B.svg(),'image/svg+xml'):_B.canvas().toDataURL('image/png')})},yB.toCanvas=function(){return hk(this,QP.Canvas).then(function(bB){return bB.canvas()})},yB.toSVG=function(){return hk(this,QP.SVG).then(function(bB){return bB.svg()})},yB.getState=function(bB){return this._runtime.getState(bB||{data:$z,signals:Nz,recurse:!0})},yB.setState=function(bB){var _B=this;return _B._trigger=!1,_B._runtime.setState(bB),_B.run().runAfter(function(){_B._trigger=!0}),this},Ol('Bound',uv),Ol('Mark',gv),Ol('Render',hv),Ol('ViewLayout',Tv),R.version='3.0.0-beta.31',R.Dataflow=zl,R.EventStream=Zo,R.Parameters=Wo,R.Pulse=rl,R.MultiPulse=yl,R.Operator=Ho,R.Transform=Rl,R.changeset=Go,R.ingest=Io,R.register=Pl,R.definition=Al,R.definitions=OA,R.transform=Ol,R.transforms=AA,R.tupleid=Fo,R.scale=cu,R.scheme=bu,R.interpolate=ku,R.interpolateRange=_u,R.projection=Em,R.View=Yz,R.parse=function(bB,_B){return QC(bB,new ez(iz(_B||bB.config))).toRuntime()},R.expressionFunction=IE,R.formatLocale=Tc,R.timeFormatLocale=Sa,R.runtime=Az,R.runtimeContext=Dz,R.bin=P,R.bootstrapCI=ce,R.randomInteger=function(bB,_B){null==_B&&(_B=bB,bB=0);var xB={},vB,kB,wB;return xB.min=function(SB){return arguments.length?(vB=SB||0,wB=kB-vB,xB):vB},xB.max=function(SB){return arguments.length?(kB=SB||0,wB=kB-vB,xB):kB},xB.sample=function(){return vB+Math.floor(wB*Math.random())},xB.pdf=function(SB){return SB===Math.floor(SB)&&SB>=vB&&SB<kB?1/wB:0},xB.cdf=function(SB){var CB=Math.floor(SB);return CB<vB?0:CB>=kB?1:(CB-vB+1)/wB},xB.icdf=function(SB){return 0<=SB&&1>=SB?vB-1+Math.floor(SB*wB):NaN},xB.min(bB).max(_B)},R.randomKDE=me,R.randomMixture=ye,R.randomNormal=pe,R.randomUniform=be,R.quartiles=ge,R.accessor=_e,R.accessorName=xe,R.accessorFields=ve,R.id=tT,R.identity=nT,R.zero=aT,R.one=iT,R.truthy=dT,R.falsy=rT,R.logger=Re,R.None=oT,R.Warn=lT,R.Info=sT,R.Debug=fT,R.array=Pe,R.compare=Ae,R.constant=Me,R.error=ke,R.extend=De,R.extentIndex=qe,R.fastmap=Le,R.field=ze,R.inherits=Ue,R.isArray=Qz,R.isBoolean=Fe,R.isDate=je,R.isFunction=Oe,R.isNumber=Ie,R.isObject=Ee,R.isRegExp=$e,R.isString=Se,R.key=Ne,R.merge=Be,R.pad=Ge,R.peek=We,R.repeat=Ye,R.splitAccessPath=we,R.stringValue=Ce,R.toBoolean=He,R.toDate=Xe,R.toNumber=Ve,R.toString=Je,R.toSet=Ze,R.truncate=Ke,R.visitArray=Qe,R.loader=St,R.read=Ta,R.inferType=Mt,R.inferTypes=Dt,R.typeParsers=xT,R.formats=tn,R.Bounds=Pa,R.Gradient=Aa,R.GroupItem=Ma,R.ResourceLoader=Ia,R.Item=Oa,R.Scenegraph=no,R.Handler=io,R.Renderer=ro,R.CanvasHandler=so,R.CanvasRenderer=go,R.SVGHandler=yo,R.SVGRenderer=vo,R.SVGStringRenderer=Ro,R.RenderType=QP,R.renderModule=Mo,R.Marks=SP,R.boundContext=Ld,R.boundStroke=qd,R.boundItem=Jr,R.boundMark=Zr,R.pathCurves=Zi,R.pathSymbols=dd,R.pathRectangle=gd,R.pathTrail=md,R.pathParse=Ki,R.pathRender=nd,R.point=oo,R.canvas=ja,R.domCreate=Da,R.domFind=qa,R.domChild=La,R.domClear=Ua,R.openTag=_o,R.closeTag=xo,R.font=Yr,R.textMetrics=xP,R.sceneEqual=Do,R.pathEqual=qo,R.sceneToJSON=Kr,R.sceneFromJSON=Qr,R.sceneZOrder=Yd,R.sceneVisit=Gd,R.scenePickVisit=Wd,Object.defineProperty(R,'__esModule',{value:!0})});</script></head><body></body></html>